/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Sd=Object.create;var fr=Object.defineProperty;var Td=Object.getOwnPropertyDescriptor;var Ad=Object.getOwnPropertyNames;var Id=Object.getPrototypeOf,Md=Object.prototype.hasOwnProperty;var zd=(t,e,n)=>e in t?fr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var J=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ho=(t,e)=>{for(var n in e)fr(t,n,{get:e[n],enumerable:!0})},eu=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ad(e))!Md.call(t,i)&&i!==n&&fr(t,i,{get:()=>e[i],enumerable:!(r=Td(e,i))||r.enumerable});return t};var Ft=(t,e,n)=>(n=t!=null?Sd(Id(t)):{},eu(e||!t||!t.__esModule?fr(n,"default",{value:t,enumerable:!0}):n,t)),Ed=t=>eu(fr({},"__esModule",{value:!0}),t);var $o=(t,e,n)=>(zd(t,typeof e!="symbol"?e+"":e,n),n);var su=J((nv,au)=>{au.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var qt=J(an=>{var Qo,Ld=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];an.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};an.getSymbolTotalCodewords=function(e){return Ld[e]};an.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};an.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Qo=e};an.isKanjiModeEnabled=function(){return typeof Qo!="undefined"};an.toSJIS=function(e){return Qo(e)}});var ai=J(nt=>{nt.L={bit:1};nt.M={bit:0};nt.Q={bit:3};nt.H={bit:2};function Od(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return nt.L;case"m":case"medium":return nt.M;case"q":case"quartile":return nt.Q;case"h":case"high":return nt.H;default:throw new Error("Unknown EC Level: "+t)}}nt.isValid=function(e){return e&&typeof e.bit!="undefined"&&e.bit>=0&&e.bit<4};nt.from=function(e,n){if(nt.isValid(e))return e;try{return Od(e)}catch(r){return n}}});var cu=J((ov,uu)=>{function lu(){this.buffer=[],this.length=0}lu.prototype={get:function(t){let e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};uu.exports=lu});var fu=J((av,hu)=>{function dr(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}dr.prototype.set=function(t,e,n,r){let i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)};dr.prototype.get=function(t,e){return this.data[t*this.size+e]};dr.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};dr.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};hu.exports=dr});var pu=J(si=>{var Pd=qt().getSymbolSize;si.getRowColCoords=function(e){if(e===1)return[];let n=Math.floor(e/7)+2,r=Pd(e),i=r===145?26:Math.ceil((r-13)/(2*n-2))*2,a=[r-7];for(let o=1;o<n-1;o++)a[o]=a[o-1]-i;return a.push(6),a.reverse()};si.getPositions=function(e){let n=[],r=si.getRowColCoords(e),i=r.length;for(let a=0;a<i;a++)for(let o=0;o<i;o++)a===0&&o===0||a===0&&o===i-1||a===i-1&&o===0||n.push([r[a],r[o]]);return n}});var gu=J(du=>{var Bd=qt().getSymbolSize,mu=7;du.getPositions=function(e){let n=Bd(e);return[[0,0],[n-mu,0],[0,n-mu]]}});var xu=J(le=>{le.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var sn={N1:3,N2:3,N3:40,N4:10};le.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};le.from=function(e){return le.isValid(e)?parseInt(e,10):void 0};le.getPenaltyN1=function(e){let n=e.size,r=0,i=0,a=0,o=null,s=null;for(let l=0;l<n;l++){i=a=0,o=s=null;for(let u=0;u<n;u++){let c=e.get(l,u);c===o?i++:(i>=5&&(r+=sn.N1+(i-5)),o=c,i=1),c=e.get(u,l),c===s?a++:(a>=5&&(r+=sn.N1+(a-5)),s=c,a=1)}i>=5&&(r+=sn.N1+(i-5)),a>=5&&(r+=sn.N1+(a-5))}return r};le.getPenaltyN2=function(e){let n=e.size,r=0;for(let i=0;i<n-1;i++)for(let a=0;a<n-1;a++){let o=e.get(i,a)+e.get(i,a+1)+e.get(i+1,a)+e.get(i+1,a+1);(o===4||o===0)&&r++}return r*sn.N2};le.getPenaltyN3=function(e){let n=e.size,r=0,i=0,a=0;for(let o=0;o<n;o++){i=a=0;for(let s=0;s<n;s++)i=i<<1&2047|e.get(o,s),s>=10&&(i===1488||i===93)&&r++,a=a<<1&2047|e.get(s,o),s>=10&&(a===1488||a===93)&&r++}return r*sn.N3};le.getPenaltyN4=function(e){let n=0,r=e.data.length;for(let a=0;a<r;a++)n+=e.data[a];return Math.abs(Math.ceil(n*100/r/5)-10)*sn.N4};function Rd(t,e,n){switch(t){case le.Patterns.PATTERN000:return(e+n)%2===0;case le.Patterns.PATTERN001:return e%2===0;case le.Patterns.PATTERN010:return n%3===0;case le.Patterns.PATTERN011:return(e+n)%3===0;case le.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2===0;case le.Patterns.PATTERN101:return e*n%2+e*n%3===0;case le.Patterns.PATTERN110:return(e*n%2+e*n%3)%2===0;case le.Patterns.PATTERN111:return(e*n%3+(e+n)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}le.applyMask=function(e,n){let r=n.size;for(let i=0;i<r;i++)for(let a=0;a<r;a++)n.isReserved(a,i)||n.xor(a,i,Rd(e,a,i))};le.getBestMask=function(e,n){let r=Object.keys(le.Patterns).length,i=0,a=1/0;for(let o=0;o<r;o++){n(o),le.applyMask(o,e);let s=le.getPenaltyN1(e)+le.getPenaltyN2(e)+le.getPenaltyN3(e)+le.getPenaltyN4(e);le.applyMask(o,e),s<a&&(a=s,i=o)}return i}});var Wo=J(Zo=>{var Ht=ai(),li=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ui=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Zo.getBlocksCount=function(e,n){switch(n){case Ht.L:return li[(e-1)*4+0];case Ht.M:return li[(e-1)*4+1];case Ht.Q:return li[(e-1)*4+2];case Ht.H:return li[(e-1)*4+3];default:return}};Zo.getTotalCodewordsCount=function(e,n){switch(n){case Ht.L:return ui[(e-1)*4+0];case Ht.M:return ui[(e-1)*4+1];case Ht.Q:return ui[(e-1)*4+2];case Ht.H:return ui[(e-1)*4+3];default:return}}});var wu=J(hi=>{var gr=new Uint8Array(512),ci=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)gr[n]=e,ci[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)gr[n]=gr[n-255]})();hi.log=function(e){if(e<1)throw new Error("log("+e+")");return ci[e]};hi.exp=function(e){return gr[e]};hi.mul=function(e,n){return e===0||n===0?0:gr[ci[e]+ci[n]]}});var yu=J(xr=>{var Yo=wu();xr.mul=function(e,n){let r=new Uint8Array(e.length+n.length-1);for(let i=0;i<e.length;i++)for(let a=0;a<n.length;a++)r[i+a]^=Yo.mul(e[i],n[a]);return r};xr.mod=function(e,n){let r=new Uint8Array(e);for(;r.length-n.length>=0;){let i=r[0];for(let o=0;o<n.length;o++)r[o]^=Yo.mul(n[o],i);let a=0;for(;a<r.length&&r[a]===0;)a++;r=r.slice(a)}return r};xr.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let r=0;r<e;r++)n=xr.mul(n,new Uint8Array([1,Yo.exp(r)]));return n}});var vu=J((pv,bu)=>{var ku=yu();function Go(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Go.prototype.initialize=function(e){this.degree=e,this.genPoly=ku.generateECPolynomial(this.degree)};Go.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let n=new Uint8Array(e.length+this.degree);n.set(e);let r=ku.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){let a=new Uint8Array(this.degree);return a.set(r,i),a}return r};bu.exports=Go});var Ko=J(Cu=>{Cu.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var Jo=J(Lt=>{var Su="[0-9]+",_d="[A-Z $%*+\\-./:]+",wr="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";wr=wr.replace(/u/g,"\\u");var Ud="(?:(?![A-Z0-9 $%*+\\-./:]|"+wr+`)(?:.|[\r
]))+`;Lt.KANJI=new RegExp(wr,"g");Lt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Lt.BYTE=new RegExp(Ud,"g");Lt.NUMERIC=new RegExp(Su,"g");Lt.ALPHANUMERIC=new RegExp(_d,"g");var jd=new RegExp("^"+wr+"$"),qd=new RegExp("^"+Su+"$"),Hd=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Lt.testKanji=function(e){return jd.test(e)};Lt.testNumeric=function(e){return qd.test(e)};Lt.testAlphanumeric=function(e){return Hd.test(e)}});var $t=J(Se=>{var $d=Ko(),Xo=Jo();Se.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]};Se.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]};Se.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]};Se.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]};Se.MIXED={bit:-1};Se.getCharCountIndicator=function(e,n){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!$d.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?e.ccBits[0]:n<27?e.ccBits[1]:e.ccBits[2]};Se.getBestModeForData=function(e){return Xo.testNumeric(e)?Se.NUMERIC:Xo.testAlphanumeric(e)?Se.ALPHANUMERIC:Xo.testKanji(e)?Se.KANJI:Se.BYTE};Se.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};Se.isValid=function(e){return e&&e.bit&&e.ccBits};function Vd(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return Se.NUMERIC;case"alphanumeric":return Se.ALPHANUMERIC;case"kanji":return Se.KANJI;case"byte":return Se.BYTE;default:throw new Error("Unknown mode: "+t)}}Se.from=function(e,n){if(Se.isValid(e))return e;try{return Vd(e)}catch(r){return n}}});var zu=J(ln=>{var fi=qt(),Qd=Wo(),Tu=ai(),Vt=$t(),ea=Ko(),Iu=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,Au=fi.getBCHDigit(Iu);function Zd(t,e,n){for(let r=1;r<=40;r++)if(e<=ln.getCapacity(r,n,t))return r}function Mu(t,e){return Vt.getCharCountIndicator(t,e)+4}function Wd(t,e){let n=0;return t.forEach(function(r){let i=Mu(r.mode,e);n+=i+r.getBitsLength()}),n}function Yd(t,e){for(let n=1;n<=40;n++)if(Wd(t,n)<=ln.getCapacity(n,e,Vt.MIXED))return n}ln.from=function(e,n){return ea.isValid(e)?parseInt(e,10):n};ln.getCapacity=function(e,n,r){if(!ea.isValid(e))throw new Error("Invalid QR Code version");typeof r=="undefined"&&(r=Vt.BYTE);let i=fi.getSymbolTotalCodewords(e),a=Qd.getTotalCodewordsCount(e,n),o=(i-a)*8;if(r===Vt.MIXED)return o;let s=o-Mu(r,e);switch(r){case Vt.NUMERIC:return Math.floor(s/10*3);case Vt.ALPHANUMERIC:return Math.floor(s/11*2);case Vt.KANJI:return Math.floor(s/13);case Vt.BYTE:default:return Math.floor(s/8)}};ln.getBestVersionForData=function(e,n){let r,i=Tu.from(n,Tu.M);if(Array.isArray(e)){if(e.length>1)return Yd(e,i);if(e.length===0)return 1;r=e[0]}else r=e;return Zd(r.mode,r.getLength(),i)};ln.getEncodedBits=function(e){if(!ea.isValid(e)||e<7)throw new Error("Invalid QR Code version");let n=e<<12;for(;fi.getBCHDigit(n)-Au>=0;)n^=Iu<<fi.getBCHDigit(n)-Au;return e<<12|n}});var Du=J(Fu=>{var ta=qt(),Nu=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,Gd=1<<14|1<<12|1<<10|1<<4|1<<1,Eu=ta.getBCHDigit(Nu);Fu.getEncodedBits=function(e,n){let r=e.bit<<3|n,i=r<<10;for(;ta.getBCHDigit(i)-Eu>=0;)i^=Nu<<ta.getBCHDigit(i)-Eu;return(r<<10|i)^Gd}});var Ou=J((yv,Lu)=>{var Kd=$t();function On(t){this.mode=Kd.NUMERIC,this.data=t.toString()}On.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};On.prototype.getLength=function(){return this.data.length};On.prototype.getBitsLength=function(){return On.getBitsLength(this.data.length)};On.prototype.write=function(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),e.put(i,10);let a=this.data.length-n;a>0&&(r=this.data.substr(n),i=parseInt(r,10),e.put(i,a*3+1))};Lu.exports=On});var Bu=J((kv,Pu)=>{var Jd=$t(),na=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Pn(t){this.mode=Jd.ALPHANUMERIC,this.data=t}Pn.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Pn.prototype.getLength=function(){return this.data.length};Pn.prototype.getBitsLength=function(){return Pn.getBitsLength(this.data.length)};Pn.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=na.indexOf(this.data[n])*45;r+=na.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(na.indexOf(this.data[n]),6)};Pu.exports=Pn});var _u=J((bv,Ru)=>{var Xd=$t();function Bn(t){this.mode=Xd.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Bn.getBitsLength=function(e){return e*8};Bn.prototype.getLength=function(){return this.data.length};Bn.prototype.getBitsLength=function(){return Bn.getBitsLength(this.data.length)};Bn.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};Ru.exports=Bn});var ju=J((vv,Uu)=>{var eg=$t(),tg=qt();function Rn(t){this.mode=eg.KANJI,this.data=t}Rn.getBitsLength=function(e){return e*13};Rn.prototype.getLength=function(){return this.data.length};Rn.prototype.getBitsLength=function(){return Rn.getBitsLength(this.data.length)};Rn.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=tg.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};Uu.exports=Rn});var qu=J((Cv,ra)=>{"use strict";var yr={single_source_shortest_paths:function(t,e,n){var r={},i={};i[e]=0;var a=yr.PriorityQueue.make();a.push(e,0);for(var o,s,l,u,c,h,f,p,m;!a.empty();){o=a.pop(),s=o.value,u=o.cost,c=t[s]||{};for(l in c)c.hasOwnProperty(l)&&(h=c[l],f=u+h,p=i[l],m=typeof i[l]=="undefined",(m||p>f)&&(i[l]=f,a.push(l,f),r[l]=s))}if(typeof n!="undefined"&&typeof i[n]=="undefined"){var y=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(y)}return r},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],r=e,i;r;)n.push(r),i=t[r],r=t[r];return n.reverse(),n},find_path:function(t,e,n){var r=yr.single_source_shortest_paths(t,e,n);return yr.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(t){var e=yr.PriorityQueue,n={},r;t=t||{};for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.queue=[],n.sorter=t.sorter||e.default_sorter,n},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var n={value:t,cost:e};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof ra!="undefined"&&(ra.exports=yr)});var Gu=J(_n=>{var ne=$t(),Vu=Ou(),Qu=Bu(),Zu=_u(),Wu=ju(),kr=Jo(),pi=qt(),ng=qu();function Hu(t){return unescape(encodeURIComponent(t)).length}function br(t,e,n){let r=[],i;for(;(i=t.exec(n))!==null;)r.push({data:i[0],index:i.index,mode:e,length:i[0].length});return r}function Yu(t){let e=br(kr.NUMERIC,ne.NUMERIC,t),n=br(kr.ALPHANUMERIC,ne.ALPHANUMERIC,t),r,i;return pi.isKanjiModeEnabled()?(r=br(kr.BYTE,ne.BYTE,t),i=br(kr.KANJI,ne.KANJI,t)):(r=br(kr.BYTE_KANJI,ne.BYTE,t),i=[]),e.concat(n,r,i).sort(function(o,s){return o.index-s.index}).map(function(o){return{data:o.data,mode:o.mode,length:o.length}})}function ia(t,e){switch(e){case ne.NUMERIC:return Vu.getBitsLength(t);case ne.ALPHANUMERIC:return Qu.getBitsLength(t);case ne.KANJI:return Wu.getBitsLength(t);case ne.BYTE:return Zu.getBitsLength(t)}}function rg(t){return t.reduce(function(e,n){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===n.mode?(e[e.length-1].data+=n.data,e):(e.push(n),e)},[])}function ig(t){let e=[];for(let n=0;n<t.length;n++){let r=t[n];switch(r.mode){case ne.NUMERIC:e.push([r,{data:r.data,mode:ne.ALPHANUMERIC,length:r.length},{data:r.data,mode:ne.BYTE,length:r.length}]);break;case ne.ALPHANUMERIC:e.push([r,{data:r.data,mode:ne.BYTE,length:r.length}]);break;case ne.KANJI:e.push([r,{data:r.data,mode:ne.BYTE,length:Hu(r.data)}]);break;case ne.BYTE:e.push([{data:r.data,mode:ne.BYTE,length:Hu(r.data)}])}}return e}function og(t,e){let n={},r={start:{}},i=["start"];for(let a=0;a<t.length;a++){let o=t[a],s=[];for(let l=0;l<o.length;l++){let u=o[l],c=""+a+l;s.push(c),n[c]={node:u,lastCount:0},r[c]={};for(let h=0;h<i.length;h++){let f=i[h];n[f]&&n[f].node.mode===u.mode?(r[f][c]=ia(n[f].lastCount+u.length,u.mode)-ia(n[f].lastCount,u.mode),n[f].lastCount+=u.length):(n[f]&&(n[f].lastCount=u.length),r[f][c]=ia(u.length,u.mode)+4+ne.getCharCountIndicator(u.mode,e))}}i=s}for(let a=0;a<i.length;a++)r[i[a]].end=0;return{map:r,table:n}}function $u(t,e){let n,r=ne.getBestModeForData(t);if(n=ne.from(e,r),n!==ne.BYTE&&n.bit<r.bit)throw new Error('"'+t+'" cannot be encoded with mode '+ne.toString(n)+`.
 Suggested mode is: `+ne.toString(r));switch(n===ne.KANJI&&!pi.isKanjiModeEnabled()&&(n=ne.BYTE),n){case ne.NUMERIC:return new Vu(t);case ne.ALPHANUMERIC:return new Qu(t);case ne.KANJI:return new Wu(t);case ne.BYTE:return new Zu(t)}}_n.fromArray=function(e){return e.reduce(function(n,r){return typeof r=="string"?n.push($u(r,null)):r.data&&n.push($u(r.data,r.mode)),n},[])};_n.fromString=function(e,n){let r=Yu(e,pi.isKanjiModeEnabled()),i=ig(r),a=og(i,n),o=ng.find_path(a.map,"start","end"),s=[];for(let l=1;l<o.length-1;l++)s.push(a.table[o[l]].node);return _n.fromArray(rg(s))};_n.rawSplit=function(e){return _n.fromArray(Yu(e,pi.isKanjiModeEnabled()))}});var Ju=J(Ku=>{var di=qt(),oa=ai(),ag=cu(),sg=fu(),lg=pu(),ug=gu(),la=xu(),ua=Wo(),cg=vu(),mi=zu(),hg=Du(),fg=$t(),aa=Gu();function pg(t,e){let n=t.size,r=ug.getPositions(e);for(let i=0;i<r.length;i++){let a=r[i][0],o=r[i][1];for(let s=-1;s<=7;s++)if(!(a+s<=-1||n<=a+s))for(let l=-1;l<=7;l++)o+l<=-1||n<=o+l||(s>=0&&s<=6&&(l===0||l===6)||l>=0&&l<=6&&(s===0||s===6)||s>=2&&s<=4&&l>=2&&l<=4?t.set(a+s,o+l,!0,!0):t.set(a+s,o+l,!1,!0))}}function mg(t){let e=t.size;for(let n=8;n<e-8;n++){let r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function dg(t,e){let n=lg.getPositions(e);for(let r=0;r<n.length;r++){let i=n[r][0],a=n[r][1];for(let o=-2;o<=2;o++)for(let s=-2;s<=2;s++)o===-2||o===2||s===-2||s===2||o===0&&s===0?t.set(i+o,a+s,!0,!0):t.set(i+o,a+s,!1,!0)}}function gg(t,e){let n=t.size,r=mi.getEncodedBits(e),i,a,o;for(let s=0;s<18;s++)i=Math.floor(s/3),a=s%3+n-8-3,o=(r>>s&1)===1,t.set(i,a,o,!0),t.set(a,i,o,!0)}function sa(t,e,n){let r=t.size,i=hg.getEncodedBits(e,n),a,o;for(a=0;a<15;a++)o=(i>>a&1)===1,a<6?t.set(a,8,o,!0):a<8?t.set(a+1,8,o,!0):t.set(r-15+a,8,o,!0),a<8?t.set(8,r-a-1,o,!0):a<9?t.set(8,15-a-1+1,o,!0):t.set(8,15-a-1,o,!0);t.set(r-8,8,1,!0)}function xg(t,e){let n=t.size,r=-1,i=n-1,a=7,o=0;for(let s=n-1;s>0;s-=2)for(s===6&&s--;;){for(let l=0;l<2;l++)if(!t.isReserved(i,s-l)){let u=!1;o<e.length&&(u=(e[o]>>>a&1)===1),t.set(i,s-l,u),a--,a===-1&&(o++,a=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function wg(t,e,n){let r=new ag;n.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),fg.getCharCountIndicator(l.mode,t)),l.write(r)});let i=di.getSymbolTotalCodewords(t),a=ua.getTotalCodewordsCount(t,e),o=(i-a)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let s=(o-r.getLengthInBits())/8;for(let l=0;l<s;l++)r.put(l%2?17:236,8);return yg(r,t,e)}function yg(t,e,n){let r=di.getSymbolTotalCodewords(e),i=ua.getTotalCodewordsCount(e,n),a=r-i,o=ua.getBlocksCount(e,n),s=r%o,l=o-s,u=Math.floor(r/o),c=Math.floor(a/o),h=c+1,f=u-c,p=new cg(f),m=0,y=new Array(o),b=new Array(o),k=0,C=new Uint8Array(t.buffer);for(let I=0;I<o;I++){let D=I<l?c:h;y[I]=C.slice(m,m+D),b[I]=p.encode(y[I]),m+=D,k=Math.max(k,D)}let w=new Uint8Array(r),A=0,T,g;for(T=0;T<k;T++)for(g=0;g<o;g++)T<y[g].length&&(w[A++]=y[g][T]);for(T=0;T<f;T++)for(g=0;g<o;g++)w[A++]=b[g][T];return w}function kg(t,e,n,r){let i;if(Array.isArray(t))i=aa.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){let c=aa.rawSplit(t);u=mi.getBestVersionForData(c,n)}i=aa.fromString(t,u||40)}else throw new Error("Invalid data");let a=mi.getBestVersionForData(i,n);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=a;else if(e<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);let o=wg(e,n,i),s=di.getSymbolSize(e),l=new sg(s);return pg(l,e),mg(l),dg(l,e),sa(l,n,0),e>=7&&gg(l,e),xg(l,o),isNaN(r)&&(r=la.getBestMask(l,sa.bind(null,l,n))),la.applyMask(r,l),sa(l,n,r),{modules:l,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}Ku.create=function(e,n){if(typeof e=="undefined"||e==="")throw new Error("No input text");let r=oa.M,i,a;return typeof n!="undefined"&&(r=oa.from(n.errorCorrectionLevel,oa.M),i=mi.from(n.version),a=la.from(n.maskPattern),n.toSJISFunc&&di.setToSJISFunction(n.toSJISFunc)),kg(e,i,r,a)}});var ca=J(un=>{function Xu(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+t);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");let n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+e.slice(0,6).join("")}}un.getOptions=function(e){e||(e={}),e.color||(e.color={});let n=typeof e.margin=="undefined"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:r,scale:r?4:i,margin:n,color:{dark:Xu(e.color.dark||"#000000ff"),light:Xu(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};un.getScale=function(e,n){return n.width&&n.width>=e+n.margin*2?n.width/(e+n.margin*2):n.scale};un.getImageWidth=function(e,n){let r=un.getScale(e,n);return Math.floor((e+n.margin*2)*r)};un.qrToImageData=function(e,n,r){let i=n.modules.size,a=n.modules.data,o=un.getScale(i,r),s=Math.floor((i+r.margin*2)*o),l=r.margin*o,u=[r.color.light,r.color.dark];for(let c=0;c<s;c++)for(let h=0;h<s;h++){let f=(c*s+h)*4,p=r.color.light;if(c>=l&&h>=l&&c<s-l&&h<s-l){let m=Math.floor((c-l)/o),y=Math.floor((h-l)/o);p=u[a[m*i+y]?1:0]}e[f++]=p.r,e[f++]=p.g,e[f++]=p.b,e[f]=p.a}}});var ec=J(gi=>{var ha=ca();function bg(t,e,n){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}function vg(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}gi.render=function(e,n,r){let i=r,a=n;typeof i=="undefined"&&(!n||!n.getContext)&&(i=n,n=void 0),n||(a=vg()),i=ha.getOptions(i);let o=ha.getImageWidth(e.modules.size,i),s=a.getContext("2d"),l=s.createImageData(o,o);return ha.qrToImageData(l.data,e,i),bg(s,a,o),s.putImageData(l,0,0),a};gi.renderToDataURL=function(e,n,r){let i=r;typeof i=="undefined"&&(!n||!n.getContext)&&(i=n,n=void 0),i||(i={});let a=gi.render(e,n,i),o=i.type||"image/png",s=i.rendererOpts||{};return a.toDataURL(o,s.quality)}});var rc=J(nc=>{var Cg=ca();function tc(t,e){let n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function fa(t,e,n){let r=t+e;return typeof n!="undefined"&&(r+=" "+n),r}function Sg(t,e,n){let r="",i=0,a=!1,o=0;for(let s=0;s<t.length;s++){let l=Math.floor(s%e),u=Math.floor(s/e);!l&&!a&&(a=!0),t[s]?(o++,s>0&&l>0&&t[s-1]||(r+=a?fa("M",l+n,.5+u+n):fa("m",i,0),i=0,a=!1),l+1<e&&t[s+1]||(r+=fa("h",o),o=0)):i++}return r}nc.render=function(e,n,r){let i=Cg.getOptions(n),a=e.modules.size,o=e.modules.data,s=a+i.margin*2,l=i.color.light.a?"<path "+tc(i.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",u="<path "+tc(i.color.dark,"stroke")+' d="'+Sg(o,a,i.margin)+'"/>',c='viewBox="0 0 '+s+" "+s+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+c+' shape-rendering="crispEdges">'+l+u+`</svg>
`;return typeof r=="function"&&r(null,f),f}});var oc=J(vr=>{var Tg=su(),pa=Ju(),ic=ec(),Ag=rc();function ma(t,e,n,r,i){let a=[].slice.call(arguments,1),o=a.length,s=typeof a[o-1]=="function";if(!s&&!Tg())throw new Error("Callback required as last argument");if(s){if(o<2)throw new Error("Too few arguments provided");o===2?(i=n,n=e,e=r=void 0):o===3&&(e.getContext&&typeof i=="undefined"?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=r=void 0):o===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(l,u){try{let c=pa.create(n,r);l(t(c,e,r))}catch(c){u(c)}})}try{let l=pa.create(n,r);i(null,t(l,e,r))}catch(l){i(l)}}vr.create=pa.create;vr.toCanvas=ma.bind(null,ic.render);vr.toDataURL=ma.bind(null,ic.renderToDataURL);vr.toString=ma.bind(null,function(t,e,n){return Ag.render(t,n)})});var yc=J((Rv,wc)=>{"use strict";var bi=Object.prototype.hasOwnProperty,xc=Object.prototype.toString,hc=Object.defineProperty,fc=Object.getOwnPropertyDescriptor,pc=function(e){return typeof Array.isArray=="function"?Array.isArray(e):xc.call(e)==="[object Array]"},mc=function(e){if(!e||xc.call(e)!=="[object Object]")return!1;var n=bi.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&bi.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i=="undefined"||bi.call(e,i)},dc=function(e,n){hc&&n.name==="__proto__"?hc(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},gc=function(e,n){if(n==="__proto__")if(bi.call(e,n)){if(fc)return fc(e,n).value}else return;return e[n]};wc.exports=function t(){var e,n,r,i,a,o,s=arguments[0],l=1,u=arguments.length,c=!1;for(typeof s=="boolean"&&(c=s,s=arguments[1]||{},l=2),(s==null||typeof s!="object"&&typeof s!="function")&&(s={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)r=gc(s,n),i=gc(e,n),s!==i&&(c&&i&&(mc(i)||(a=pc(i)))?(a?(a=!1,o=r&&pc(r)?r:[]):o=r&&mc(r)?r:{},dc(s,{name:n,newValue:t(c,o,i)})):typeof i!="undefined"&&dc(s,{name:n,newValue:i}));return s}});var dp=J(Js=>{Js.read=function(t,e,n,r,i){var a,o,s=i*8-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=a*256+t[e+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=o*256+t[e+h],h+=f,c-=8);if(a===0)a=1-u;else{if(a===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,r),a=a-u}return(p?-1:1)*o*Math.pow(2,a-r)};Js.write=function(t,e,n,r,i,a){var o,s,l,u=a*8-i-1,c=(1<<u)-1,h=c>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,m=r?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=f/l:e+=f*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(e*l-1)*Math.pow(2,i),o=o+h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+p]=s&255,p+=m,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;t[n+p]=o&255,p+=m,o/=256,u-=8);t[n+p-m]|=y*128}});var Fp=J((PD,Np)=>{var tr=1e3,nr=tr*60,rr=nr*60,An=rr*24,qk=An*7,Hk=An*365.25;Np.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return $k(t);if(n==="number"&&isFinite(t))return e.long?Qk(t):Vk(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function $k(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*Hk;case"weeks":case"week":case"w":return n*qk;case"days":case"day":case"d":return n*An;case"hours":case"hour":case"hrs":case"hr":case"h":return n*rr;case"minutes":case"minute":case"mins":case"min":case"m":return n*nr;case"seconds":case"second":case"secs":case"sec":case"s":return n*tr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function Vk(t){var e=Math.abs(t);return e>=An?Math.round(t/An)+"d":e>=rr?Math.round(t/rr)+"h":e>=nr?Math.round(t/nr)+"m":e>=tr?Math.round(t/tr)+"s":t+"ms"}function Qk(t){var e=Math.abs(t);return e>=An?fo(t,e,An,"day"):e>=rr?fo(t,e,rr,"hour"):e>=nr?fo(t,e,nr,"minute"):e>=tr?fo(t,e,tr,"second"):t+" ms"}function fo(t,e,n,r){var i=e>=n*1.5;return Math.round(t/n)+" "+r+(i?"s":"")}});var Lp=J((BD,Dp)=>{function Zk(t){n.debug=n,n.default=n,n.coerce=l,n.disable=o,n.enable=i,n.enabled=s,n.humanize=Fp(),n.destroy=u,Object.keys(t).forEach(c=>{n[c]=t[c]}),n.names=[],n.skips=[],n.formatters={};function e(c){let h=0;for(let f=0;f<c.length;f++)h=(h<<5)-h+c.charCodeAt(f),h|=0;return n.colors[Math.abs(h)%n.colors.length]}n.selectColor=e;function n(c){let h,f=null,p,m;function y(...b){if(!y.enabled)return;let k=y,C=Number(new Date),w=C-(h||C);k.diff=w,k.prev=h,k.curr=C,h=C,b[0]=n.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let A=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(g,I)=>{if(g==="%%")return"%";A++;let D=n.formatters[I];if(typeof D=="function"){let L=b[A];g=D.call(k,L),b.splice(A,1),A--}return g}),n.formatArgs.call(k,b),(k.log||n.log).apply(k,b)}return y.namespace=c,y.useColors=n.useColors(),y.color=n.selectColor(c),y.extend=r,y.destroy=n.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==n.namespaces&&(p=n.namespaces,m=n.enabled(c)),m),set:b=>{f=b}}),typeof n.init=="function"&&n.init(y),y}function r(c,h){let f=n(this.namespace+(typeof h=="undefined"?":":h)+c);return f.log=this.log,f}function i(c){n.save(c),n.namespaces=c,n.names=[],n.skips=[];let h=(typeof c=="string"?c:"").trim().replace(" ",",").split(",").filter(Boolean);for(let f of h)f[0]==="-"?n.skips.push(f.slice(1)):n.names.push(f)}function a(c,h){let f=0,p=0,m=-1,y=0;for(;f<c.length;)if(p<h.length&&(h[p]===c[f]||h[p]==="*"))h[p]==="*"?(m=p,y=f,p++):(f++,p++);else if(m!==-1)p=m+1,y++,f=y;else return!1;for(;p<h.length&&h[p]==="*";)p++;return p===h.length}function o(){let c=[...n.names,...n.skips.map(h=>"-"+h)].join(",");return n.enable(""),c}function s(c){for(let h of n.skips)if(a(c,h))return!1;for(let h of n.names)if(a(c,h))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}Dp.exports=Zk});var Op=J((Je,po)=>{Je.formatArgs=Yk;Je.save=Gk;Je.load=Kk;Je.useColors=Wk;Je.storage=Jk();Je.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Je.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Wk(){if(typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Yk(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+po.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),t.splice(r,0,e)}Je.log=console.debug||console.log||(()=>{});function Gk(t){try{t?Je.storage.setItem("debug",t):Je.storage.removeItem("debug")}catch(e){}}function Kk(){let t;try{t=Je.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function Jk(){try{return localStorage}catch(t){}}po.exports=Lp()(Je);var{formatters:Xk}=po.exports;Xk.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Pb={};Ho(Pb,{default:()=>qo});module.exports=Ed(Pb);var Mt=require("obsidian");var Ln=require("obsidian");var pr="zhihu-data.json";async function H(t){let e=`${t.configDir}/${pr}`;try{if(await t.adapter.exists(e)){let r=await t.adapter.read(e);try{return JSON.parse(r)}catch(i){return console.error(`Error parsing ${pr}:`,i),{}}}else{let r={};return await t.adapter.write(e,JSON.stringify(r,null,2)),r}}catch(n){return console.error(`Error accessing ${pr}:`,n),{}}}async function mr(t,e){let n=`${t.configDir}/${pr}`;try{let r=JSON.stringify(e,null,2);await t.adapter.write(n,r)}catch(r){throw console.error("Failed to save data:",r),r}}async function Oe(t,e){let n=await H(t)||{},r=tu(n,e);await mr(t,r)}async function Vo(t,e){let n=await H(t)||{};e in n?(delete n[e],await mr(t,n)):console.warn(`Key "${e}" not found in ${pr}`)}function tu(t,e){if(typeof t!="object"||t===null||typeof e!="object"||e===null)return e;let n={...t};for(let r of Object.keys(e)){let i=t[r],a=e[r];typeof i=="object"&&i!==null&&typeof a=="object"&&a!==null&&!Array.isArray(a)?n[r]=tu(i,a):n[r]=a}return n}var nu={user_agent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 Safari/537.36",restrictToZhihuFM:!1,sendReadToZhihu:!0,recommendCount:7,useZhihuHeadings:!0,useImgNameDefault:!1,manualCookieEdit:!1,autoOpenZhihuLink:!0,mermaidScale:3};async function j(t){try{let e=await H(t),n=(e==null?void 0:e.settings)||{};return{...nu,...n}}catch(e){return console.error("Error loading settings:",e),{...nu}}}async function Dt(t,e){try{await Oe(t,{settings:e})}catch(n){throw console.error("Error saving settings:",n),n}}var ru={untitled:"Untitled",ui:{enterQuestionLink:"Please enter Zhihu question link",forExample:"Example:",scanLoginToZhihu:"Scan to login Zhihu",generateQRCodeFailed:"Failed to generate QRCode",scanSuccess:"Scan success! Please confirm on Zhihu app to login.",recommendations:"Recommendations",refreshRecommend:"Refresh recommendations",follows:"Follows",refreshFollows:"Refresh follows",hotlists:"Hot lists",refreshHotlists:"Refresh hot lists",nextPage:"Next page",previousPage:"Previous page",publishCurrentAnswer:"publish current answer",publishCurrentArticle:"publish current article",cancel:"Cancel"},notice:{notLogin:"You are logout, please login first.",loginSuccess:"Login success!",welcome:"Welcome! Zhihuer ",imageCacheCleared:"Image cache cleared!",questionLinkInvalid:"Please enter valid Zhihu question link\uFF01",noFrontmatter:"No frontmatter found",noZhihuTag:"No 'zhihu' tag found in frontmatter",noTopics:"No topics found in frontmatter",linkInvalid:"Invalid link!",coverUploadSuccess:"Upload cover success!",coverSyntaxInvalid:"Cover syntax invalid",publishArticleSuccess:"Publish article success!",publishArticleFailed:"Failed to publish article",updateArticleSuccess:"Update article success!",getArticleIdSuccess:"Get article ID success!",generateDraftFailed:"Failed to generate a draft",patchArticleSuccess:"Patch article success!",patchArticleFailed:"Failed to patch article",publishToAnswerSuccess:"Publish to answer success!",publishToAnswerFailed:"Failed to publish to answer",publishAnswerSuccess:"Publish answer success!",publishAnswerFailed:"Failed to publish answer",updateAnswerSuccess:"Update answer success!",getAnswerIdSuccess:"Get answer ID success!",patchAnswerSuccess:"Patch answer success!",patchAnswerFailed:"Failed to patch answer",imageUploadSuccess:"Upload image success!",imageUploadFailed:"Failed to upload image!",getImageIdSuccess:"Get image ID success!",getImageIdFailed:"Failed to get image ID",getImageStatusSuccess:"Get image stutus success!",getImageStatusFailed:"Failed to get image stutus",QRCodeRefreshed:"QRCode refreshed",loadComplete:"Load complete",zseckLoadFailed:"Login failed! Unable to load zse-ck script, please check your network connection and retry",zseckFetchFailed:"Login failed! Unable to fetch zse-ck cookie, please check your network connection and retry",fetchInitCookiesSuccess:"Fetch initial cookies success!",fetchInitCookiesFailed:"Failed to fetch initial cookies!",redirectionToSigninFailed:"Failed to redirect to sign in",fetchUDIDFailed:"Failed to fetch UDID cookie",requestSCprofilerFailed:"Failed to request sc-profiler",getLoginLinkSuccess:"Get login link success!",getLoginLinkFailed:"Failed to get login link",fetchCaptchaFailed:"Failed to fetch captcha_session_v2 cookie",scanStatus:"Scan status:",getScanStatusFailed:"Failed to get scan status",fetchQC1Failed:"Failed to fetch q_c1 cookie",requestProdTokenRefreshFailed:"Failed to request prod/token/refresh",getUserInfoFailed:"Failed to get user information",fetchFollowsFailed:"Failed to fetch Follows",fetchHotlistFailed:"Failed to fetch Hotlist",fetchRecommendFailed:"Failed to fetch Recommendations",fetchMembersFailed:"Failed to fetch Zhihu members",unableToFindAnswerContent:"Unable to find answer content",requestAnswerFailed:"Failed to request answer: ",touchToReadFailed:"Failed to read Zhihu content",fetchTopicSuccess:"Fetch topic success!",fetchTopicFailed:"Failed to fetch topic",giveTopicSuccess:"Give topic success!",giveTopicFailed:"Failed to give topic:",openZhihuSideFailed:"Failed to open Zhihu sides: unable to create a sidebar leaf."},error:{unknownError:"Unknown error",logoutFailed:"Failed to log out:",loginFailed:"Failed to log in:",saveUserAgentFailed:"Failed to save user agent:",saveRestrictAtFailed:"Failed to save restrictToZhihuFM setting:",clearImageCacheFailed:"Failed to clear image cache:",saveSendZhihuFailed:"Failed to save sendReadToZhihu setting:",autoCompleteTopicFailed:"Error auto-completing topic for tag:",createModifyFileFailed:"Error creating or modifying file:",recognizeFileTypeFailed:"Failed to recognize file type",processImageFailed:"Error processing image:",loadFollowsFailed:"Failed to load Follows",loadHotlistFailed:"Failed to load Hotlist",loadRecommendFailed:"Failed to load Recommendations",noActiveFileFound:"No active file found",noLeafAvailable:"No leaf available for Zhihu sides view",htmlToMdConvertionFailed:"HTML to Markdown conversion failed:",saveUseZhihuHeadingFailed:"Failed to save useZhihuHeading setting:",saveUseImgNameFailed:"Failed to save useImgNameDefault setting:",identifySVGFailed:"Failed to identify SVG original scale.",fetchContextFailed:"Failed to fetch Canvas 2D context.",generateBlobFailed:"Failed to generate Blob from Canvas",loadSVGFailed:"Failed to load SVG:",uploadMermaidImgFailed:"Failed to upload Mermaid image to Zhihu.",errorHandlingMermaid:"Error handling Mermaid diagram:"},settings:{accountTitle:"My account",accountTitleDesc:"Manage your Zhihu login status",loginButtonText:"Log in",logoutButtonText:"Log out",userAgent:"User agent",userAgentDesc:"Custom user agent for Zhihu API requests",userAgentPlaceholder:"Enter custom user agent",restrictAt:"Restrict @Zhihuers to Zhihu frontmatter notes",restrictAtDesc:"Enable @Zhihuers functionality only for notes with 'zhihu-' frontmatter. (Need to reload plugin once changed)",clearImageCache:"Clear image cache",clearImageCacheDesc:"With image cache, you can reduce access requency to the Zhihu API",clearImageCacheButtonText:"Clear",sendRead:"Send read to Zhihu",sendReadDesc:"Send read information to Zhihu when you click the slide view articles or answers",zhihuHeading:"Use Zhihu headings",zhihuHeadingDesc:"If this enabled, markdown heading level will be consistent with Zhihu, and leverl >= 3 will be stronged only.",useImgNameDefault:"Default image name as caption",useImgNameDefaultDesc:"If image caption is not provided, use image file name as default. Disable it then default caption is empty.",editCookies:"Enable editing cookies manually",editCookiesDesc:"You can edit cookies settings in zhihu-data.json",editorDesc:'Enter cookies here. Remember to add a comma after each cookie, and escape all backslashes with an extra \\. Lines starting with "//" will be treated as comments and ignored.',editorResetTooltip:"Reset to previous saved cookies",editorResetWarning:"Are you sure? This will delete any custom cookies you have written.",editorResetWarningButtonText:"Reset to default cookies",editorSyntaxSaved:"Saved automatically",editorSyntaxInvalid:"Invalid syntax. Changes not saved",editorRefreshTooltip:"Refresh login state",editorRefreshFailedNotice:"Refresh login state failed! Missing necessary cookies.",autoOpenZhihuLink:"Auto open Zhihu link",autoOpenZhihuLinkDesc:"If this enabled, Zhihu link will be opened in Obsidian automatically when you click it. (Plugin reload required)",mermaidScale:"Mermaid image clarity",mermaidScaleDesc:"Adjust the clarity of Mermaid images",UltraHD:"Ultra High Definition",HD:"High Definition",LR:"Low Resolution"}};var iu={ui:{enterQuestionLink:"\u8BF7\u8F93\u5165\u77E5\u4E4E\u95EE\u9898\u94FE\u63A5",forExample:"\u4F8B\u5982\uFF1A",scanLoginToZhihu:"\u626B\u7801\u767B\u5F55\u77E5\u4E4E",generateQRCodeFailed:"\u751F\u6210\u4E8C\u7EF4\u7801\u5931\u8D25",scanSuccess:"\u626B\u7801\u6210\u529F\uFF01\u8BF7\u5728\u77E5\u4E4E App \u4E2D\u786E\u8BA4\u767B\u5F55\u3002",recommendations:"\u63A8\u8350",refreshRecommend:"\u5237\u65B0\u63A8\u8350",follows:"\u5173\u6CE8",refreshFollows:"\u5237\u65B0\u5173\u6CE8",hotlists:"\u70ED\u699C",refreshHotlists:"\u5237\u65B0\u70ED\u699C",nextPage:"\u4E0B\u4E00\u9875",previousPage:"\u4E0A\u4E00\u9875",publishCurrentAnswer:"\u53D1\u5E03\u5F53\u524D\u56DE\u7B54",publishCurrentArticle:"\u53D1\u5E03\u5F53\u524D\u6587\u7AE0",cancel:"\u53D6\u6D88"},notice:{notLogin:"\u4F60\u5DF2\u767B\u51FA\uFF0C\u8BF7\u5148\u767B\u5F55\u3002",loginSuccess:"\u767B\u5F55\u6210\u529F\uFF01",welcome:"\u6B22\u8FCE\uFF01\u77E5\u4E4E\u7528\u6237 ",imageCacheCleared:"\u56FE\u7247\u7F13\u5B58\u5DF2\u6E05\u9664\uFF01",questionLinkInvalid:"\u8BF7\u8F93\u5165\u6709\u6548\u7684\u77E5\u4E4E\u95EE\u9898\u94FE\u63A5\uFF01",noFrontmatter:"\u672A\u627E\u5230 frontmatter",noZhihuTag:"frontmatter \u4E2D\u672A\u627E\u5230 'zhihu' \u6807\u7B7E",noTopics:"frontmatter \u4E2D\u672A\u627E\u5230\u8BDD\u9898",linkInvalid:"\u94FE\u63A5\u65E0\u6548\uFF01",coverUploadSuccess:"\u5C01\u9762\u4E0A\u4F20\u6210\u529F\uFF01",coverSyntaxInvalid:"\u5C01\u9762\u8BED\u6CD5\u65E0\u6548",publishArticleSuccess:"\u6587\u7AE0\u53D1\u5E03\u6210\u529F\uFF01",publishArticleFailed:"\u6587\u7AE0\u53D1\u5E03\u5931\u8D25",updateArticleSuccess:"\u6587\u7AE0\u66F4\u65B0\u6210\u529F\uFF01",getArticleIdSuccess:"\u83B7\u53D6\u6587\u7AE0 ID \u6210\u529F\uFF01",generateDraftFailed:"\u751F\u6210\u8349\u7A3F\u5931\u8D25",patchArticleSuccess:"\u6587\u7AE0\u8865\u4E01\u6210\u529F\uFF01",patchArticleFailed:"\u6587\u7AE0\u8865\u4E01\u5931\u8D25",publishToAnswerSuccess:"\u53D1\u5E03\u4E3A\u56DE\u7B54\u6210\u529F\uFF01",publishToAnswerFailed:"\u53D1\u5E03\u4E3A\u56DE\u7B54\u5931\u8D25",publishAnswerSuccess:"\u56DE\u7B54\u53D1\u5E03\u6210\u529F\uFF01",publishAnswerFailed:"\u56DE\u7B54\u53D1\u5E03\u5931\u8D25",updateAnswerSuccess:"\u56DE\u7B54\u66F4\u65B0\u6210\u529F\uFF01",getAnswerIdSuccess:"\u83B7\u53D6\u56DE\u7B54 ID \u6210\u529F\uFF01",patchAnswerSuccess:"\u56DE\u7B54\u8865\u4E01\u6210\u529F\uFF01",patchAnswerFailed:"\u56DE\u7B54\u8865\u4E01\u5931\u8D25",imageUploadSuccess:"\u56FE\u7247\u4E0A\u4F20\u6210\u529F\uFF01",imageUploadFailed:"\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF01",getImageIdSuccess:"\u83B7\u53D6\u56FE\u7247 ID \u6210\u529F\uFF01",getImageIdFailed:"\u83B7\u53D6\u56FE\u7247 ID \u5931\u8D25",getImageStatusSuccess:"\u83B7\u53D6\u56FE\u7247\u72B6\u6001\u6210\u529F\uFF01",getImageStatusFailed:"\u83B7\u53D6\u56FE\u7247\u72B6\u6001\u5931\u8D25",QRCodeRefreshed:"\u4E8C\u7EF4\u7801\u5DF2\u5237\u65B0",loadComplete:"\u52A0\u8F7D\u5B8C\u6210",zseckLoadFailed:"\u767B\u5F55\u5931\u8D25\uFF01\u65E0\u6CD5\u52A0\u8F7D zse-ck \u811A\u672C\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5\u5E76\u91CD\u8BD5",zseckFetchFailed:"\u767B\u5F55\u5931\u8D25\uFF01\u65E0\u6CD5\u83B7\u53D6 zse-ck cookie\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5\u5E76\u91CD\u8BD5",fetchInitCookiesSuccess:"\u83B7\u53D6\u521D\u59CB cookies \u6210\u529F\uFF01",fetchInitCookiesFailed:"\u83B7\u53D6\u521D\u59CB cookies \u5931\u8D25\uFF01",redirectionToSigninFailed:"\u91CD\u5B9A\u5411\u5230\u767B\u5F55\u9875\u5931\u8D25",fetchUDIDFailed:"\u83B7\u53D6 UDID cookie \u5931\u8D25",requestSCprofilerFailed:"\u8BF7\u6C42 sc-profiler \u5931\u8D25",getLoginLinkSuccess:"\u83B7\u53D6\u767B\u5F55\u94FE\u63A5\u6210\u529F\uFF01",getLoginLinkFailed:"\u83B7\u53D6\u767B\u5F55\u94FE\u63A5\u5931\u8D25",fetchCaptchaFailed:"\u83B7\u53D6 captcha_session_v2 cookie \u5931\u8D25",scanStatus:"\u626B\u7801\u72B6\u6001\uFF1A",getScanStatusFailed:"\u83B7\u53D6\u626B\u7801\u72B6\u6001\u5931\u8D25",fetchQC1Failed:"\u83B7\u53D6 q_c1 cookie \u5931\u8D25",requestProdTokenRefreshFailed:"\u8BF7\u6C42 prod/token/refresh \u5931\u8D25",getUserInfoFailed:"\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25",fetchFollowsFailed:"\u83B7\u53D6\u5173\u6CE8\u5185\u5BB9\u5931\u8D25",fetchHotlistFailed:"\u83B7\u53D6\u70ED\u699C\u5931\u8D25",fetchRecommendFailed:"\u83B7\u53D6\u63A8\u8350\u5185\u5BB9\u5931\u8D25",fetchMembersFailed:"\u83B7\u53D6\u77E5\u4E4E\u6210\u5458\u5931\u8D25",unableToFindAnswerContent:"\u672A\u80FD\u627E\u5230\u56DE\u7B54\u5185\u5BB9",requestAnswerFailed:"\u8BF7\u6C42\u56DE\u7B54\u5931\u8D25\uFF1A",touchToReadFailed:"\u8BFB\u53D6\u77E5\u4E4E\u5185\u5BB9\u5931\u8D25",fetchTopicSuccess:"\u83B7\u53D6\u8BDD\u9898\u6210\u529F\uFF01",fetchTopicFailed:"\u83B7\u53D6\u8BDD\u9898\u5931\u8D25",giveTopicSuccess:"\u6DFB\u52A0\u8BDD\u9898\u6210\u529F\uFF01",giveTopicFailed:"\u6DFB\u52A0\u8BDD\u9898\u5931\u8D25\uFF1A",openZhihuSideFailed:"\u6253\u5F00\u77E5\u4E4E\u4FA7\u8FB9\u680F\u5931\u8D25\uFF1A\u65E0\u6CD5\u521B\u5EFA\u4FA7\u8FB9\u9762\u677F\u3002",identifySVGFailed:"\u8BC6\u522B SVG \u539F\u59CB\u7F29\u653E\u6BD4\u4F8B\u5931\u8D25\u3002",fetchContextFailed:"\u83B7\u53D6 Canvas 2D \u4E0A\u4E0B\u6587\u5931\u8D25\u3002",generateBlobFailed:"\u4ECE Canvas \u751F\u6210 Blob \u5931\u8D25\u3002",loadSVGFailed:"\u52A0\u8F7D SVG \u5931\u8D25\uFF1A",uploadMermaidImgFailed:"\u4E0A\u4F20 Mermaid \u56FE\u50CF\u5230\u77E5\u4E4E\u5931\u8D25\u3002",errorHandlingMermaid:"\u5904\u7406 Mermaid \u56FE\u65F6\u51FA\u9519\uFF1A"},error:{unknownError:"\u672A\u77E5\u9519\u8BEF",logoutFailed:"\u767B\u51FA\u5931\u8D25\uFF1A",loginFailed:"\u767B\u5F55\u5931\u8D25\uFF1A",saveUserAgentFailed:"\u4FDD\u5B58 User-Agent \u5931\u8D25\uFF1A",saveRestrictAtFailed:"\u4FDD\u5B58 restrictToZhihuFM \u8BBE\u7F6E\u5931\u8D25\uFF1A",clearImageCacheFailed:"\u6E05\u9664\u56FE\u7247\u7F13\u5B58\u5931\u8D25\uFF1A",saveSendZhihuFailed:"\u4FDD\u5B58 sendReadToZhihu \u8BBE\u7F6E\u5931\u8D25\uFF1A",autoCompleteTopicFailed:"\u4E3A\u6807\u7B7E\u81EA\u52A8\u8865\u5168\u8BDD\u9898\u5931\u8D25\uFF1A",createModifyFileFailed:"\u521B\u5EFA\u6216\u4FEE\u6539\u6587\u4EF6\u65F6\u51FA\u9519\uFF1A",recognizeFileTypeFailed:"\u65E0\u6CD5\u8BC6\u522B\u6587\u4EF6\u7C7B\u578B",processImageFailed:"\u5904\u7406\u56FE\u7247\u65F6\u51FA\u9519\uFF1A",loadFollowsFailed:"\u52A0\u8F7D\u5173\u6CE8\u5185\u5BB9\u5931\u8D25",loadHotlistFailed:"\u52A0\u8F7D\u70ED\u699C\u5931\u8D25",loadRecommendFailed:"\u52A0\u8F7D\u63A8\u8350\u5185\u5BB9\u5931\u8D25",noActiveFileFound:"\u672A\u627E\u5230\u6FC0\u6D3B\u7684\u6587\u4EF6",noLeafAvailable:"\u6CA1\u6709\u53EF\u7528\u7684\u9762\u677F\u7528\u4E8E\u663E\u793A\u77E5\u4E4E\u5185\u5BB9",htmlToMdConvertionFailed:"HTML \u8F6C Markdown \u5931\u8D25\uFF1A",saveUseZhihuHeadingFailed:"\u4FDD\u5B58 useZhihuHeading \u8BBE\u7F6E\u5931\u8D25\uFF1A",saveUseImgNameFailed:"Failed to save useImgNameDefault setting:"},settings:{accountTitle:"\u6211\u7684\u8D26\u6237",accountTitleDesc:"\u7BA1\u7406\u60A8\u7684\u77E5\u4E4E\u767B\u5F55\u72B6\u6001",loginButtonText:"\u767B\u5F55",logoutButtonText:"\u767B\u51FA",userAgent:"\u7528\u6237\u4EE3\u7406",userAgentDesc:"\u5728\u77E5\u4E4EAPI\u8BF7\u6C42\u4E2D\u81EA\u5B9A\u4E49\u7528\u6237\u4EE3\u7406",userAgentPlaceholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u7528\u6237\u4EE3\u7406",restrictAt:"\u9650\u5236@\u77E5\u4E4E\u7528\u6237\u53EA\u5728\u5E26\u6709\u77E5\u4E4E\u5C5E\u6027\u7684\u7B14\u8BB0\u4E2D\u89E6\u53D1",restrictAtDesc:"\u53EA\u6709\u5C5E\u6027\u4E2D\u6709 zhihu- \u7684\u7B14\u8BB0\u624D\u89E6\u53D1@\u77E5\u4E4E\u7528\u6237\u529F\u80FD (\u9700\u8981\u91CD\u542F\u63D2\u4EF6)",clearImageCache:"\u6E05\u7406\u56FE\u7247\u7F13\u5B58",clearImageCacheDesc:"\u6709\u4E86\u56FE\u7247\u7F13\u5B58\uFF0C\u60A8\u53EF\u4EE5\u51CF\u5C11\u8BF7\u6C42\u77E5\u4E4EAPI\u7684\u6B21\u6570",clearImageCacheButtonText:"\u6E05\u7406",sendRead:"\u5411\u77E5\u4E4E\u53D1\u9001\u5DF2\u8BFB",sendReadDesc:"\u5728\u60A8\u70B9\u51FB\u5DE6\u4FA7\u680F\u7684\u6587\u7AE0\u6216\u56DE\u7B54\u540E\uFF0C\u5411\u77E5\u4E4E\u53D1\u9001\u5DF2\u8BFB\u8BF7\u6C42",zhihuHeading:"\u4F7F\u7528\u77E5\u4E4E\u7279\u8272\u7684\u6807\u9898",zhihuHeadingDesc:"\u5982\u679C\u542F\u7528\uFF0C\u90A3\u4E48markdown\u7684\u6807\u9898\u5C42\u6B21\u4F1A\u4E0E\u77E5\u4E4E\u4E00\u81F4\uFF0C\u4E14\u4E09\u7EA7\u4EE5\u4E0A\u6807\u9898\u4EC5\u88AB\u52A0\u7C97",useImgNameDefault:"\u9ED8\u8BA4\u56FE\u7247\u5907\u6CE8\u4E3A\u56FE\u7247\u540D\u79F0",useImgNameDefaultDesc:"\u5982\u679C\u6CA1\u6709\u56FE\u7247\u5907\u6CE8\uFF0C\u90A3\u4E48\u9ED8\u8BA4\u56FE\u7247\u5907\u6CE8\u5C31\u662F\u56FE\u7247\u6587\u4EF6\u540D\u3002\u5173\u95ED\u6B64\u9879\u540E\u9ED8\u8BA4\u56FE\u7247\u5907\u6CE8\u4E3A\u7A7A\u3002",editCookies:"\u624B\u52A8\u7F16\u8F91 Cookies",editCookiesDesc:"\u4F60\u53EF\u4EE5\u7F16\u8F91\u50A8\u5B58\u5728 zhihu-data.json \u6587\u4EF6\u4E2D\u7684 Cookies",editorDesc:'\u5728\u6B64\u8F93\u5165 Cookies\u3002\u8BB0\u5F97\u5728\u6BCF\u4E2A Cookie \u540E\u52A0\u4E0A\u9017\u53F7\uFF0C\u5E76\u4F7F\u7528\u4E24\u4E2A\u53CD\u659C\u6760\uFF08\\\\\uFF09\u8F6C\u4E49\u6240\u6709\u7684\u53CD\u659C\u6760\u3002\u4EE5 "//" \u5F00\u5934\u7684\u884C\u5C06\u88AB\u89C6\u4E3A\u6CE8\u91CA\u5E76\u88AB\u5FFD\u7565\u3002',editorResetTooltip:"\u91CD\u7F6E\u4E3A\u4E4B\u524D\u4FDD\u5B58\u7684 Cookies",editorResetWarning:"\u4F60\u786E\u5B9A\u5417\uFF1F\u8FD9\u5C06\u5220\u9664\u4F60\u6240\u5199\u7684\u6240\u6709\u81EA\u5B9A\u4E49 Cookies\u3002",editorResetWarningButtonText:"\u91CD\u7F6E\u4E3A\u9ED8\u8BA4 Cookies",editorSyntaxSaved:"\u5DF2\u81EA\u52A8\u4FDD\u5B58",editorSyntaxInvalid:"\u8BED\u6CD5\u9519\u8BEF\uFF0C\u672A\u4FDD\u5B58\u66F4\u6539",editorRefreshTooltip:"\u5237\u65B0\u767B\u5F55\u72B6\u6001",editorRefreshFailedNotice:"\u5237\u65B0\u767B\u5F55\u72B6\u6001\u5931\u8D25\uFF01\u7F3A\u5C11\u5FC5\u8981\u7684 Cookies",autoOpenZhihuLink:"\u81EA\u52A8\u6253\u5F00\u77E5\u4E4E\u94FE\u63A5",autoOpenZhihuLinkDesc:"\u5982\u679C\u542F\u7528\uFF0C\u90A3\u4E48\u70B9\u51FB\u77E5\u4E4E\u94FE\u63A5\u65F6\uFF0C\u94FE\u63A5\u5C06\u5728 Obsidian \u4E2D\u81EA\u52A8\u6253\u5F00\u3002(\u9700\u8981\u91CD\u542F\u63D2\u4EF6)",mermaidScale:"Mermaid \u56FE\u50CF\u6E05\u6670\u5EA6",mermaidScaleDesc:"\u8C03\u6574 Mermaid \u56FE\u50CF\u7684\u6E05\u6670\u5EA6",UltraHD:"\u8D85\u6E05",HD:"\u9AD8\u6E05",LR:"\u4F4E\u6E05"}};var ou={ui:{enterQuestionLink:"\u8ACB\u8F38\u5165\u77E5\u4E4E\u554F\u984C\u9023\u7D50",forExample:"\u4F8B\u5982\uFF1A",scanLoginToZhihu:"\u6383\u78BC\u767B\u5165\u77E5\u4E4E",generateQRCodeFailed:"\u751F\u6210\u4E8C\u7DAD\u78BC\u5931\u6557",scanSuccess:"\u6383\u78BC\u6210\u529F\uFF01\u8ACB\u5728\u77E5\u4E4E App \u4E2D\u78BA\u8A8D\u767B\u5165\u3002",recommendations:"\u63A8\u85A6",refreshRecommend:"\u5237\u65B0\u63A8\u85A6",follows:"\u95DC\u6CE8",refreshFollows:"\u5237\u65B0\u95DC\u6CE8",hotlists:"\u71B1\u699C",refreshHotlists:"\u5237\u65B0\u71B1\u699C",nextPage:"\u4E0B\u4E00\u9801",previousPage:"\u4E0A\u4E00\u9801",publishCurrentAnswer:"\u53D1\u5E03\u5F53\u524D\u56DE\u7B54",publishCurrentArticle:"\u53D1\u5E03\u5F53\u524D\u6587\u7AE0",cancel:"\u53D6\u6D88"},notice:{notLogin:"\u4F60\u5DF2\u767B\u51FA\uFF0C\u8ACB\u5148\u767B\u5165\u3002",loginSuccess:"\u767B\u5165\u6210\u529F\uFF01",welcome:"\u6B61\u8FCE\uFF01\u77E5\u4E4E\u7528\u6236 ",imageCacheCleared:"\u5716\u7247\u5FEB\u53D6\u5DF2\u6E05\u9664\uFF01",questionLinkInvalid:"\u8ACB\u8F38\u5165\u6709\u6548\u7684\u77E5\u4E4E\u554F\u984C\u9023\u7D50\uFF01",noFrontmatter:"\u672A\u627E\u5230 frontmatter",noZhihuTag:"frontmatter \u4E2D\u672A\u627E\u5230 'zhihu' \u6A19\u7C64",noTopics:"frontmatter \u4E2D\u672A\u627E\u5230\u8A71\u984C",linkInvalid:"\u9023\u7D50\u7121\u6548\uFF01",coverUploadSuccess:"\u5C01\u9762\u4E0A\u50B3\u6210\u529F\uFF01",coverSyntaxInvalid:"\u5C01\u9762\u8A9E\u6CD5\u7121\u6548",publishArticleSuccess:"\u6587\u7AE0\u767C\u4F48\u6210\u529F\uFF01",publishArticleFailed:"\u6587\u7AE0\u767C\u4F48\u5931\u6557",updateArticleSuccess:"\u6587\u7AE0\u66F4\u65B0\u6210\u529F\uFF01",getArticleIdSuccess:"\u53D6\u5F97\u6587\u7AE0 ID \u6210\u529F\uFF01",generateDraftFailed:"\u751F\u6210\u8349\u7A3F\u5931\u6557",patchArticleSuccess:"\u6587\u7AE0\u4FEE\u88DC\u6210\u529F\uFF01",patchArticleFailed:"\u6587\u7AE0\u4FEE\u88DC\u5931\u6557",publishToAnswerSuccess:"\u767C\u4F48\u70BA\u56DE\u7B54\u6210\u529F\uFF01",publishToAnswerFailed:"\u767C\u4F48\u70BA\u56DE\u7B54\u5931\u6557",publishAnswerSuccess:"\u56DE\u7B54\u767C\u4F48\u6210\u529F\uFF01",publishAnswerFailed:"\u56DE\u7B54\u767C\u4F48\u5931\u6557",updateAnswerSuccess:"\u56DE\u7B54\u66F4\u65B0\u6210\u529F\uFF01",getAnswerIdSuccess:"\u53D6\u5F97\u56DE\u7B54 ID \u6210\u529F\uFF01",patchAnswerSuccess:"\u56DE\u7B54\u4FEE\u88DC\u6210\u529F\uFF01",patchAnswerFailed:"\u56DE\u7B54\u4FEE\u88DC\u5931\u6557",imageUploadSuccess:"\u5716\u7247\u4E0A\u50B3\u6210\u529F\uFF01",imageUploadFailed:"\u5716\u7247\u4E0A\u50B3\u5931\u6557\uFF01",getImageIdSuccess:"\u53D6\u5F97\u5716\u7247 ID \u6210\u529F\uFF01",getImageIdFailed:"\u53D6\u5F97\u5716\u7247 ID \u5931\u6557",getImageStatusSuccess:"\u53D6\u5F97\u5716\u7247\u72C0\u614B\u6210\u529F\uFF01",getImageStatusFailed:"\u53D6\u5F97\u5716\u7247\u72C0\u614B\u5931\u6557",QRCodeRefreshed:"\u4E8C\u7DAD\u78BC\u5DF2\u91CD\u65B0\u6574\u7406",loadComplete:"\u8F09\u5165\u5B8C\u6210",zseckLoadFailed:"\u767B\u5165\u5931\u6557\uFF01\u7121\u6CD5\u8F09\u5165 zse-ck \u8173\u672C\uFF0C\u8ACB\u6AA2\u67E5\u7DB2\u8DEF\u9023\u7DDA\u4E26\u91CD\u8A66",zseckFetchFailed:"\u767B\u5165\u5931\u6557\uFF01\u7121\u6CD5\u53D6\u5F97 zse-ck cookie\uFF0C\u8ACB\u6AA2\u67E5\u7DB2\u8DEF\u9023\u7DDA\u4E26\u91CD\u8A66",fetchInitCookiesSuccess:"\u53D6\u5F97\u521D\u59CB cookies \u6210\u529F\uFF01",fetchInitCookiesFailed:"\u53D6\u5F97\u521D\u59CB cookies \u5931\u6557\uFF01",redirectionToSigninFailed:"\u91CD\u65B0\u5C0E\u5411\u81F3\u767B\u5165\u9801\u5931\u6557",fetchUDIDFailed:"\u53D6\u5F97 UDID cookie \u5931\u6557",requestSCprofilerFailed:"\u8ACB\u6C42 sc-profiler \u5931\u6557",getLoginLinkSuccess:"\u53D6\u5F97\u767B\u5165\u9023\u7D50\u6210\u529F\uFF01",getLoginLinkFailed:"\u53D6\u5F97\u767B\u5165\u9023\u7D50\u5931\u6557",fetchCaptchaFailed:"\u53D6\u5F97 captcha_session_v2 cookie \u5931\u6557",scanStatus:"\u6383\u78BC\u72C0\u614B\uFF1A",getScanStatusFailed:"\u53D6\u5F97\u6383\u78BC\u72C0\u614B\u5931\u6557",fetchQC1Failed:"\u53D6\u5F97 q_c1 cookie \u5931\u6557",requestProdTokenRefreshFailed:"\u8ACB\u6C42 prod/token/refresh \u5931\u6557",getUserInfoFailed:"\u53D6\u5F97\u7528\u6236\u8CC7\u8A0A\u5931\u6557",fetchFollowsFailed:"\u53D6\u5F97\u95DC\u6CE8\u5167\u5BB9\u5931\u6557",fetchHotlistFailed:"\u53D6\u5F97\u71B1\u699C\u5931\u6557",fetchRecommendFailed:"\u53D6\u5F97\u63A8\u85A6\u5167\u5BB9\u5931\u6557",fetchMembersFailed:"\u53D6\u5F97\u77E5\u4E4E\u6210\u54E1\u5931\u6557",unableToFindAnswerContent:"\u672A\u80FD\u627E\u5230\u56DE\u7B54\u5167\u5BB9",requestAnswerFailed:"\u8ACB\u6C42\u56DE\u7B54\u5931\u6557\uFF1A",touchToReadFailed:"\u8B80\u53D6\u77E5\u4E4E\u5167\u5BB9\u5931\u6557",fetchTopicSuccess:"\u53D6\u5F97\u8A71\u984C\u6210\u529F\uFF01",fetchTopicFailed:"\u53D6\u5F97\u8A71\u984C\u5931\u6557",giveTopicSuccess:"\u65B0\u589E\u8A71\u984C\u6210\u529F\uFF01",giveTopicFailed:"\u65B0\u589E\u8A71\u984C\u5931\u6557\uFF1A",openZhihuSideFailed:"\u958B\u555F\u77E5\u4E4E\u5074\u908A\u6B04\u5931\u6557\uFF1A\u7121\u6CD5\u5EFA\u7ACB\u5074\u908A\u9762\u677F\u3002"},error:{unknownError:"\u672A\u77E5\u932F\u8AA4",logoutFailed:"\u767B\u51FA\u5931\u6557\uFF1A",loginFailed:"\u767B\u5165\u5931\u6557\uFF1A",saveUserAgentFailed:"\u5132\u5B58 User-Agent \u5931\u6557\uFF1A",saveRestrictAtFailed:"\u5132\u5B58 restrictToZhihuFM \u8A2D\u5B9A\u5931\u6557\uFF1A",clearImageCacheFailed:"\u6E05\u9664\u5716\u7247\u5FEB\u53D6\u5931\u6557\uFF1A",saveSendZhihuFailed:"\u5132\u5B58 sendReadToZhihu \u8A2D\u5B9A\u5931\u6557\uFF1A",autoCompleteTopicFailed:"\u70BA\u6A19\u7C64\u81EA\u52D5\u88DC\u5168\u8A71\u984C\u5931\u6557\uFF1A",createModifyFileFailed:"\u5EFA\u7ACB\u6216\u4FEE\u6539\u6A94\u6848\u6642\u767C\u751F\u932F\u8AA4\uFF1A",recognizeFileTypeFailed:"\u7121\u6CD5\u8FA8\u8B58\u6A94\u6848\u985E\u578B",processImageFailed:"\u8655\u7406\u5716\u7247\u6642\u767C\u751F\u932F\u8AA4\uFF1A",loadFollowsFailed:"\u8F09\u5165\u95DC\u6CE8\u5167\u5BB9\u5931\u6557",loadHotlistFailed:"\u8F09\u5165\u71B1\u699C\u5931\u6557",loadRecommendFailed:"\u8F09\u5165\u63A8\u85A6\u5167\u5BB9\u5931\u6557",noActiveFileFound:"\u672A\u627E\u5230\u555F\u7528\u4E2D\u7684\u6A94\u6848",noLeafAvailable:"\u6C92\u6709\u53EF\u7528\u7684\u9762\u677F\u7528\u4F86\u986F\u793A\u77E5\u4E4E\u5167\u5BB9",htmlToMdConvertionFailed:"HTML \u8F49\u63DB\u70BA Markdown \u5931\u6557\uFF1A",saveUseZhihuHeadingFailed:"\u5132\u5B58 useZhihuHeading \u8A2D\u5B9A\u5931\u6557\uFF1A",saveUseImgNameFailed:"Failed to save useImgNameDefault setting:",identifySVGFailed:"\u8B58\u5225 SVG \u539F\u59CB\u7E2E\u653E\u6BD4\u4F8B\u5931\u6557\u3002",fetchContextFailed:"\u7372\u53D6 Canvas 2D \u4E0A\u4E0B\u6587\u5931\u6557\u3002",generateBlobFailed:"\u5F9E Canvas \u751F\u6210 Blob \u5931\u6557\u3002",loadSVGFailed:"\u52A0\u8F09 SVG \u5931\u6557\uFF1A",uploadMermaidImgFailed:"\u4E0A\u50B3 Mermaid \u5716\u50CF\u5230\u77E5\u4E4E\u5931\u6557\u3002",errorHandlingMermaid:"\u8655\u7406 Mermaid \u5716\u6642\u51FA\u932F\uFF1A"},settings:{accountTitle:"\u6211\u7684\u5E33\u6236",accountTitleDesc:"\u7BA1\u7406\u60A8\u7684\u77E5\u4E4E\u767B\u5165\u72C0\u614B",loginButtonText:"\u767B\u5165",logoutButtonText:"\u767B\u51FA",userAgent:"\u4F7F\u7528\u8005\u4EE3\u7406",userAgentDesc:"\u5728\u77E5\u4E4E API \u8ACB\u6C42\u4E2D\u81EA\u8A02\u4F7F\u7528\u8005\u4EE3\u7406",userAgentPlaceholder:"\u8ACB\u8F38\u5165\u81EA\u8A02\u4F7F\u7528\u8005\u4EE3\u7406",restrictAt:"\u9650\u5236@\u77E5\u4E4E\u7528\u6236\u50C5\u5728\u5E26\u6709\u77E5\u4E4E\u5C5E\u6027\u7684\u7B14\u8BB0\u4E2D\u89F8\u767C",restrictAtDesc:"\u53EA\u6709\u5C6C\u6027\u4E2D\u6709 zhihu- \u7684\u7B46\u8A18\u4E2D\u624D\u6703\u89F8\u767C @\u77E5\u4E4E\u7528\u6236 \u529F\u80FD\uFF08\u9700\u8981\u91CD\u65B0\u555F\u52D5\u5916\u639B\uFF09",clearImageCache:"\u6E05\u9664\u5716\u7247\u5FEB\u53D6",clearImageCacheDesc:"\u6709\u4E86\u5716\u7247\u5FEB\u53D6\uFF0C\u60A8\u53EF\u4EE5\u6E1B\u5C11\u5C0D\u77E5\u4E4E API \u7684\u8ACB\u6C42\u6B21\u6578",clearImageCacheButtonText:"\u6E05\u9664",sendRead:"\u5411\u77E5\u4E4E\u767C\u9001\u5DF2\u8B80",sendReadDesc:"\u5728\u60A8\u9EDE\u64CA\u5DE6\u5074\u6B04\u7684\u6587\u7AE0\u6216\u56DE\u7B54\u5F8C\uFF0C\u5411\u77E5\u4E4E\u767C\u9001\u5DF2\u8B80\u8ACB\u6C42",zhihuHeading:"\u4F7F\u7528\u77E5\u4E4E\u7279\u8272\u7684\u6A19\u984C",zhihuHeadingDesc:"\u5982\u679C\u555F\u7528\uFF0C\u90A3\u9EBC markdown \u7684\u6A19\u984C\u5C64\u6B21\u6703\u8207\u77E5\u4E4E\u4E00\u81F4\uFF0C\u4E14\u4E09\u7D1A\u4EE5\u4E0A\u6A19\u984C\u50C5\u88AB\u52A0\u7C97",useImgNameDefault:"\u9810\u8A2D\u5716\u7247\u5099\u8A3B\u70BA\u5716\u7247\u540D\u7A31",useImgNameDefaultDesc:"\u5982\u679C\u6C92\u6709\u5716\u7247\u5099\u8A3B\uFF0C\u5247\u9810\u8A2D\u5716\u7247\u5099\u8A3B\u70BA\u5716\u7247\u6A94\u6848\u540D\u7A31\u3002\u95DC\u9589\u6B64\u9805\u5F8C\uFF0C\u9810\u8A2D\u5716\u7247\u5099\u8A3B\u5C07\u70BA\u7A7A\u3002",editCookies:"\u624B\u52D5\u7DE8\u8F2F Cookies",editCookiesDesc:"\u4F60\u53EF\u4EE5\u7DE8\u8F2F\u5132\u5B58\u5728 zhihu-data.json \u6A94\u6848\u4E2D\u7684 Cookies",editorDesc:'\u5728\u6B64\u8F38\u5165 Cookies\u3002\u8A18\u5F97\u5728\u6BCF\u500B Cookie \u5F8C\u52A0\u4E0A\u9017\u865F\uFF0C\u4E26\u4F7F\u7528\u5169\u500B\u53CD\u659C\u7DDA\uFF08\\\\\uFF09\u8F49\u7FA9\u6240\u6709\u7684\u53CD\u659C\u7DDA\u3002\u4EE5 "//" \u958B\u982D\u7684\u884C\u5C07\u88AB\u8996\u70BA\u8A3B\u89E3\u4E26\u88AB\u5FFD\u7565\u3002',editorResetTooltip:"\u91CD\u8A2D\u70BA\u5148\u524D\u5132\u5B58\u7684 Cookies",editorResetWarning:"\u4F60\u78BA\u5B9A\u55CE\uFF1F\u9019\u5C07\u522A\u9664\u4F60\u6240\u5BEB\u7684\u6240\u6709\u81EA\u8A02 Cookies\u3002",editorResetWarningButtonText:"\u91CD\u8A2D\u70BA\u9810\u8A2D Cookies",editorSyntaxSaved:"\u5DF2\u81EA\u52D5\u5132\u5B58",editorSyntaxInvalid:"\u8A9E\u6CD5\u932F\u8AA4\uFF0C\u672A\u5132\u5B58\u8B8A\u66F4",editorRefreshTooltip:"\u5237\u65B0\u767B\u5F55\u72B6\u6001",editorRefreshFailedNotice:"\u5237\u65B0\u767B\u5F55\u72B6\u6001\u5931\u8D25\uFF01\u7F3A\u5C11\u5FC5\u8981\u7684 Cookies",autoOpenZhihuLink:"\u81EA\u52A8\u6253\u5F00\u77E5\u4E4E\u94FE\u63A5",autoOpenZhihuLinkDesc:"\u5982\u679C\u542F\u7528\uFF0C\u90A3\u4E48\u70B9\u51FB\u77E5\u4E4E\u94FE\u63A5\u65F6\uFF0C\u94FE\u63A5\u5C06\u5728 Obsidian \u4E2D\u81EA\u52A8\u6253\u5F00\u3002(\u9700\u8981\u91CD\u542F\u63D2\u4EF6)",mermaidScale:"Mermaid \u5716\u50CF\u6E05\u6670\u5EA6",mermaidScaleDesc:"\u8ABF\u6574 Mermaid \u5716\u50CF\u7684\u6E05\u6670\u5EA6",UltraHD:"\u8D85\u6E05",HD:"\u9AD8\u6E05",LR:"\u4F4E\u6E05"}};var Nd={en:"en",zh:"zh","zh-TW":"zhTW"},Q={i18n:{en:ru,zh:iu,zhTW:ou},get current(){var n,r;let t=(n=window.localStorage.getItem("language"))!=null?n:"en",e=(r=Nd[t])!=null?r:"en";return this.i18n[e]}};var Fd=Q.current;async function Dd(t,e){try{let n=await j(t);return(await(0,Ln.requestUrl)({url:`https://www.zhihu.com/people/autocomplete?token=${encodeURI(e)}&max_matches=10&use_similar=0`,headers:{"User-Agent":n.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2"},method:"GET"})).json[0].slice(1).map(a=>({type:a[0],name:a[1],id:a[2],avatarUrl:a[3],hash:a[4],description:a[5],numbers:a[6],empty:a[7]}))}catch(n){return new Ln.Notice(`${Fd.notice.fetchMembersFailed}`),[]}}var oi=class extends Ln.EditorSuggest{constructor(e){super(e)}onTrigger(e,n,r){if(r){let s=this.app.metadataCache.getFileCache(r),l=(s==null?void 0:s.frontmatter)||[];if(!Object.keys(l).some(c=>c.startsWith("zhihu-")))return null}let a=n.getLine(e.line).slice(0,e.ch),o=a.match(/@(\S+?)$/);return o?{start:{line:e.line,ch:a.length-o[0].length},end:e,query:o[1]||""}:null}async getSuggestions(e){let n=e.query;return(await Dd(this.app.vault,n)).map(i=>({displayText:i.name,replacementText:`[@${i.name}](https://www.zhihu.com/people/${i.id} "member_mention_${i.hash}")`,avatarUrl:i.avatarUrl}))}renderSuggestion(e,n){n.addClass("mention-suggestion");let r=n.createDiv({cls:"suggestion-content"});if(e.avatarUrl){let i=r.createEl("img",{cls:"suggestion-avatar"});i.src=e.avatarUrl}r.createSpan({text:e.displayText})}selectSuggestion(e,n){if(!this.context)return;let{editor:r,start:i,end:a}=this.context;r&&r.replaceRange(e.replacementText,i,a)}};var K=require("obsidian"),ac=Ft(oc());function cn(t){let e=[],n=t.headers["set-cookie"];Array.isArray(n)?e=n:typeof n=="string"&&(e=[n]);let r={};return e.forEach(i=>{let[a]=i.split(";"),o=a.indexOf("=");if(o!==-1){let s=a.substring(0,o).trim(),l=a.substring(o+1).trim();r[s]=l}}),r}function X(t,e){return e.length===0?Object.entries(t.cookies).map(([n,r])=>`${n}=${r}`).join("; "):Object.entries(t.cookies).filter(([n])=>e.includes(n)).map(([n,r])=>`${n}=${r}`).join("; ")}var me=Q.current,da=class extends K.Modal{constructor(n,r){super(n);this.canvas=null;this.onCloseCallback=null;this.link=r}async onOpen(){this.modalEl.style.width="320px",this.modalEl.style.height="360px";let{contentEl:n}=this;n.createEl("div",{cls:"qrcode-title"}).createEl("span",{text:me.ui.scanLoginToZhihu}),n.classList.add("zhihu-qrcode-modal"),this.canvas=n.createEl("canvas"),await this.renderQRCode(this.link)}async renderQRCode(n){if(this.canvas)try{await ac.default.toCanvas(this.canvas,n,{width:256,margin:2,color:{dark:"#3274ee",light:"#00000000"}})}catch(r){let{contentEl:i}=this;i.createEl("p",{text:me.ui.generateQRCodeFailed+r})}}async updateQRCode(n){this.link=n,await this.renderQRCode(n)}showSuccess(){let{contentEl:n}=this;n.empty(),n.createEl("div",{text:"\u2705"+me.ui.scanSuccess})}onClose(){let{contentEl:n}=this;n.empty(),this.onCloseCallback&&this.onCloseCallback()}setOnCloseCallback(n){this.onCloseCallback=n}};async function sc(t){let e=t.vault;await Ig(e),await Mg(e),await zg(e),await Eg(e);let n=await Ng(e);await Fg(e);let r=new da(t,n.link);r.open();let i=n.token,a=setInterval(async()=>{let o=await Dg(e,i),s=o==null?void 0:o.json;if("status"in s){if(s.status===1)r.showSuccess();else if(s.status===5&&s.new_token){let l=s.new_token.Token,u=Pg(l);r.updateQRCode(u),i=l,new K.Notice(`${me.notice.QRCodeRefreshed}`)}}else{let l=cn(o);await Oe(e,{cookies:l}),await Oe(e,{bearer:s}),await Lg(e),await Og(e),await wi(e),r.close(),clearInterval(a)}},2e3);r.setOnCloseCallback(()=>{clearInterval(a)})}async function xi(t){let e=t.vault,n=window.require("@electron/remote"),{BrowserWindow:r,session:i}=n;await i.defaultSession.clearStorageData(),await i.defaultSession.clearCache();let a=await i.defaultSession.cookies.get({url:"https://www.zhihu.com"});await Promise.all(a.map(c=>i.defaultSession.cookies.remove("https://www.zhihu.com",c.name)));let o=!1;i.defaultSession.webRequest.onCompleted({urls:["https://static.zhihu.com/zse-ck/v4/*"]},()=>{o=!0}),i.defaultSession.webRequest.onBeforeSendHeaders({urls:["https://*.zhihu.com/*"]},(c,h)=>{let f=c.requestHeaders;f.Referer=f.Referer||"https://www.zhihu.com/",f["Upgrade-Insecure-Requests"]="1",f["Accept-Language"]="zh-CN,zh;q=0.9",h({cancel:!1,requestHeaders:f})});let s=new r({width:800,height:600,webPreferences:{nodeIntegration:!1,contextIsolation:!0}});s.webContents.setUserAgent("Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36");let l="https://www.zhihu.com/signin",u="https://www.zhihu.com/question/19550225";await s.loadURL(l),s.webContents.on("did-finish-load",async()=>{let c=s.webContents.getURL();if(new K.Notice(`${me.notice.loadComplete+c}`),c==="https://www.zhihu.com/"){await s.loadURL(u);return}if(c.startsWith(u)){if(!o){new K.Notice(`${me.notice.zseckLoadFailed}`);return}let h=await i.defaultSession.cookies.get({url:"https://www.zhihu.com"});if(!h.find(m=>m.name==="__zse_ck")){new K.Notice(`${me.notice.zseckFetchFailed}`);return}new K.Notice(`${me.notice.loginSuccess}`);let p={};h.forEach(m=>{p[m.name]=m.value}),await Oe(e,{cookies:p}),await wi(e),s.close()}}),s.on("closed",()=>{i.defaultSession.webRequest.onCompleted(null),i.defaultSession.webRequest.onBeforeSendHeaders(null)})}async function Pe(t){let e=await H(t);return e&&"userInfo"in e&&e.userInfo?(new K.Notice(`${me.notice.welcome},${e.userInfo.name}`),!0):!1}async function Ig(t){try{let e=await j(t),n=await(0,K.requestUrl)({url:"https://www.zhihu.com",headers:{"User-Agent":e.user_agent,Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",DNT:"1","Sec-GPC":"1","Upgrade-Insecure-Requests":"1","Sec-Fetch-Dest":"document","Sec-Fetch-Mode":"navigate","Sec-Fetch-Site":"none","Sec-Fetch-User":"?1",Priority:"u=0, i"},method:"GET"}),r=cn(n);new K.Notice(`${me.notice.fetchInitCookiesSuccess}`),await Oe(t,{cookies:r})}catch(e){new K.Notice(`${me.notice.fetchInitCookiesFailed},${e}`)}}async function Mg(t){try{let e=await H(t),n=await j(t),r=X(e,["_zap","_xsrf","BEC"]);await(0,K.requestUrl)({url:"https://www.zhihu.com/signin?next=%2F",headers:{"User-Agent":n.user_agent,Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",DNT:"1","Sec-GPC":"1","Upgrade-Insecure-Requests":"1","Sec-Fetch-Dest":"document","Sec-Fetch-Mode":"navigate","Sec-Fetch-Site":"none","Sec-Fetch-User":"?1",Priority:"u=0, i",Cookie:r},method:"GET"})}catch(e){new K.Notice(`${me.notice.redirectionToSigninFailed}`)}}async function zg(t){try{let e=await H(t),n=await j(t),r=X(e,["_zap","_xsrf","BEC"]),i=e.cookies._xsrf,a=await(0,K.requestUrl)({url:"https://www.zhihu.com/udid",headers:{"User-Agent":n.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",Referer:"https://www.zhihu.com/signin?next=%2F","x-xsrftoken":i,"x-zse-93":"101_3_3.0",Origin:"https://www.zhihu.com",DNT:"1","Sec-GPC":"1","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Priority:"u=4",Cookie:r},method:"POST"}),o=cn(a);await Oe(t,{cookies:o})}catch(e){new K.Notice(`${me.notice.fetchUDIDFailed},${e}`)}}async function Eg(t){try{let e=await H(t),n=await j(t),r=X(e,["_zap","_xsrf","BEC"]);await(0,K.requestUrl)({url:"https://www.zhihu.com/sc-profiler",headers:{"User-Agent":n.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Content-Type":"application/json","Accept-Language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",Referer:"https://www.zhihu.com/signin?next=%2F",Origin:"https://www.zhihu.com",DNT:"1","Sec-GPC":"1","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Cookie:r},body:JSON.stringify([["i","production.heifetz.desktop.v1.za_helper.init.count",1,1]]),method:"POST"})}catch(e){new K.Notice(`${me.notice.requestSCprofilerFailed},${e}`)}}async function Ng(t){try{let e=await H(t),n=await j(t),r=X(e,["_zap","_xsrf","BEC","d_c0"]),i=await(0,K.requestUrl)({url:"https://www.zhihu.com/api/v3/account/api/login/qrcode",headers:{"User-Agent":n.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",Referer:"https://www.zhihu.com/signin?next=%2F",Origin:"https://www.zhihu.com",DNT:"1","Sec-GPC":"1","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-origin",Priority:"u=4",Cookie:r},method:"POST"});return new K.Notice(`${me.notice.getLoginLinkSuccess}`),await Oe(t,{login:i.json}),i.json}catch(e){new K.Notice(`${me.notice.getLoginLinkFailed},${e}`)}}async function Fg(t){try{let e=await H(t),n=await j(t),r=X(e,["_zap","_xsrf","BEC","d_c0"]),i=await(0,K.requestUrl)({url:"https://www.zhihu.com/api/v3/oauth/captcha/v2?type=captcha_sign_in",headers:{"User-Agent":n.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",Referer:"https://www.zhihu.com/signin?next=%2F","x-requested-with":"fetch",DNT:"1","Sec-GPC":"1","Sec-Fetch-Dest":"empty","Sec-Fetch-Site":"same-origin",Priority:"u=4",Cookie:r},method:"GET"}),a=cn(i);await Oe(t,{cookies:a})}catch(e){new K.Notice(`${me.notice.fetchCaptchaFailed},${e}`)}}async function Dg(t,e){try{let n=await H(t),r=await j(t),i=X(n,["_zap","_xsrf","BEC","d_c0","captcha_session_v2"]),a=`https://www.zhihu.com/api/v3/account/api/login/qrcode/${e}/scan_info`,o=await(0,K.requestUrl)({url:a,headers:{"User-Agent":r.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",Referer:"https://www.zhihu.com/signin?next=%2F",DNT:"1","Sec-GPC":"1","Sec-Fetch-Dest":"empty","Sec-Fetch-Site":"same-origin",Priority:"u=4",Cookie:i},method:"GET"});return new K.Notice(`${me.notice.scanStatus},${o.json.status}`),o}catch(n){new K.Notice(`${me.notice.getScanStatusFailed}`)}}async function Lg(t){try{let e=await H(t),n=await j(t),r=X(e,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0"]),i=await(0,K.requestUrl)({url:"https://www.zhihu.com",headers:{"User-Agent":n.user_agent,Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Encoding":"gzip, deflate, br, zstd","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",referer:"https://www.zhihu.com/signin?next=%2F",dnt:"1","sec-gpc":"1","upgrade-insecure-requests":"1","sec-fetch-dest":"document","sec-fetch-mode":"navigate","sec-fetch-site":"same-origin",priority:"u=0, i",Cookie:r},method:"GET"}),a=cn(i);return await Oe(t,{cookies:a}),i}catch(e){new K.Notice(`${me.notice.fetchQC1Failed},${e}`)}}async function Og(t){try{let e=await H(t),n=await j(t),r=X(e,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0","q_c1"]);await(0,K.requestUrl)({url:"https://www.zhihu.com/api/account/prod/token/refresh",headers:{"User-Agent":n.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",referer:"https://www.zhihu.com/","x-requested-with":"fetch",origin:"https://www.zhihu.com",dnt:"1","sec-gpc":"1","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin",priority:"u=4",Cookie:r},method:"POST"})}catch(e){new K.Notice(`${me.notice.requestProdTokenRefreshFailed},${e}`)}}async function wi(t){try{let e=await H(t),n=await j(t),r=X(e,["_zap","_xsrf","BEC","d_c0","z_c0","q_c1"]),i=await(0,K.requestUrl)({url:"https://www.zhihu.com/api/v4/me?include=is_realname",headers:{"User-Agent":n.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",referer:"https://www.zhihu.com/","x-requested-with":"fetch","x-zse-93":"101_3_3.0",Cookie:r},method:"GET"}),a=cn(i),o=i.json;new K.Notice(`${me.notice.welcome},${o.name}`),await Oe(t,{cookies:a}),await Oe(t,{userInfo:o})}catch(e){new K.Notice(`${me.notice.getUserInfoFailed},${e}`)}}function Pg(t){return`https://www.zhihu.com/account/scan/login/${t}?/api/login/qrcode`}var pe=require("obsidian");var Qt=require("obsidian");var yi=Q.current;async function lc(t,e,n){try{let r=await H(t),i=await j(t),a=X(r,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0"]),o=await(0,Qt.requestUrl)({url:encodeURI(`https://zhuanlan.zhihu.com/api/autocomplete/topics?token=${n}&max_matches=5&use_similar=0&topic_filter=1`),headers:{"User-Agent":i.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",referer:`https://zhuanlan.zhihu.com/p/${e}/edit`,"x-requested-with":"fetch",Cookie:a},method:"GET"});return new Qt.Notice(`${yi.notice.fetchTopicSuccess}`),o.json}catch(r){new Qt.Notice(`${yi.notice.fetchTopicFailed},${r}`)}}async function uc(t,e,n){try{let r=await H(t),i=await j(t),a=X(r,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0"]),o=r.cookies._xsrf;await(0,Qt.requestUrl)({url:`https://zhuanlan.zhihu.com/api/articles/${e}/topics`,headers:{"User-Agent":i.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Content-Type":"application/json","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",referer:`https://zhuanlan.zhihu.com/p/${e}/edit`,"x-requested-with":"fetch","x-xsrftoken":o,origin:"https://zhuanlan.zhihu.com",Cookie:a},method:"POST",body:JSON.stringify(n)}),new Qt.Notice(`${yi.notice.giveTopicSuccess}`)}catch(r){new Qt.Notice(`${yi.notice.giveTopicFailed}`)}}function ki(t){return t.replace(/^---\n[\s\S]*?\n---\n*/,"")}function xa(t){if(t)throw t}var Ci=Ft(yc(),1);function Cr(t){if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function wa(){let t=[],e={run:n,use:r};return e;function n(...i){let a=-1,o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);s(null,...i);function s(l,...u){let c=t[++a],h=-1;if(l){o(l);return}for(;++h<i.length;)(u[h]===null||u[h]===void 0)&&(u[h]=i[h]);i=u,c?kc(c,s)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function kc(t,e){let n;return r;function r(...o){let s=t.length>o.length,l;s&&o.push(i);try{l=t.apply(this,o)}catch(u){let c=u;if(s&&n)throw c;return i(c)}s||(l&&l.then&&typeof l.then=="function"?l.then(a,i):l instanceof Error?i(l):a(l))}function i(o,...s){n||(n=!0,e(o,...s))}function a(o){i(null,o)}}function Zt(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?bc(t.position):"start"in t||"end"in t?bc(t):"line"in t||"column"in t?ya(t):""}function ya(t){return vc(t&&t.line)+":"+vc(t&&t.column)}function bc(t){return ya(t&&t.start)+"-"+ya(t&&t.end)}function vc(t){return t&&typeof t=="number"?t:1}var ze=class extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?i=e:!a.cause&&e&&(o=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){let l=r.indexOf(":");l===-1?a.ruleId=r:(a.source=r.slice(0,l),a.ruleId=r.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){let l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}let s=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=s?s.line:void 0,this.name=Zt(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}};ze.prototype.file="";ze.prototype.name="";ze.prototype.reason="";ze.prototype.message="";ze.prototype.stack="";ze.prototype.column=void 0;ze.prototype.line=void 0;ze.prototype.ancestors=void 0;ze.prototype.cause=void 0;ze.prototype.fatal=void 0;ze.prototype.place=void 0;ze.prototype.ruleId=void 0;ze.prototype.source=void 0;var ut={basename:Rg,dirname:_g,extname:Ug,join:jg,sep:"/"};function Rg(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Sr(t);let n=0,r=-1,i=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,s=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(a){n=i+1;break}}else o<0&&(a=!0,o=i+1),s>-1&&(t.codePointAt(i)===e.codePointAt(s--)?s<0&&(r=i):(s=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function _g(t){if(Sr(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Ug(t){Sr(t);let e=t.length,n=-1,r=0,i=-1,a=0,o;for(;e--;){let s=t.codePointAt(e);if(s===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),s===46?i<0?i=e:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function jg(...t){let e=-1,n;for(;++e<t.length;)Sr(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":qg(n)}function qg(t){Sr(t);let e=t.codePointAt(0)===47,n=Hg(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Hg(t,e){let n="",r=0,i=-1,a=0,o=-1,s,l;for(;++o<=t.length;){if(o<t.length)s=t.codePointAt(o);else{if(s===47)break;s=47}if(s===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,a=0;continue}}else if(n.length>0){n="",r=0,i=o,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,a=0}else s===46&&a>-1?a++:a=-1}return n}function Sr(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}var Cc={cwd:$g};function $g(){return"/"}function Un(t){return Boolean(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Sc(t){if(typeof t=="string")t=new URL(t);else if(!Un(t)){let e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){let e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Vg(t)}function Vg(t){if(t.hostname!==""){let r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}let e=t.pathname,n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){let r=e.codePointAt(n+2);if(r===70||r===102){let i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}var ka=["history","path","basename","stem","extname","dirname"],Tr=class{constructor(e){let n;e?Un(e)?n={path:e}:typeof e=="string"||Qg(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Cc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ka.length;){let a=ka[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)ka.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?ut.basename(this.path):void 0}set basename(e){va(e,"basename"),ba(e,"basename"),this.path=ut.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ut.dirname(this.path):void 0}set dirname(e){Tc(this.basename,"dirname"),this.path=ut.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ut.extname(this.path):void 0}set extname(e){if(ba(e,"extname"),Tc(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ut.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Un(e)&&(e=Sc(e)),va(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ut.basename(this.path,this.extname):void 0}set stem(e){va(e,"stem"),ba(e,"stem"),this.path=ut.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){let i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){let i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){let i=new ze(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}};function ba(t,e){if(t&&t.includes(ut.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ut.sep+"`")}function va(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Tc(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Qg(t){return Boolean(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}var Ac=function(t){let r=this.constructor.prototype,i=r[t],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a};var Zg={}.hasOwnProperty,Ar=class extends Ac{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=wa()}copy(){let e=new Ar,n=-1;for(;++n<this.attachers.length;){let r=this.attachers[n];e.use(...r)}return e.data((0,Ci.default)(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Ta("data",this.frozen),this.namespace[e]=n,this):Zg.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Ta("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;let e=this;for(;++this.freezeIndex<this.attachers.length;){let[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);let i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();let n=vi(e),r=this.parser||this.Parser;return Ca("parse",r),r(String(n),n)}process(e,n){let r=this;return this.freeze(),Ca("process",this.parser||this.Parser),Sa("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,o){let s=vi(e),l=r.parse(s);r.run(l,s,function(c,h,f){if(c||!h||!f)return u(c);let p=h,m=r.stringify(p,f);Yg(m)?f.value=m:f.result=m,u(c,f)});function u(c,h){c||!h?o(c):a?a(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),Ca("processSync",this.parser||this.Parser),Sa("processSync",this.compiler||this.Compiler),this.process(e,i),Mc("processSync","process",n),r;function i(a,o){n=!0,xa(a),r=o}}run(e,n,r){Ic(e),this.freeze();let i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,s){let l=vi(n);i.run(e,l,u);function u(c,h,f){let p=h||e;c?s(c):o?o(p):r(void 0,p,f)}}}runSync(e,n){let r=!1,i;return this.run(e,n,a),Mc("runSync","run",r),i;function a(o,s){xa(o),i=s,r=!0}}stringify(e,n){this.freeze();let r=vi(n),i=this.compiler||this.Compiler;return Sa("stringify",i),Ic(e),i(e,r)}use(e,...n){let r=this.attachers,i=this.namespace;if(Ta("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?s(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){let[c,...h]=u;l(c,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(u.plugins),u.settings&&(i.settings=(0,Ci.default)(!0,i.settings,u.settings))}function s(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){let h=u[c];a(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===u){f=h;break}if(f===-1)r.push([u,...c]);else if(c.length>0){let[p,...m]=c,y=r[f][1];Cr(y)&&Cr(p)&&(p=(0,Ci.default)(!0,y,p)),r[f]=[u,p,...m]}}}},Aa=new Ar().freeze();function Ca(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Sa(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Ta(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ic(t){if(!Cr(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Mc(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function vi(t){return Wg(t)?t:new Tr(t)}function Wg(t){return Boolean(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Yg(t){return typeof t=="string"||Gg(t)}function Gg(t){return Boolean(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}var Kg={};function hn(t,e){let n=e||Kg,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Ec(t,r,i)}function Ec(t,e,n){if(Jg(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return zc(t.children,e,n)}return Array.isArray(t)?zc(t,e,n):""}function zc(t,e,n){let r=[],i=-1;for(;++i<t.length;)r[i]=Ec(t[i],e,n);return r.join("")}function Jg(t){return Boolean(t&&typeof t=="object")}var Nc=document.createElement("i");function jn(t){let e="&"+t+";";Nc.innerHTML=e;let n=Nc.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function ye(t,e,n,r){let i=t.length,a=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(e,0),t.splice(...o),a+=1e4,e+=1e4}function Ue(t,e){return t.length>0?(ye(t,t.length,0,e),t):e}var Fc={}.hasOwnProperty;function Si(t){let e={},n=-1;for(;++n<t.length;)Xg(e,t[n]);return e}function Xg(t,e){let n;for(n in e){let i=(Fc.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n],o;if(a)for(o in a){Fc.call(i,o)||(i[o]=[]);let s=a[o];ex(i[o],Array.isArray(s)?s:s?[s]:[])}}}function ex(t,e){let n=-1,r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);ye(t,0,0,r)}function Ti(t,e){let n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"\uFFFD":String.fromCodePoint(n)}function Be(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}var Ie=Wt(/[A-Za-z]/),xe=Wt(/[\dA-Za-z]/),Dc=Wt(/[#-'*+\--9=?A-Z^-~]/);function fn(t){return t!==null&&(t<32||t===127)}var Ir=Wt(/\d/),Lc=Wt(/[\dA-Fa-f]/),Oc=Wt(/[!-/:-@[-`{-~]/);function E(t){return t!==null&&t<-2}function W(t){return t!==null&&(t<0||t===32)}function _(t){return t===-2||t===-1||t===32}var pn=Wt(/\p{P}|\p{S}/u),wt=Wt(/\s/);function Wt(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function rt(t){let e=[],n=-1,r=0,i=0;for(;++n<t.length;){let a=t.charCodeAt(n),o="";if(a===37&&xe(t.charCodeAt(n+1))&&xe(t.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){let s=t.charCodeAt(n+1);a<56320&&s>56319&&s<57344?(o=String.fromCharCode(a,s),i=1):o="\uFFFD"}else o=String.fromCharCode(a);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function R(t,e,n,r){let i=r?r-1:Number.POSITIVE_INFINITY,a=0;return o;function o(l){return _(l)?(t.enter(n),s(l)):e(l)}function s(l){return _(l)&&a++<i?(t.consume(l),s):(t.exit(n),e(l))}}var Pc={tokenize:tx};function tx(t){let e=t.attempt(this.parser.constructs.contentInitial,r,i),n;return e;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),R(t,e,"linePrefix")}function i(s){return t.enter("paragraph"),a(s)}function a(s){let l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(s)}function o(s){if(s===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(s);return}return E(s)?(t.consume(s),t.exit("chunkText"),a):(t.consume(s),o)}}var Rc={tokenize:nx},Bc={tokenize:rx};function nx(t){let e=this,n=[],r=0,i,a,o;return s;function s(w){if(r<n.length){let A=n[r];return e.containerState=A[1],t.attempt(A[0].continuation,l,u)(w)}return u(w)}function l(w){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&C();let A=e.events.length,T=A,g;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){g=e.events[T][1].end;break}k(r);let I=A;for(;I<e.events.length;)e.events[I][1].end={...g},I++;return ye(e.events,T+1,0,e.events.slice(A)),e.events.length=I,u(w)}return s(w)}function u(w){if(r===n.length){if(!i)return f(w);if(i.currentConstruct&&i.currentConstruct.concrete)return m(w);e.interrupt=Boolean(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Bc,c,h)(w)}function c(w){return i&&C(),k(r),f(w)}function h(w){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,m(w)}function f(w){return e.containerState={},t.attempt(Bc,p,m)(w)}function p(w){return r++,n.push([e.currentConstruct,e.containerState]),f(w)}function m(w){if(w===null){i&&C(),k(0),t.consume(w);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),y(w)}function y(w){if(w===null){b(t.exit("chunkFlow"),!0),k(0),t.consume(w);return}return E(w)?(t.consume(w),b(t.exit("chunkFlow")),r=0,e.interrupt=void 0,s):(t.consume(w),y)}function b(w,A){let T=e.sliceStream(w);if(A&&T.push(null),w.previous=a,a&&(a.next=w),a=w,i.defineSkip(w.start),i.write(T),e.parser.lazy[w.start.line]){let g=i.events.length;for(;g--;)if(i.events[g][1].start.offset<o&&(!i.events[g][1].end||i.events[g][1].end.offset>o))return;let I=e.events.length,D=I,L,v;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){if(L){v=e.events[D][1].end;break}L=!0}for(k(r),g=I;g<e.events.length;)e.events[g][1].end={...v},g++;ye(e.events,D+1,0,e.events.slice(I)),e.events.length=g}}function k(w){let A=n.length;for(;A-- >w;){let T=n[A];e.containerState=T[1],T[0].exit.call(e,t)}n.length=w}function C(){i.write([null]),a=void 0,i=void 0,e.containerState._closeFlow=void 0}}function rx(t,e,n){return R(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ot(t){if(t===null||W(t)||wt(t))return 1;if(pn(t))return 2}function Yt(t,e,n){let r=[],i=-1;for(;++i<t.length;){let a=t[i].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}var Mr={name:"attention",resolveAll:ix,tokenize:ox};function ix(t,e){let n=-1,r,i,a,o,s,l,u,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;let h={...t[r][1].end},f={...t[n][1].start};_c(h,-l),_c(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},a={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...s.end}},t[r][1].end={...o.start},t[n][1].start={...s.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=Ue(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=Ue(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",a,e]]),u=Ue(u,Yt(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=Ue(u,[["exit",a,e],["enter",s,e],["exit",s,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,u=Ue(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,ye(t,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function ox(t,e){let n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Ot(r),a;return o;function o(l){return a=l,t.enter("attentionSequence"),s(l)}function s(l){if(l===a)return t.consume(l),s;let u=t.exit("attentionSequence"),c=Ot(l),h=!c||c===2&&i||n.includes(l),f=!i||i===2&&c||n.includes(r);return u._open=Boolean(a===42?h:h&&(i||!f)),u._close=Boolean(a===42?f:f&&(c||!h)),e(l)}}function _c(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}var Ia={name:"autolink",tokenize:ax};function ax(t,e,n){let r=0;return i;function i(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(p){return Ie(p)?(t.consume(p),o):p===64?n(p):u(p)}function o(p){return p===43||p===45||p===46||xe(p)?(r=1,s(p)):u(p)}function s(p){return p===58?(t.consume(p),r=0,l):(p===43||p===45||p===46||xe(p))&&r++<32?(t.consume(p),s):(r=0,u(p))}function l(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||fn(p)?n(p):(t.consume(p),l)}function u(p){return p===64?(t.consume(p),c):Dc(p)?(t.consume(p),u):n(p)}function c(p){return xe(p)?h(p):n(p)}function h(p){return p===46?(t.consume(p),r=0,c):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):f(p)}function f(p){if((p===45||xe(p))&&r++<63){let m=p===45?f:h;return t.consume(p),m}return n(p)}}var yt={partial:!0,tokenize:sx};function sx(t,e,n){return r;function r(a){return _(a)?R(t,i,"linePrefix")(a):i(a)}function i(a){return a===null||E(a)?e(a):n(a)}}var Ai={continuation:{tokenize:ux},exit:cx,name:"blockQuote",tokenize:lx};function lx(t,e,n){let r=this;return i;function i(o){if(o===62){let s=r.containerState;return s.open||(t.enter("blockQuote",{_container:!0}),s.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),a}return n(o)}function a(o){return _(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function ux(t,e,n){let r=this;return i;function i(o){return _(o)?R(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return t.attempt(Ai,e,n)(o)}}function cx(t){t.exit("blockQuote")}var Ii={name:"characterEscape",tokenize:hx};function hx(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),i}function i(a){return Oc(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}var Mi={name:"characterReference",tokenize:fx};function fx(t,e,n){let r=this,i=0,a,o;return s;function s(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),a=31,o=xe,c(h))}function u(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,o=Lc,c):(t.enter("characterReferenceValue"),a=7,o=Ir,c(h))}function c(h){if(h===59&&i){let f=t.exit("characterReferenceValue");return o===xe&&!jn(r.sliceSerialize(f))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<a?(t.consume(h),c):n(h)}}var Uc={partial:!0,tokenize:mx},zi={concrete:!0,name:"codeFenced",tokenize:px};function px(t,e,n){let r=this,i={partial:!0,tokenize:T},a=0,o=0,s;return l;function l(g){return u(g)}function u(g){let I=r.events[r.events.length-1];return a=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,s=g,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),c(g)}function c(g){return g===s?(o++,t.consume(g),c):o<3?n(g):(t.exit("codeFencedFenceSequence"),_(g)?R(t,h,"whitespace")(g):h(g))}function h(g){return g===null||E(g)?(t.exit("codeFencedFence"),r.interrupt?e(g):t.check(Uc,y,A)(g)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===null||E(g)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(g)):_(g)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),R(t,p,"whitespace")(g)):g===96&&g===s?n(g):(t.consume(g),f)}function p(g){return g===null||E(g)?h(g):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===null||E(g)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(g)):g===96&&g===s?n(g):(t.consume(g),m)}function y(g){return t.attempt(i,A,b)(g)}function b(g){return t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),k}function k(g){return a>0&&_(g)?R(t,C,"linePrefix",a+1)(g):C(g)}function C(g){return g===null||E(g)?t.check(Uc,y,A)(g):(t.enter("codeFlowValue"),w(g))}function w(g){return g===null||E(g)?(t.exit("codeFlowValue"),C(g)):(t.consume(g),w)}function A(g){return t.exit("codeFenced"),e(g)}function T(g,I,D){let L=0;return v;function v(B){return g.enter("lineEnding"),g.consume(B),g.exit("lineEnding"),O}function O(B){return g.enter("codeFencedFence"),_(B)?R(g,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):F(B)}function F(B){return B===s?(g.enter("codeFencedFenceSequence"),z(B)):D(B)}function z(B){return B===s?(L++,g.consume(B),z):L>=o?(g.exit("codeFencedFenceSequence"),_(B)?R(g,P,"whitespace")(B):P(B)):D(B)}function P(B){return B===null||E(B)?(g.exit("codeFencedFence"),I(B)):D(B)}}}function mx(t,e,n){let r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}var zr={name:"codeIndented",tokenize:gx},dx={partial:!0,tokenize:xx};function gx(t,e,n){let r=this;return i;function i(u){return t.enter("codeIndented"),R(t,a,"linePrefix",4+1)(u)}function a(u){let c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):E(u)?t.attempt(dx,o,l)(u):(t.enter("codeFlowValue"),s(u))}function s(u){return u===null||E(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),s)}function l(u){return t.exit("codeIndented"),e(u)}}function xx(t,e,n){let r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):E(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):R(t,a,"linePrefix",4+1)(o)}function a(o){let s=r.events[r.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(o):E(o)?i(o):n(o)}}var Ma={name:"codeText",previous:yx,resolve:wx,tokenize:kx};function wx(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function yx(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function kx(t,e,n){let r=this,i=0,a,o;return s;function s(f){return t.enter("codeText"),t.enter("codeTextSequence"),l(f)}function l(f){return f===96?(t.consume(f),i++,l):(t.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),u):f===96?(o=t.enter("codeTextSequence"),a=0,h(f)):E(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),u):(t.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||E(f)?(t.exit("codeTextData"),u(f)):(t.consume(f),c)}function h(f){return f===96?(t.consume(f),a++,h):a===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(o.type="codeTextData",c(f))}}var Ei=class{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){let r=n==null?Number.POSITIVE_INFINITY:n;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){let i=n||0;this.setCursor(Math.trunc(e));let a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Er(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Er(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Er(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){let n=this.left.splice(e,Number.POSITIVE_INFINITY);Er(this.right,n.reverse())}else{let n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Er(this.left,n.reverse())}}};function Er(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Ni(t){let e={},n=-1,r,i,a,o,s,l,u,c=new Ei(t);for(;++n<c.length;){for(;n in e;)n=e[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,bx(c,n)),n=e[n],u=!0);else if(r[1]._container){for(a=n,i=void 0;a--;)if(o=c.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},s=c.slice(i,n),s.unshift(r),c.splice(i,n-i+1,s))}}return ye(t,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function bx(t,e){let n=t.get(e)[1],r=t.get(e)[2],i=e-1,a=[],o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));let s=o.events,l=[],u={},c,h,f=-1,p=n,m=0,y=0,b=[y];for(;p;){for(;t.get(++i)[1]!==p;);a.push(i),p._tokenizer||(c=r.sliceStream(p),p.next||c.push(null),h&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++f<s.length;)s[f][0]==="exit"&&s[f-1][0]==="enter"&&s[f][1].type===s[f-1][1].type&&s[f][1].start.line!==s[f][1].end.line&&(y=f+1,b.push(y),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):b.pop(),f=b.length;f--;){let k=s.slice(b[f],b[f+1]),C=a.pop();l.push([C,C+k.length-1]),t.splice(C,2,k)}for(l.reverse(),f=-1;++f<l.length;)u[m+l[f][0]]=m+l[f][1],m+=l[f][1]-l[f][0]-1;return u}var za={resolve:Cx,tokenize:Sx},vx={partial:!0,tokenize:Tx};function Cx(t){return Ni(t),t}function Sx(t,e){let n;return r;function r(s){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?a(s):E(s)?t.check(vx,o,a)(s):(t.consume(s),i)}function a(s){return t.exit("chunkContent"),t.exit("content"),e(s)}function o(s){return t.consume(s),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Tx(t,e,n){let r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),R(t,a,"linePrefix")}function a(o){if(o===null||E(o))return n(o);let s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function Fi(t,e,n,r,i,a,o,s,l){let u=l||Number.POSITIVE_INFINITY,c=0;return h;function h(k){return k===60?(t.enter(r),t.enter(i),t.enter(a),t.consume(k),t.exit(a),f):k===null||k===32||k===41||fn(k)?n(k):(t.enter(r),t.enter(o),t.enter(s),t.enter("chunkString",{contentType:"string"}),y(k))}function f(k){return k===62?(t.enter(a),t.consume(k),t.exit(a),t.exit(i),t.exit(r),e):(t.enter(s),t.enter("chunkString",{contentType:"string"}),p(k))}function p(k){return k===62?(t.exit("chunkString"),t.exit(s),f(k)):k===null||k===60||E(k)?n(k):(t.consume(k),k===92?m:p)}function m(k){return k===60||k===62||k===92?(t.consume(k),p):p(k)}function y(k){return!c&&(k===null||k===41||W(k))?(t.exit("chunkString"),t.exit(s),t.exit(o),t.exit(r),e(k)):c<u&&k===40?(t.consume(k),c++,y):k===41?(t.consume(k),c--,y):k===null||k===32||k===40||fn(k)?n(k):(t.consume(k),k===92?b:y)}function b(k){return k===40||k===41||k===92?(t.consume(k),y):y(k)}}function Di(t,e,n,r,i,a){let o=this,s=0,l;return u;function u(p){return t.enter(r),t.enter(i),t.consume(p),t.exit(i),t.enter(a),c}function c(p){return s>999||p===null||p===91||p===93&&!l||p===94&&!s&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(t.exit(a),t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):E(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||E(p)||s++>999?(t.exit("chunkString"),c(p)):(t.consume(p),l||(l=!_(p)),p===92?f:h)}function f(p){return p===91||p===92||p===93?(t.consume(p),s++,h):h(p)}}function Li(t,e,n,r,i,a){let o;return s;function s(f){return f===34||f===39||f===40?(t.enter(r),t.enter(i),t.consume(f),t.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):(t.enter(a),u(f))}function u(f){return f===o?(t.exit(a),l(o)):f===null?n(f):E(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),R(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||E(f)?(t.exit("chunkString"),u(f)):(t.consume(f),f===92?h:c)}function h(f){return f===o||f===92?(t.consume(f),c):c(f)}}function mn(t,e){let n;return r;function r(i){return E(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):_(i)?R(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}var Ea={name:"definition",tokenize:Ix},Ax={partial:!0,tokenize:Mx};function Ix(t,e,n){let r=this,i;return a;function a(p){return t.enter("definition"),o(p)}function o(p){return Di.call(r,t,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function s(p){return i=Be(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),l):n(p)}function l(p){return W(p)?mn(t,u)(p):u(p)}function u(p){return Fi(t,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function c(p){return t.attempt(Ax,h,h)(p)}function h(p){return _(p)?R(t,f,"whitespace")(p):f(p)}function f(p){return p===null||E(p)?(t.exit("definition"),r.parser.defined.push(i),e(p)):n(p)}}function Mx(t,e,n){return r;function r(s){return W(s)?mn(t,i)(s):n(s)}function i(s){return Li(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function a(s){return _(s)?R(t,o,"whitespace")(s):o(s)}function o(s){return s===null||E(s)?e(s):n(s)}}var Na={name:"hardBreakEscape",tokenize:zx};function zx(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),i}function i(a){return E(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}var Fa={name:"headingAtx",resolve:Ex,tokenize:Nx};function Ex(t,e){let n=t.length-2,r=3,i,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},ye(t,r,n-r+1,[["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e]])),t}function Nx(t,e,n){let r=0;return i;function i(c){return t.enter("atxHeading"),a(c)}function a(c){return t.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(t.consume(c),o):c===null||W(c)?(t.exit("atxHeadingSequence"),s(c)):n(c)}function s(c){return c===35?(t.enter("atxHeadingSequence"),l(c)):c===null||E(c)?(t.exit("atxHeading"),e(c)):_(c)?R(t,s,"whitespace")(c):(t.enter("atxHeadingText"),u(c))}function l(c){return c===35?(t.consume(c),l):(t.exit("atxHeadingSequence"),s(c))}function u(c){return c===null||c===35||W(c)?(t.exit("atxHeadingText"),s(c)):(t.consume(c),u)}}var jc=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Da=["pre","script","style","textarea"];var La={concrete:!0,name:"htmlFlow",resolveTo:Lx,tokenize:Ox},Fx={partial:!0,tokenize:Bx},Dx={partial:!0,tokenize:Px};function Lx(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Ox(t,e,n){let r=this,i,a,o,s,l;return u;function u(d){return c(d)}function c(d){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(d),h}function h(d){return d===33?(t.consume(d),f):d===47?(t.consume(d),a=!0,y):d===63?(t.consume(d),i=3,r.interrupt?e:x):Ie(d)?(t.consume(d),o=String.fromCharCode(d),b):n(d)}function f(d){return d===45?(t.consume(d),i=2,p):d===91?(t.consume(d),i=5,s=0,m):Ie(d)?(t.consume(d),i=4,r.interrupt?e:x):n(d)}function p(d){return d===45?(t.consume(d),r.interrupt?e:x):n(d)}function m(d){let he="CDATA[";return d===he.charCodeAt(s++)?(t.consume(d),s===he.length?r.interrupt?e:F:m):n(d)}function y(d){return Ie(d)?(t.consume(d),o=String.fromCharCode(d),b):n(d)}function b(d){if(d===null||d===47||d===62||W(d)){let he=d===47,ve=o.toLowerCase();return!he&&!a&&Da.includes(ve)?(i=1,r.interrupt?e(d):F(d)):jc.includes(o.toLowerCase())?(i=6,he?(t.consume(d),k):r.interrupt?e(d):F(d)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(d):a?C(d):w(d))}return d===45||xe(d)?(t.consume(d),o+=String.fromCharCode(d),b):n(d)}function k(d){return d===62?(t.consume(d),r.interrupt?e:F):n(d)}function C(d){return _(d)?(t.consume(d),C):v(d)}function w(d){return d===47?(t.consume(d),v):d===58||d===95||Ie(d)?(t.consume(d),A):_(d)?(t.consume(d),w):v(d)}function A(d){return d===45||d===46||d===58||d===95||xe(d)?(t.consume(d),A):T(d)}function T(d){return d===61?(t.consume(d),g):_(d)?(t.consume(d),T):w(d)}function g(d){return d===null||d===60||d===61||d===62||d===96?n(d):d===34||d===39?(t.consume(d),l=d,I):_(d)?(t.consume(d),g):D(d)}function I(d){return d===l?(t.consume(d),l=null,L):d===null||E(d)?n(d):(t.consume(d),I)}function D(d){return d===null||d===34||d===39||d===47||d===60||d===61||d===62||d===96||W(d)?T(d):(t.consume(d),D)}function L(d){return d===47||d===62||_(d)?w(d):n(d)}function v(d){return d===62?(t.consume(d),O):n(d)}function O(d){return d===null||E(d)?F(d):_(d)?(t.consume(d),O):n(d)}function F(d){return d===45&&i===2?(t.consume(d),Z):d===60&&i===1?(t.consume(d),te):d===62&&i===4?(t.consume(d),ce):d===63&&i===3?(t.consume(d),x):d===93&&i===5?(t.consume(d),ie):E(d)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(Fx,se,z)(d)):d===null||E(d)?(t.exit("htmlFlowData"),z(d)):(t.consume(d),F)}function z(d){return t.check(Dx,P,se)(d)}function P(d){return t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),B}function B(d){return d===null||E(d)?z(d):(t.enter("htmlFlowData"),F(d))}function Z(d){return d===45?(t.consume(d),x):F(d)}function te(d){return d===47?(t.consume(d),o="",Ae):F(d)}function Ae(d){if(d===62){let he=o.toLowerCase();return Da.includes(he)?(t.consume(d),ce):F(d)}return Ie(d)&&o.length<8?(t.consume(d),o+=String.fromCharCode(d),Ae):F(d)}function ie(d){return d===93?(t.consume(d),x):F(d)}function x(d){return d===62?(t.consume(d),ce):d===45&&i===2?(t.consume(d),x):F(d)}function ce(d){return d===null||E(d)?(t.exit("htmlFlowData"),se(d)):(t.consume(d),ce)}function se(d){return t.exit("htmlFlow"),e(d)}}function Px(t,e,n){let r=this;return i;function i(o){return E(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function Bx(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(yt,e,n)}}var Oa={name:"htmlText",tokenize:Rx};function Rx(t,e,n){let r=this,i,a,o;return s;function s(x){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(x),l}function l(x){return x===33?(t.consume(x),u):x===47?(t.consume(x),T):x===63?(t.consume(x),w):Ie(x)?(t.consume(x),D):n(x)}function u(x){return x===45?(t.consume(x),c):x===91?(t.consume(x),a=0,m):Ie(x)?(t.consume(x),C):n(x)}function c(x){return x===45?(t.consume(x),p):n(x)}function h(x){return x===null?n(x):x===45?(t.consume(x),f):E(x)?(o=h,te(x)):(t.consume(x),h)}function f(x){return x===45?(t.consume(x),p):h(x)}function p(x){return x===62?Z(x):x===45?f(x):h(x)}function m(x){let ce="CDATA[";return x===ce.charCodeAt(a++)?(t.consume(x),a===ce.length?y:m):n(x)}function y(x){return x===null?n(x):x===93?(t.consume(x),b):E(x)?(o=y,te(x)):(t.consume(x),y)}function b(x){return x===93?(t.consume(x),k):y(x)}function k(x){return x===62?Z(x):x===93?(t.consume(x),k):y(x)}function C(x){return x===null||x===62?Z(x):E(x)?(o=C,te(x)):(t.consume(x),C)}function w(x){return x===null?n(x):x===63?(t.consume(x),A):E(x)?(o=w,te(x)):(t.consume(x),w)}function A(x){return x===62?Z(x):w(x)}function T(x){return Ie(x)?(t.consume(x),g):n(x)}function g(x){return x===45||xe(x)?(t.consume(x),g):I(x)}function I(x){return E(x)?(o=I,te(x)):_(x)?(t.consume(x),I):Z(x)}function D(x){return x===45||xe(x)?(t.consume(x),D):x===47||x===62||W(x)?L(x):n(x)}function L(x){return x===47?(t.consume(x),Z):x===58||x===95||Ie(x)?(t.consume(x),v):E(x)?(o=L,te(x)):_(x)?(t.consume(x),L):Z(x)}function v(x){return x===45||x===46||x===58||x===95||xe(x)?(t.consume(x),v):O(x)}function O(x){return x===61?(t.consume(x),F):E(x)?(o=O,te(x)):_(x)?(t.consume(x),O):L(x)}function F(x){return x===null||x===60||x===61||x===62||x===96?n(x):x===34||x===39?(t.consume(x),i=x,z):E(x)?(o=F,te(x)):_(x)?(t.consume(x),F):(t.consume(x),P)}function z(x){return x===i?(t.consume(x),i=void 0,B):x===null?n(x):E(x)?(o=z,te(x)):(t.consume(x),z)}function P(x){return x===null||x===34||x===39||x===60||x===61||x===96?n(x):x===47||x===62||W(x)?L(x):(t.consume(x),P)}function B(x){return x===47||x===62||W(x)?L(x):n(x)}function Z(x){return x===62?(t.consume(x),t.exit("htmlTextData"),t.exit("htmlText"),e):n(x)}function te(x){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),Ae}function Ae(x){return _(x)?R(t,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(x):ie(x)}function ie(x){return t.enter("htmlTextData"),o(x)}}var dn={name:"labelEnd",resolveAll:qx,resolveTo:Hx,tokenize:$x},_x={tokenize:Vx},Ux={tokenize:Qx},jx={tokenize:Zx};function qx(t){let e=-1,n=[];for(;++e<t.length;){let r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){let i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&ye(t,0,t.length,n),t}function Hx(t,e){let n=t.length,r=0,i,a,o,s;for(;n--;)if(i=t[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);let l={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[a][1].start},end:{...t[o][1].end}},c={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[o-2][1].start}};return s=[["enter",l,e],["enter",u,e]],s=Ue(s,t.slice(a+1,a+r+3)),s=Ue(s,[["enter",c,e]]),s=Ue(s,Yt(e.parser.constructs.insideSpan.null,t.slice(a+r+4,o-3),e)),s=Ue(s,[["exit",c,e],t[o-2],t[o-1],["exit",u,e]]),s=Ue(s,t.slice(o+1)),s=Ue(s,[["exit",l,e]]),ye(t,a,t.length,s),t}function $x(t,e,n){let r=this,i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return s;function s(f){return a?a._inactive?h(f):(o=r.parser.defined.includes(Be(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):n(f)}function l(f){return f===40?t.attempt(_x,c,o?c:h)(f):f===91?t.attempt(Ux,c,o?u:h)(f):o?c(f):h(f)}function u(f){return t.attempt(jx,c,h)(f)}function c(f){return e(f)}function h(f){return a._balanced=!0,n(f)}}function Vx(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return W(h)?mn(t,a)(h):a(h)}function a(h){return h===41?c(h):Fi(t,o,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return W(h)?mn(t,l)(h):c(h)}function s(h){return n(h)}function l(h){return h===34||h===39||h===40?Li(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function u(h){return W(h)?mn(t,c)(h):c(h)}function c(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function Qx(t,e,n){let r=this;return i;function i(s){return Di.call(r,t,a,o,"reference","referenceMarker","referenceString")(s)}function a(s){return r.parser.defined.includes(Be(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(s):n(s)}function o(s){return n(s)}}function Zx(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),i}function i(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}var Pa={name:"labelStartImage",resolveAll:dn.resolveAll,tokenize:Wx};function Wx(t,e,n){let r=this;return i;function i(s){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(s),t.exit("labelImageMarker"),a}function a(s){return s===91?(t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelImage"),o):n(s)}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):e(s)}}var Ba={name:"labelStartLink",resolveAll:dn.resolveAll,tokenize:Yx};function Yx(t,e,n){let r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}var Nr={name:"lineEnding",tokenize:Gx};function Gx(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),R(t,e,"linePrefix")}}var gn={name:"thematicBreak",tokenize:Kx};function Kx(t,e,n){let r=0,i;return a;function a(u){return t.enter("thematicBreak"),o(u)}function o(u){return i=u,s(u)}function s(u){return u===i?(t.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||E(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===i?(t.consume(u),r++,l):(t.exit("thematicBreakSequence"),_(u)?R(t,s,"whitespace")(u):s(u))}}var Re={continuation:{tokenize:t0},exit:r0,name:"list",tokenize:e0},Jx={partial:!0,tokenize:i0},Xx={partial:!0,tokenize:n0};function e0(t,e,n){let r=this,i=r.events[r.events.length-1],a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return s;function s(p){let m=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:Ir(p)){if(r.containerState.type||(r.containerState.type=m,t.enter(m,{_container:!0})),m==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(gn,n,u)(p):u(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(p)}return n(p)}function l(p){return Ir(p)&&++o<10?(t.consume(p),l):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),u(p)):n(p)}function u(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(yt,r.interrupt?n:c,t.attempt(Jx,f,h))}function c(p){return r.containerState.initialBlankLine=!0,a++,f(p)}function h(p){return _(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),f):n(p)}function f(p){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}function t0(t,e,n){let r=this;return r.containerState._closeFlow=void 0,t.check(yt,i,a);function i(s){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,R(t,e,"listItemIndent",r.containerState.size+1)(s)}function a(s){return r.containerState.furtherBlankLines||!_(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(Xx,e,o)(s))}function o(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,R(t,t.attempt(Re,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function n0(t,e,n){let r=this;return R(t,i,"listItemIndent",r.containerState.size+1);function i(a){let o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(a):n(a)}}function r0(t){t.exit(this.containerState.type)}function i0(t,e,n){let r=this;return R(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(a){let o=r.events[r.events.length-1];return!_(a)&&o&&o[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}var Oi={name:"setextUnderline",resolveTo:o0,tokenize:a0};function o0(t,e){let n=t.length,r,i,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);let o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",a?(t.splice(i,0,["enter",o,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function a0(t,e,n){let r=this,i;return a;function a(u){let c=r.events.length,h;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){h=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),s(u)}function s(u){return u===i?(t.consume(u),s):(t.exit("setextHeadingLineSequence"),_(u)?R(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||E(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}var qc={tokenize:s0};function s0(t){let e=this,n=t.attempt(yt,r,t.attempt(this.parser.constructs.flowInitial,i,R(t,t.attempt(this.parser.constructs.flow,i,t.attempt(za,i)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}var Hc={resolveAll:Zc()},$c=Qc("string"),Vc=Qc("text");function Qc(t){return{resolveAll:Zc(t==="text"?l0:void 0),tokenize:e};function e(n){let r=this,i=this.parser.constructs[t],a=n.attempt(i,o,s);return o;function o(c){return u(c)?a(c):s(c)}function s(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),a(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;let h=i[c],f=-1;if(h)for(;++f<h.length;){let p=h[f];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function Zc(t){return e;function e(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return t?t(n,r):n}}function l0(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){let r=t[n-1][1],i=e.sliceStream(r),a=i.length,o=-1,s=0,l;for(;a--;){let u=i[a];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)s++,o--;if(o)break;o=-1}else if(u===-2)l=!0,s++;else if(u!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(s=0),s){let u={type:n===t.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-s,offset:r.end.offset-s},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}var Ra={};Ho(Ra,{attentionMarkers:()=>g0,contentInitial:()=>c0,disable:()=>x0,document:()=>u0,flow:()=>f0,flowInitial:()=>h0,insideSpan:()=>d0,string:()=>p0,text:()=>m0});var u0={[42]:Re,[43]:Re,[45]:Re,[48]:Re,[49]:Re,[50]:Re,[51]:Re,[52]:Re,[53]:Re,[54]:Re,[55]:Re,[56]:Re,[57]:Re,[62]:Ai},c0={[91]:Ea},h0={[-2]:zr,[-1]:zr,[32]:zr},f0={[35]:Fa,[42]:gn,[45]:[Oi,gn],[60]:La,[61]:Oi,[95]:gn,[96]:zi,[126]:zi},p0={[38]:Mi,[92]:Ii},m0={[-5]:Nr,[-4]:Nr,[-3]:Nr,[33]:Pa,[38]:Mi,[42]:Mr,[60]:[Ia,Oa],[91]:Ba,[92]:[Na,Ii],[93]:dn,[95]:Mr,[96]:Ma},d0={null:[Mr,Hc]},g0={null:[42,95]},x0={null:[]};function Wc(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0},i={},a=[],o=[],s=[],l=!0,u={attempt:L(I),check:L(D),consume:A,enter:T,exit:g,interrupt:L(D,{interrupt:!0})},c={code:null,containerState:{},defineSkip:k,events:[],now:b,parser:t,previous:null,sliceSerialize:m,sliceStream:y,write:p},h=e.tokenize.call(c,u),f;return e.resolveAll&&a.push(e),c;function p(z){return o=Ue(o,z),C(),o[o.length-1]!==null?[]:(v(e,0),c.events=Yt(a,c.events,c),c.events)}function m(z,P){return y0(y(z),P)}function y(z){return w0(o,z)}function b(){let{_bufferIndex:z,_index:P,line:B,column:Z,offset:te}=r;return{_bufferIndex:z,_index:P,line:B,column:Z,offset:te}}function k(z){i[z.line]=z.column,F()}function C(){let z;for(;r._index<o.length;){let P=o[r._index];if(typeof P=="string")for(z=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===z&&r._bufferIndex<P.length;)w(P.charCodeAt(r._bufferIndex));else w(P)}}function w(z){l=void 0,f=z,h=h(z)}function A(z){E(z)?(r.line++,r.column=1,r.offset+=z===-3?2:1,F()):z!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=z,l=!0}function T(z,P){let B=P||{};return B.type=z,B.start=b(),c.events.push(["enter",B,c]),s.push(B),B}function g(z){let P=s.pop();return P.end=b(),c.events.push(["exit",P,c]),P}function I(z,P){v(z,P.from)}function D(z,P){P.restore()}function L(z,P){return B;function B(Z,te,Ae){let ie,x,ce,se;return Array.isArray(Z)?he(Z):"tokenize"in Z?he([Z]):d(Z);function d(Ce){return jt;function jt(st){let dt=st!==null&&Ce[st],zt=st!==null&&Ce.null,Fn=[...Array.isArray(dt)?dt:dt?[dt]:[],...Array.isArray(zt)?zt:zt?[zt]:[]];return he(Fn)(st)}}function he(Ce){return ie=Ce,x=0,Ce.length===0?Ae:ve(Ce[x])}function ve(Ce){return jt;function jt(st){return se=O(),ce=Ce,Ce.partial||(c.currentConstruct=Ce),Ce.name&&c.parser.constructs.disable.null.includes(Ce.name)?at(st):Ce.tokenize.call(P?Object.assign(Object.create(c),P):c,u,tt,at)(st)}}function tt(Ce){return l=!0,z(ce,se),te}function at(Ce){return l=!0,se.restore(),++x<ie.length?ve(ie[x]):Ae}}}function v(z,P){z.resolveAll&&!a.includes(z)&&a.push(z),z.resolve&&ye(c.events,P,c.events.length-P,z.resolve(c.events.slice(P),c)),z.resolveTo&&(c.events=z.resolveTo(c.events,c))}function O(){let z=b(),P=c.previous,B=c.currentConstruct,Z=c.events.length,te=Array.from(s);return{from:Z,restore:Ae};function Ae(){r=z,c.previous=P,c.currentConstruct=B,c.events.length=Z,s=te,F()}}function F(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function w0(t,e){let n=e.start._index,r=e.start._bufferIndex,i=e.end._index,a=e.end._bufferIndex,o;if(n===i)o=[t[n].slice(r,a)];else{if(o=t.slice(n,i),r>-1){let s=o[0];typeof s=="string"?o[0]=s.slice(r):o.shift()}a>0&&o.push(t[i].slice(0,a))}return o}function y0(t,e){let n=-1,r=[],i;for(;++n<t.length;){let a=t[n],o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}function _a(t){let r={constructs:Si([Ra,...(t||{}).extensions||[]]),content:i(Pc),defined:[],document:i(Rc),flow:i(qc),lazy:{},string:i($c),text:i(Vc)};return r;function i(a){return o;function o(s){return Wc(r,a,s)}}}function Ua(t){for(;!Ni(t););return t}var Yc=/[\0\t\n\r]/g;function ja(){let t=1,e="",n=!0,r;return i;function i(a,o,s){let l=[],u,c,h,f,p;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),h=0,e="",n&&(a.charCodeAt(0)===65279&&h++,n=void 0);h<a.length;){if(Yc.lastIndex=h,u=Yc.exec(a),f=u&&u.index!==void 0?u.index:a.length,p=a.charCodeAt(f),!u){e=a.slice(h);break}if(p===10&&h===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<f&&(l.push(a.slice(h,f)),t+=f-h),p){case 0:{l.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,l.push(-2);t++<c;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=f+1}return s&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}var k0=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Gc(t){return t.replace(k0,b0)}function b0(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){let i=n.charCodeAt(1),a=i===120||i===88;return Ti(n.slice(a?2:1),a?16:10)}return jn(n)||t}var Jc={}.hasOwnProperty;function qa(t,e,n){return typeof e!="string"&&(n=e,e=void 0),v0(n)(Ua(_a(n).document().write(ja()(t,e,!0))))}function v0(t){let e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Jl),autolinkProtocol:L,autolinkEmail:L,atxHeading:a(Yl),blockQuote:a(st),characterEscape:L,characterReference:L,codeFenced:a(dt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(dt,o),codeText:a(zt,o),codeTextData:L,data:L,codeFlowValue:L,definition:a(Fn),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(xd),hardBreakEscape:a(Gl),hardBreakTrailing:a(Gl),htmlFlow:a(Kl,o),htmlFlowData:L,htmlText:a(Kl,o),htmlTextData:L,image:a(wd),label:o,link:a(Jl),listItem:a(yd),listItemValue:f,listOrdered:a(Xl,h),listUnordered:a(Xl),paragraph:a(kd),reference:d,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(Yl),strong:a(bd),thematicBreak:a(Cd)},exit:{atxHeading:l(),atxHeadingSequence:T,autolink:l(),autolinkEmail:jt,autolinkProtocol:Ce,blockQuote:l(),characterEscapeValue:v,characterReferenceMarkerHexadecimal:ve,characterReferenceMarkerNumeric:ve,characterReferenceValue:tt,characterReference:at,codeFenced:l(b),codeFencedFence:y,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:v,codeIndented:l(k),codeText:l(B),codeTextData:v,data:v,definition:l(),definitionDestinationString:A,definitionLabelString:C,definitionTitleString:w,emphasis:l(),hardBreakEscape:l(F),hardBreakTrailing:l(F),htmlFlow:l(z),htmlFlowData:v,htmlText:l(P),htmlTextData:v,image:l(te),label:ie,labelText:Ae,lineEnding:O,link:l(Z),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:he,resourceDestinationString:x,resourceTitleString:ce,resource:se,setextHeading:l(D),setextHeadingLineSequence:I,setextHeadingText:g,strong:l(),thematicBreak:l()}};Xc(e,(t||{}).mdastExtensions||[]);let n={};return r;function r(S){let N={type:"root",children:[]},q={stack:[N],tokenStack:[],config:e,enter:s,exit:u,buffer:o,resume:c,data:n},G=[],oe=-1;for(;++oe<S.length;)if(S[oe][1].type==="listOrdered"||S[oe][1].type==="listUnordered")if(S[oe][0]==="enter")G.push(oe);else{let lt=G.pop();oe=i(S,lt,oe)}for(oe=-1;++oe<S.length;){let lt=e[S[oe][0]];Jc.call(lt,S[oe][1].type)&&lt[S[oe][1].type].call(Object.assign({sliceSerialize:S[oe][2].sliceSerialize},q),S[oe][1])}if(q.tokenStack.length>0){let lt=q.tokenStack[q.tokenStack.length-1];(lt[1]||Kc).call(q,void 0,lt[0])}for(N.position={start:Gt(S.length>0?S[0][1].start:{line:1,column:1,offset:0}),end:Gt(S.length>0?S[S.length-2][1].end:{line:1,column:1,offset:0})},oe=-1;++oe<e.transforms.length;)N=e.transforms[oe](N)||N;return N}function i(S,N,q){let G=N-1,oe=-1,lt=!1,on,Et,cr,hr;for(;++G<=q;){let We=S[G];switch(We[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{We[0]==="enter"?oe++:oe--,hr=void 0;break}case"lineEndingBlank":{We[0]==="enter"&&(on&&!hr&&!oe&&!cr&&(cr=G),hr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:hr=void 0}if(!oe&&We[0]==="enter"&&We[1].type==="listItemPrefix"||oe===-1&&We[0]==="exit"&&(We[1].type==="listUnordered"||We[1].type==="listOrdered")){if(on){let Dn=G;for(Et=void 0;Dn--;){let Nt=S[Dn];if(Nt[1].type==="lineEnding"||Nt[1].type==="lineEndingBlank"){if(Nt[0]==="exit")continue;Et&&(S[Et][1].type="lineEndingBlank",lt=!0),Nt[1].type="lineEnding",Et=Dn}else if(!(Nt[1].type==="linePrefix"||Nt[1].type==="blockQuotePrefix"||Nt[1].type==="blockQuotePrefixWhitespace"||Nt[1].type==="blockQuoteMarker"||Nt[1].type==="listItemIndent"))break}cr&&(!Et||cr<Et)&&(on._spread=!0),on.end=Object.assign({},Et?S[Et][1].start:We[1].end),S.splice(Et||G,0,["exit",on,We[2]]),G++,q++}if(We[1].type==="listItemPrefix"){let Dn={type:"listItem",_spread:!1,start:Object.assign({},We[1].start),end:void 0};on=Dn,S.splice(G,0,["enter",Dn,We[2]]),G++,q++,cr=void 0,hr=!0}}}return S[N][1]._spread=lt,q}function a(S,N){return q;function q(G){s.call(this,S(G),G),N&&N.call(this,G)}}function o(){this.stack.push({type:"fragment",children:[]})}function s(S,N,q){this.stack[this.stack.length-1].children.push(S),this.stack.push(S),this.tokenStack.push([N,q||void 0]),S.position={start:Gt(N.start),end:void 0}}function l(S){return N;function N(q){S&&S.call(this,q),u.call(this,q)}}function u(S,N){let q=this.stack.pop(),G=this.tokenStack.pop();if(G)G[0].type!==S.type&&(N?N.call(this,S,G[0]):(G[1]||Kc).call(this,S,G[0]));else throw new Error("Cannot close `"+S.type+"` ("+Zt({start:S.start,end:S.end})+"): it\u2019s not open");q.position.end=Gt(S.end)}function c(){return hn(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(S){if(this.data.expectingFirstListItemValue){let N=this.stack[this.stack.length-2];N.start=Number.parseInt(this.sliceSerialize(S),10),this.data.expectingFirstListItemValue=void 0}}function p(){let S=this.resume(),N=this.stack[this.stack.length-1];N.lang=S}function m(){let S=this.resume(),N=this.stack[this.stack.length-1];N.meta=S}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){let S=this.resume(),N=this.stack[this.stack.length-1];N.value=S.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){let S=this.resume(),N=this.stack[this.stack.length-1];N.value=S.replace(/(\r?\n|\r)$/g,"")}function C(S){let N=this.resume(),q=this.stack[this.stack.length-1];q.label=N,q.identifier=Be(this.sliceSerialize(S)).toLowerCase()}function w(){let S=this.resume(),N=this.stack[this.stack.length-1];N.title=S}function A(){let S=this.resume(),N=this.stack[this.stack.length-1];N.url=S}function T(S){let N=this.stack[this.stack.length-1];if(!N.depth){let q=this.sliceSerialize(S).length;N.depth=q}}function g(){this.data.setextHeadingSlurpLineEnding=!0}function I(S){let N=this.stack[this.stack.length-1];N.depth=this.sliceSerialize(S).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function L(S){let q=this.stack[this.stack.length-1].children,G=q[q.length-1];(!G||G.type!=="text")&&(G=vd(),G.position={start:Gt(S.start),end:void 0},q.push(G)),this.stack.push(G)}function v(S){let N=this.stack.pop();N.value+=this.sliceSerialize(S),N.position.end=Gt(S.end)}function O(S){let N=this.stack[this.stack.length-1];if(this.data.atHardBreak){let q=N.children[N.children.length-1];q.position.end=Gt(S.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(N.type)&&(L.call(this,S),v.call(this,S))}function F(){this.data.atHardBreak=!0}function z(){let S=this.resume(),N=this.stack[this.stack.length-1];N.value=S}function P(){let S=this.resume(),N=this.stack[this.stack.length-1];N.value=S}function B(){let S=this.resume(),N=this.stack[this.stack.length-1];N.value=S}function Z(){let S=this.stack[this.stack.length-1];if(this.data.inReference){let N=this.data.referenceType||"shortcut";S.type+="Reference",S.referenceType=N,delete S.url,delete S.title}else delete S.identifier,delete S.label;this.data.referenceType=void 0}function te(){let S=this.stack[this.stack.length-1];if(this.data.inReference){let N=this.data.referenceType||"shortcut";S.type+="Reference",S.referenceType=N,delete S.url,delete S.title}else delete S.identifier,delete S.label;this.data.referenceType=void 0}function Ae(S){let N=this.sliceSerialize(S),q=this.stack[this.stack.length-2];q.label=Gc(N),q.identifier=Be(N).toLowerCase()}function ie(){let S=this.stack[this.stack.length-1],N=this.resume(),q=this.stack[this.stack.length-1];if(this.data.inReference=!0,q.type==="link"){let G=S.children;q.children=G}else q.alt=N}function x(){let S=this.resume(),N=this.stack[this.stack.length-1];N.url=S}function ce(){let S=this.resume(),N=this.stack[this.stack.length-1];N.title=S}function se(){this.data.inReference=void 0}function d(){this.data.referenceType="collapsed"}function he(S){let N=this.resume(),q=this.stack[this.stack.length-1];q.label=N,q.identifier=Be(this.sliceSerialize(S)).toLowerCase(),this.data.referenceType="full"}function ve(S){this.data.characterReferenceType=S.type}function tt(S){let N=this.sliceSerialize(S),q=this.data.characterReferenceType,G;q?(G=Ti(N,q==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):G=jn(N);let oe=this.stack[this.stack.length-1];oe.value+=G}function at(S){let N=this.stack.pop();N.position.end=Gt(S.end)}function Ce(S){v.call(this,S);let N=this.stack[this.stack.length-1];N.url=this.sliceSerialize(S)}function jt(S){v.call(this,S);let N=this.stack[this.stack.length-1];N.url="mailto:"+this.sliceSerialize(S)}function st(){return{type:"blockquote",children:[]}}function dt(){return{type:"code",lang:null,meta:null,value:""}}function zt(){return{type:"inlineCode",value:""}}function Fn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function xd(){return{type:"emphasis",children:[]}}function Yl(){return{type:"heading",depth:0,children:[]}}function Gl(){return{type:"break"}}function Kl(){return{type:"html",value:""}}function wd(){return{type:"image",title:null,url:"",alt:null}}function Jl(){return{type:"link",title:null,url:"",children:[]}}function Xl(S){return{type:"list",ordered:S.type==="listOrdered",start:null,spread:S._spread,children:[]}}function yd(S){return{type:"listItem",spread:S._spread,checked:null,children:[]}}function kd(){return{type:"paragraph",children:[]}}function bd(){return{type:"strong",children:[]}}function vd(){return{type:"text",value:""}}function Cd(){return{type:"thematicBreak"}}}function Gt(t){return{line:t.line,column:t.column,offset:t.offset}}function Xc(t,e){let n=-1;for(;++n<e.length;){let r=e[n];Array.isArray(r)?Xc(t,r):C0(t,r)}}function C0(t,e){let n;for(n in e)if(Jc.call(e,n))switch(n){case"canContainEols":{let r=e[n];r&&t[n].push(...r);break}case"transforms":{let r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{let r=e[n];r&&Object.assign(t[n],r);break}}}function Kc(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Zt({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Zt({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Zt({start:e.start,end:e.end})+") is still open")}function Pi(t){let e=this;e.parser=n;function n(r){return qa(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function qn(t,e){let n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function Ha(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}var kt=function(t){if(t==null)return I0;if(typeof t=="function")return Bi(t);if(typeof t=="object")return Array.isArray(t)?S0(t):T0(t);if(typeof t=="string")return A0(t);throw new Error("Expected function, string, or object as test")};function S0(t){let e=[],n=-1;for(;++n<t.length;)e[n]=kt(t[n]);return Bi(r);function r(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function T0(t){let e=t;return Bi(n);function n(r){let i=r,a;for(a in t)if(i[a]!==e[a])return!1;return!0}}function A0(t){return Bi(e);function e(n){return n&&n.type===t}}function Bi(t){return e;function e(n,r,i){return Boolean(M0(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function I0(){return!0}function M0(t){return t!==null&&typeof t=="object"&&"type"in t}var eh=[],Ri=!0,xn=!1,Hn="skip";function wn(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;let a=kt(i),o=r?-1:1;s(t,void 0,[])();function s(l,u,c){let h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){let p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=eh,m,y,b;if((!e||a(l,u,c[c.length-1]||void 0))&&(p=z0(n(l,c)),p[0]===xn))return p;if("children"in l&&l.children){let k=l;if(k.children&&p[0]!==Hn)for(y=(r?k.children.length:-1)+o,b=c.concat(k);y>-1&&y<k.children.length;){let C=k.children[y];if(m=s(C,y,b)(),m[0]===xn)return m;y=typeof m[1]=="number"?m[1]:y+o}}return p}}}function z0(t){return Array.isArray(t)?t:typeof t=="number"?[Ri,t]:t==null?eh:[t]}function Fr(t,e,n){let i=kt((n||{}).ignore||[]),a=E0(e),o=-1;for(;++o<a.length;)wn(t,"text",s);function s(u,c){let h=-1,f;for(;++h<c.length;){let p=c[h],m=f?f.children:void 0;if(i(p,m?m.indexOf(p):void 0,f))return;f=p}if(f)return l(u,c)}function l(u,c){let h=c[c.length-1],f=a[o][0],p=a[o][1],m=0,b=h.children.indexOf(u),k=!1,C=[];f.lastIndex=0;let w=f.exec(u.value);for(;w;){let A=w.index,T={index:w.index,input:w.input,stack:[...c,u]},g=p(...w,T);if(typeof g=="string"&&(g=g.length>0?{type:"text",value:g}:void 0),g===!1?f.lastIndex=A+1:(m!==A&&C.push({type:"text",value:u.value.slice(m,A)}),Array.isArray(g)?C.push(...g):g&&C.push(g),m=A+w[0].length,k=!0),!f.global)break;w=f.exec(u.value)}return k?(m<u.value.length&&C.push({type:"text",value:u.value.slice(m)}),h.children.splice(b,1,...C)):C=[u],b+C.length}}function E0(t){let e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");let n=!t[0]||Array.isArray(t[0])?t:[t],r=-1;for(;++r<n.length;){let i=n[r];e.push([N0(i[0]),F0(i[1])])}return e}function N0(t){return typeof t=="string"?new RegExp(Ha(t),"g"):t}function F0(t){return typeof t=="function"?t:function(){return t}}var $a="phrasing",Va=["autolink","link","image","label"];function Za(){return{transforms:[R0],enter:{literalAutolink:D0,literalAutolinkEmail:Qa,literalAutolinkHttp:Qa,literalAutolinkWww:Qa},exit:{literalAutolink:B0,literalAutolinkEmail:P0,literalAutolinkHttp:L0,literalAutolinkWww:O0}}}function Wa(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:$a,notInConstruct:Va},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:$a,notInConstruct:Va},{character:":",before:"[ps]",after:"\\/",inConstruct:$a,notInConstruct:Va}]}}function D0(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Qa(t){this.config.enter.autolinkProtocol.call(this,t)}function L0(t){this.config.exit.autolinkProtocol.call(this,t)}function O0(t){this.config.exit.data.call(this,t);let e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function P0(t){this.config.exit.autolinkEmail.call(this,t)}function B0(t){this.exit(t)}function R0(t){Fr(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,_0],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,U0]],{ignore:["link","linkReference"]})}function _0(t,e,n,r,i){let a="";if(!th(i)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!j0(n)))return!1;let o=q0(n+r);if(!o[0])return!1;let s={type:"link",title:null,url:a+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[s,{type:"text",value:o[1]}]:s}function U0(t,e,n,r){return!th(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function j0(t){let e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function q0(t){let e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")"),i=qn(t,"("),a=qn(t,")");for(;r!==-1&&i>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function th(t,e){let n=t.input.charCodeAt(t.index-1);return(t.index===0||wt(n)||pn(n))&&(!e||n!==47)}nh.peek=K0;function H0(){this.buffer()}function $0(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function V0(){this.buffer()}function Q0(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Z0(t){let e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Be(this.sliceSerialize(t)).toLowerCase(),n.label=e}function W0(t){this.exit(t)}function Y0(t){let e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Be(this.sliceSerialize(t)).toLowerCase(),n.label=e}function G0(t){this.exit(t)}function K0(){return"["}function nh(t,e,n,r){let i=n.createTracker(r),a=i.move("[^"),o=n.enter("footnoteReference"),s=n.enter("reference");return a+=i.move(n.safe(n.associationId(t),{after:"]",before:a})),s(),o(),a+=i.move("]"),a}function Ya(){return{enter:{gfmFootnoteCallString:H0,gfmFootnoteCall:$0,gfmFootnoteDefinitionLabelString:V0,gfmFootnoteDefinition:Q0},exit:{gfmFootnoteCallString:Z0,gfmFootnoteCall:W0,gfmFootnoteDefinitionLabelString:Y0,gfmFootnoteDefinition:G0}}}function Ga(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:nh},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,a,o){let s=a.createTracker(o),l=s.move("[^"),u=a.enter("footnoteDefinition"),c=a.enter("label");return l+=s.move(a.safe(a.associationId(r),{before:l,after:"]"})),c(),l+=s.move("]:"),r.children&&r.children.length>0&&(s.shift(4),l+=s.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,s.current()),e?rh:J0))),u(),l}}function J0(t,e,n){return e===0?t:rh(t,e,n)}function rh(t,e,n){return(n?"":"    ")+t}var X0=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];ih.peek=nw;function Ka(){return{canContainEols:["delete"],enter:{strikethrough:ew},exit:{strikethrough:tw}}}function Ja(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:X0}],handlers:{delete:ih}}}function ew(t){this.enter({type:"delete",children:[]},t)}function tw(t){this.exit(t)}function ih(t,e,n,r){let i=n.createTracker(r),a=n.enter("strikethrough"),o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),a(),o}function nw(){return"~"}function rw(t){return t.length}function ah(t,e){let n=e||{},r=(n.align||[]).concat(),i=n.stringLength||rw,a=[],o=[],s=[],l=[],u=0,c=-1;for(;++c<t.length;){let y=[],b=[],k=-1;for(t[c].length>u&&(u=t[c].length);++k<t[c].length;){let C=iw(t[c][k]);if(n.alignDelimiters!==!1){let w=i(C);b[k]=w,(l[k]===void 0||w>l[k])&&(l[k]=w)}y.push(C)}o[c]=y,s[c]=b}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<u;)a[h]=oh(r[h]);else{let y=oh(r);for(;++h<u;)a[h]=y}h=-1;let f=[],p=[];for(;++h<u;){let y=a[h],b="",k="";y===99?(b=":",k=":"):y===108?b=":":y===114&&(k=":");let C=n.alignDelimiters===!1?1:Math.max(1,l[h]-b.length-k.length),w=b+"-".repeat(C)+k;n.alignDelimiters!==!1&&(C=b.length+C+k.length,C>l[h]&&(l[h]=C),p[h]=C),f[h]=w}o.splice(1,0,f),s.splice(1,0,p),c=-1;let m=[];for(;++c<o.length;){let y=o[c],b=s[c];h=-1;let k=[];for(;++h<u;){let C=y[h]||"",w="",A="";if(n.alignDelimiters!==!1){let T=l[h]-(b[h]||0),g=a[h];g===114?w=" ".repeat(T):g===99?T%2?(w=" ".repeat(T/2+.5),A=" ".repeat(T/2-.5)):(w=" ".repeat(T/2),A=w):A=" ".repeat(T)}n.delimiterStart!==!1&&!h&&k.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||h)&&k.push(" "),n.alignDelimiters!==!1&&k.push(w),k.push(C),n.alignDelimiters!==!1&&k.push(A),n.padding!==!1&&k.push(" "),(n.delimiterEnd!==!1||h!==u-1)&&k.push("|")}m.push(n.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return m.join(`
`)}function iw(t){return t==null?"":String(t)}function oh(t){let e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}var sh={}.hasOwnProperty;function lh(t,e){let n=e||{};function r(i,...a){let o=r.invalid,s=r.handlers;if(i&&sh.call(i,t)){let l=String(i[t]);o=sh.call(s,l)?s[l]:r.unknown}if(o)return o.call(this,i,...a)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function uh(t,e,n,r){let i=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);let o=n.indentLines(n.containerFlow(t,a.current()),ow);return i(),o}function ow(t,e,n){return">"+(n?"":" ")+t}function hh(t,e){return ch(t,e.inConstruct,!0)&&!ch(t,e.notInConstruct,!1)}function ch(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function Xa(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&hh(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function _i(t,e){let n=String(t),r=n.indexOf(e),i=r,a=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++a>o&&(o=a):a=1,i=r+e.length,r=n.indexOf(e,i);return o}function fh(t,e){return Boolean(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function ph(t){let e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function mh(t,e,n,r){let i=ph(n),a=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(fh(t,n)){let h=n.enter("codeIndented"),f=n.indentLines(a,aw);return h(),f}let s=n.createTracker(r),l=i.repeat(Math.max(_i(a,i)+1,3)),u=n.enter("codeFenced"),c=s.move(l);if(t.lang){let h=n.enter(`codeFencedLang${o}`);c+=s.move(n.safe(t.lang,{before:c,after:" ",encode:["`"],...s.current()})),h()}if(t.lang&&t.meta){let h=n.enter(`codeFencedMeta${o}`);c+=s.move(" "),c+=s.move(n.safe(t.meta,{before:c,after:`
`,encode:["`"],...s.current()})),h()}return c+=s.move(`
`),a&&(c+=s.move(a+`
`)),c+=s.move(l),u(),c}function aw(t,e,n){return(n?"":"    ")+t}function $n(t){let e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function dh(t,e,n,r){let i=$n(n),a=i==='"'?"Quote":"Apostrophe",o=n.enter("definition"),s=n.enter("label"),l=n.createTracker(r),u=l.move("[");return u+=l.move(n.safe(n.associationId(t),{before:u,after:"]",...l.current()})),u+=l.move("]: "),s(),!t.url||/[\0- \u007F]/.test(t.url)?(s=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(s=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...l.current()}))),s(),t.title&&(s=n.enter(`title${a}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),s()),o(),u}function gh(t){let e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Kt(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Vn(t,e,n){let r=Ot(t),i=Ot(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}es.peek=sw;function es(t,e,n,r){let i=gh(n),a=n.enter("emphasis"),o=n.createTracker(r),s=o.move(i),l=o.move(n.containerPhrasing(t,{after:i,before:s,...o.current()})),u=l.charCodeAt(0),c=Vn(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=Kt(u)+l.slice(1));let h=l.charCodeAt(l.length-1),f=Vn(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+Kt(h));let p=o.move(i);return a(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},s+l+p}function sw(t,e,n){return n.options.emphasis||"*"}function ct(t,e,n,r){let i,a,o;typeof e=="function"&&typeof n!="function"?(a=void 0,o=e,i=n):(a=e,o=n,i=r),wn(t,a,s,i);function s(l,u){let c=u[u.length-1],h=c?c.children.indexOf(l):void 0;return o(l,h,c)}}function xh(t,e){let n=!1;return ct(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,xn}),Boolean((!t.depth||t.depth<3)&&hn(t)&&(e.options.setext||n))}function wh(t,e,n,r){let i=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(xh(t,n)){let c=n.enter("headingSetext"),h=n.enter("phrasing"),f=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return h(),c(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}let o="#".repeat(i),s=n.enter("headingAtx"),l=n.enter("phrasing");a.move(o+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(u)&&(u=Kt(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),l(),s(),u}ts.peek=lw;function ts(t){return t.value||""}function lw(){return"<"}ns.peek=uw;function ns(t,e,n,r){let i=$n(n),a=i==='"'?"Quote":"Apostrophe",o=n.enter("image"),s=n.enter("label"),l=n.createTracker(r),u=l.move("![");return u+=l.move(n.safe(t.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),s(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(s=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(s=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":")",...l.current()}))),s(),t.title&&(s=n.enter(`title${a}`),u+=l.move(" "+i),u+=l.move(n.safe(t.title,{before:u,after:i,...l.current()})),u+=l.move(i),s()),u+=l.move(")"),o(),u}function uw(){return"!"}rs.peek=cw;function rs(t,e,n,r){let i=t.referenceType,a=n.enter("imageReference"),o=n.enter("label"),s=n.createTracker(r),l=s.move("!["),u=n.safe(t.alt,{before:l,after:"]",...s.current()});l+=s.move(u+"]["),o();let c=n.stack;n.stack=[],o=n.enter("reference");let h=n.safe(n.associationId(t),{before:l,after:"]",...s.current()});return o(),n.stack=c,a(),i==="full"||!u||u!==h?l+=s.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=s.move("]"),l}function cw(){return"!"}is.peek=hw;function is(t,e,n){let r=t.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){let o=n.unsafe[a],s=n.compilePattern(o),l;if(o.atBreak)for(;l=s.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function hw(){return"`"}function os(t,e){let n=hn(t);return Boolean(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}as.peek=fw;function as(t,e,n,r){let i=$n(n),a=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r),s,l;if(os(t,n)){let c=n.stack;n.stack=[],s=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),s(),n.stack=c,h}s=n.enter("link"),l=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(t,{before:u,after:"](",...o.current()})),u+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(t.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(l=n.enter("destinationRaw"),u+=o.move(n.safe(t.url,{before:u,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${a}`),u+=o.move(" "+i),u+=o.move(n.safe(t.title,{before:u,after:i,...o.current()})),u+=o.move(i),l()),u+=o.move(")"),s(),u}function fw(t,e,n){return os(t,n)?"<":"["}ss.peek=pw;function ss(t,e,n,r){let i=t.referenceType,a=n.enter("linkReference"),o=n.enter("label"),s=n.createTracker(r),l=s.move("["),u=n.containerPhrasing(t,{before:l,after:"]",...s.current()});l+=s.move(u+"]["),o();let c=n.stack;n.stack=[],o=n.enter("reference");let h=n.safe(n.associationId(t),{before:l,after:"]",...s.current()});return o(),n.stack=c,a(),i==="full"||!u||u!==h?l+=s.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=s.move("]"),l}function pw(){return"["}function Qn(t){let e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function yh(t){let e=Qn(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function kh(t){let e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Ui(t){let e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function bh(t,e,n,r){let i=n.enter("list"),a=n.bulletCurrent,o=t.ordered?kh(n):Qn(n),s=t.ordered?o==="."?")":".":yh(n),l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){let c=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),Ui(n)===o&&c){let h=-1;for(;++h<t.children.length;){let f=t.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=s),n.bulletCurrent=o;let u=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=a,i(),u}function vh(t){let e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Ch(t,e,n,r){let i=vh(n),a=n.bulletCurrent||Qn(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let o=a.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);let s=n.createTracker(r);s.move(a+" ".repeat(o-a.length)),s.shift(o);let l=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,s.current()),c);return l(),u;function c(h,f,p){return f?(p?"":" ".repeat(o))+h:(p?a:a+" ".repeat(o-a.length))+h}}function Sh(t,e,n,r){let i=n.enter("paragraph"),a=n.enter("phrasing"),o=n.containerPhrasing(t,r);return a(),i(),o}var ls=kt(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Th(t,e,n,r){return(t.children.some(function(o){return ls(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function Ah(t){let e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}us.peek=mw;function us(t,e,n,r){let i=Ah(n),a=n.enter("strong"),o=n.createTracker(r),s=o.move(i+i),l=o.move(n.containerPhrasing(t,{after:i,before:s,...o.current()})),u=l.charCodeAt(0),c=Vn(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=Kt(u)+l.slice(1));let h=l.charCodeAt(l.length-1),f=Vn(r.after.charCodeAt(0),h,i);f.inside&&(l=l.slice(0,-1)+Kt(h));let p=o.move(i+i);return a(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},s+l+p}function mw(t,e,n){return n.options.strong||"*"}function Ih(t,e,n,r){return n.safe(t.value,r)}function Mh(t){let e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function zh(t,e,n){let r=(Ui(n)+(n.options.ruleSpaces?" ":"")).repeat(Mh(n));return n.options.ruleSpaces?r.slice(0,-1):r}var Dr={blockquote:uh,break:Xa,code:mh,definition:dh,emphasis:es,hardBreak:Xa,heading:wh,html:ts,image:ns,imageReference:rs,inlineCode:is,link:as,linkReference:ss,list:bh,listItem:Ch,paragraph:Sh,root:Th,strong:us,text:Ih,thematicBreak:zh};function hs(){return{enter:{table:dw,tableData:Eh,tableHeader:Eh,tableRow:xw},exit:{codeText:ww,table:gw,tableData:cs,tableHeader:cs,tableRow:cs}}}function dw(t){let e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function gw(t){this.exit(t),this.data.inTable=void 0}function xw(t){this.enter({type:"tableRow",children:[]},t)}function cs(t){this.exit(t)}function Eh(t){this.enter({type:"tableCell",children:[]},t)}function ww(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,yw));let n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function yw(t,e){return e==="|"?e:t}function fs(t){let e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:l,tableRow:s}};function o(p,m,y,b){return u(c(p,y,b),p.align)}function s(p,m,y,b){let k=h(p,y,b),C=u([k]);return C.slice(0,C.indexOf(`
`))}function l(p,m,y,b){let k=y.enter("tableCell"),C=y.enter("phrasing"),w=y.containerPhrasing(p,{...b,before:a,after:a});return C(),k(),w}function u(p,m){return ah(p,{align:m,alignDelimiters:r,padding:n,stringLength:i})}function c(p,m,y){let b=p.children,k=-1,C=[],w=m.enter("table");for(;++k<b.length;)C[k]=h(b[k],m,y);return w(),C}function h(p,m,y){let b=p.children,k=-1,C=[],w=m.enter("tableRow");for(;++k<b.length;)C[k]=l(b[k],p,m,y);return w(),C}function f(p,m,y){let b=Dr.inlineCode(p,m,y);return y.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function ps(){return{exit:{taskListCheckValueChecked:Nh,taskListCheckValueUnchecked:Nh,paragraph:kw}}}function ms(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:bw}}}function Nh(t){let e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function kw(t){let e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){let n=this.stack[this.stack.length-1];n.type;let r=n.children[0];if(r&&r.type==="text"){let i=e.children,a=-1,o;for(;++a<i.length;){let s=i[a];if(s.type==="paragraph"){o=s;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function bw(t,e,n,r){let i=t.children[0],a=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",s=n.createTracker(r);a&&s.move(o);let l=Dr.listItem(t,e,n,{...r,...s.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(c){return c+o}}function ds(){return[Za(),Ya(),Ka(),hs(),ps()]}function gs(t){return{extensions:[Wa(),Ga(t),Ja(),fs(t),ms()]}}var vw={tokenize:Iw,partial:!0},Fh={tokenize:Mw,partial:!0},Dh={tokenize:zw,partial:!0},Lh={tokenize:Ew,partial:!0},Cw={tokenize:Nw,partial:!0},Oh={name:"wwwAutolink",tokenize:Tw,previous:Bh},Ph={name:"protocolAutolink",tokenize:Aw,previous:Rh},Pt={name:"emailAutolink",tokenize:Sw,previous:_h},bt={};function ws(){return{text:bt}}var yn=48;for(;yn<123;)bt[yn]=Pt,yn++,yn===58?yn=65:yn===91&&(yn=97);bt[43]=Pt;bt[45]=Pt;bt[46]=Pt;bt[95]=Pt;bt[72]=[Pt,Ph];bt[104]=[Pt,Ph];bt[87]=[Pt,Oh];bt[119]=[Pt,Oh];function Sw(t,e,n){let r=this,i,a;return o;function o(h){return!xs(h)||!_h.call(r,r.previous)||ys(r.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),s(h))}function s(h){return xs(h)?(t.consume(h),s):h===64?(t.consume(h),l):n(h)}function l(h){return h===46?t.check(Cw,c,u)(h):h===45||h===95||xe(h)?(a=!0,t.consume(h),l):c(h)}function u(h){return t.consume(h),i=!0,l}function c(h){return a&&i&&Ie(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function Tw(t,e,n){let r=this;return i;function i(o){return o!==87&&o!==119||!Bh.call(r,r.previous)||ys(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(vw,t.attempt(Fh,t.attempt(Dh,a),n),n)(o))}function a(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Aw(t,e,n){let r=this,i="",a=!1;return o;function o(h){return(h===72||h===104)&&Rh.call(r,r.previous)&&!ys(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),t.consume(h),s):n(h)}function s(h){if(Ie(h)&&i.length<5)return i+=String.fromCodePoint(h),t.consume(h),s;if(h===58){let f=i.toLowerCase();if(f==="http"||f==="https")return t.consume(h),l}return n(h)}function l(h){return h===47?(t.consume(h),a?u:(a=!0,l)):n(h)}function u(h){return h===null||fn(h)||W(h)||wt(h)||pn(h)?n(h):t.attempt(Fh,t.attempt(Dh,c),n)(h)}function c(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function Iw(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),a):n(o)}function a(o){return o===null?n(o):e(o)}}function Mw(t,e,n){let r,i,a;return o;function o(u){return u===46||u===95?t.check(Lh,l,s)(u):u===null||W(u)||wt(u)||u!==45&&pn(u)?l(u):(a=!0,t.consume(u),o)}function s(u){return u===95?r=!0:(i=r,r=void 0),t.consume(u),o}function l(u){return i||r||!a?n(u):e(u)}}function zw(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?a(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(Lh,e,a)(o):o===null||W(o)||wt(o)?e(o):(t.consume(o),i)}function a(o){return o===41&&r++,t.consume(o),i}}function Ew(t,e,n){return r;function r(s){return s===33||s===34||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===63||s===95||s===126?(t.consume(s),r):s===38?(t.consume(s),a):s===93?(t.consume(s),i):s===60||s===null||W(s)||wt(s)?e(s):n(s)}function i(s){return s===null||s===40||s===91||W(s)||wt(s)?e(s):r(s)}function a(s){return Ie(s)?o(s):n(s)}function o(s){return s===59?(t.consume(s),r):Ie(s)?(t.consume(s),o):n(s)}}function Nw(t,e,n){return r;function r(a){return t.consume(a),i}function i(a){return xe(a)?n(a):e(a)}}function Bh(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||W(t)}function Rh(t){return!Ie(t)}function _h(t){return!(t===47||xs(t))}function xs(t){return t===43||t===45||t===46||t===95||xe(t)}function ys(t){let e=t.length,n=!1;for(;e--;){let r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}var Fw={tokenize:_w,partial:!0};function ks(){return{document:{[91]:{name:"gfmFootnoteDefinition",tokenize:Pw,continuation:{tokenize:Bw},exit:Rw}},text:{[91]:{name:"gfmFootnoteCall",tokenize:Ow},[93]:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Dw,resolveTo:Lw}}}}function Dw(t,e,n){let r=this,i=r.events.length,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]),o;for(;i--;){let l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return s;function s(l){if(!o||!o._balanced)return n(l);let u=Be(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!a.includes(u.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function Lw(t,e){let n=t.length,r;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){r=t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";let i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;let o={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},t[t.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},l=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",a,e],["exit",a,e],["enter",o,e],["enter",s,e],["exit",s,e],["exit",o,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...l),t}function Ow(t,e,n){let r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]),a=0,o;return s;function s(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(h){if(a>999||h===93&&!o||h===null||h===91||W(h))return n(h);if(h===93){t.exit("chunkString");let f=t.exit("gfmFootnoteCallString");return i.includes(Be(r.sliceSerialize(f)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return W(h)||(o=!0),a++,t.consume(h),h===92?c:u}function c(h){return h===91||h===92||h===93?(t.consume(h),a++,u):u(h)}}function Pw(t,e,n){let r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]),a,o=0,s;return l;function l(m){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(m){return m===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",c):n(m)}function c(m){if(o>999||m===93&&!s||m===null||m===91||W(m))return n(m);if(m===93){t.exit("chunkString");let y=t.exit("gfmFootnoteDefinitionLabelString");return a=Be(r.sliceSerialize(y)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),f}return W(m)||(s=!0),o++,t.consume(m),m===92?h:c}function h(m){return m===91||m===92||m===93?(t.consume(m),o++,c):c(m)}function f(m){return m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),i.includes(a)||i.push(a),R(t,p,"gfmFootnoteDefinitionWhitespace")):n(m)}function p(m){return e(m)}}function Bw(t,e,n){return t.check(yt,e,t.attempt(Fw,e,n))}function Rw(t){t.exit("gfmFootnoteDefinition")}function _w(t,e,n){let r=this;return R(t,i,"gfmFootnoteDefinitionIndent",4+1);function i(a){let o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(a):n(a)}}function bs(t){let n=(t||{}).singleTilde,r={name:"strikethrough",tokenize:a,resolveAll:i};return n==null&&(n=!0),{text:{[126]:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,s){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let u=l;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[l][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";let c={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",c,s],["enter",o[u][1],s],["exit",o[u][1],s],["enter",h,s]],p=s.parser.constructs.insideSpan.null;p&&ye(f,f.length,0,Yt(p,o.slice(u+1,l),s)),ye(f,f.length,0,[["exit",h,s],["enter",o[l][1],s],["exit",o[l][1],s],["exit",c,s]]),ye(o,u-1,l-u+3,f),l=u+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function a(o,s,l){let u=this.previous,c=this.events,h=0;return f;function f(m){return u===126&&c[c.length-1][1].type!=="characterEscape"?l(m):(o.enter("strikethroughSequenceTemporary"),p(m))}function p(m){let y=Ot(u);if(m===126)return h>1?l(m):(o.consume(m),h++,p);if(h<2&&!n)return l(m);let b=o.exit("strikethroughSequenceTemporary"),k=Ot(m);return b._open=!k||k===2&&Boolean(y),b._close=!y||y===2&&Boolean(k),s(m)}}}var ji=class{constructor(){this.map=[]}add(e,n,r){Uw(this,e,n,r)}consume(e){if(this.map.sort(function(a,o){return a[0]-o[0]}),this.map.length===0)return;let n=this.map.length,r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(let a of i)e.push(a);i=r.pop()}this.map.length=0}};function Uw(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function Uh(t,e){let n=!1,r=[];for(;e<t.length;){let i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){let a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function vs(){return{flow:{null:{name:"table",tokenize:jw,resolveAll:qw}}}}function jw(t,e,n){let r=this,i=0,a=0,o;return s;function s(v){let O=r.events.length-1;for(;O>-1;){let P=r.events[O][1].type;if(P==="lineEnding"||P==="linePrefix")O--;else break}let F=O>-1?r.events[O][1].type:null,z=F==="tableHead"||F==="tableRow"?g:l;return z===g&&r.parser.lazy[r.now().line]?n(v):z(v)}function l(v){return t.enter("tableHead"),t.enter("tableRow"),u(v)}function u(v){return v===124||(o=!0,a+=1),c(v)}function c(v){return v===null?n(v):E(v)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),p):n(v):_(v)?R(t,c,"whitespace")(v):(a+=1,o&&(o=!1,i+=1),v===124?(t.enter("tableCellDivider"),t.consume(v),t.exit("tableCellDivider"),o=!0,c):(t.enter("data"),h(v)))}function h(v){return v===null||v===124||W(v)?(t.exit("data"),c(v)):(t.consume(v),v===92?f:h)}function f(v){return v===92||v===124?(t.consume(v),h):h(v)}function p(v){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(v):(t.enter("tableDelimiterRow"),o=!1,_(v)?R(t,m,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(v):m(v))}function m(v){return v===45||v===58?b(v):v===124?(o=!0,t.enter("tableCellDivider"),t.consume(v),t.exit("tableCellDivider"),y):T(v)}function y(v){return _(v)?R(t,b,"whitespace")(v):b(v)}function b(v){return v===58?(a+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(v),t.exit("tableDelimiterMarker"),k):v===45?(a+=1,k(v)):v===null||E(v)?A(v):T(v)}function k(v){return v===45?(t.enter("tableDelimiterFiller"),C(v)):T(v)}function C(v){return v===45?(t.consume(v),C):v===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(v),t.exit("tableDelimiterMarker"),w):(t.exit("tableDelimiterFiller"),w(v))}function w(v){return _(v)?R(t,A,"whitespace")(v):A(v)}function A(v){return v===124?m(v):v===null||E(v)?!o||i!==a?T(v):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(v)):T(v)}function T(v){return n(v)}function g(v){return t.enter("tableRow"),I(v)}function I(v){return v===124?(t.enter("tableCellDivider"),t.consume(v),t.exit("tableCellDivider"),I):v===null||E(v)?(t.exit("tableRow"),e(v)):_(v)?R(t,I,"whitespace")(v):(t.enter("data"),D(v))}function D(v){return v===null||v===124||W(v)?(t.exit("data"),I(v)):(t.consume(v),v===92?L:D)}function L(v){return v===92||v===124?(t.consume(v),D):D(v)}}function qw(t,e){let n=-1,r=!0,i=0,a=[0,0,0,0],o=[0,0,0,0],s=!1,l=0,u,c,h,f=new ji;for(;++n<t.length;){let p=t[n],m=p[1];p[0]==="enter"?m.type==="tableHead"?(s=!1,l!==0&&(jh(f,e,l,u,c),c=void 0,l=0),u={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(n,0,[["enter",u,e]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(r=!0,h=void 0,a=[0,0,0,0],o=[0,n+1,0,0],s&&(s=!1,c={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(n,0,[["enter",c,e]])),i=m.type==="tableDelimiterRow"?2:c?3:1):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(a[1]!==0&&(o[0]=o[1],h=qi(f,e,a,i,void 0,h),a=[0,0,0,0]),o[2]=n)):m.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(o[0]=o[1],h=qi(f,e,a,i,void 0,h)),a=o,o=[a[1],n,0,0])):m.type==="tableHead"?(s=!0,l=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(l=n,a[1]!==0?(o[0]=o[1],h=qi(f,e,a,i,n,h)):o[1]!==0&&(h=qi(f,e,o,i,n,h)),i=0):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&jh(f,e,l,u,c),f.consume(e.events),n=-1;++n<e.events.length;){let p=e.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=Uh(e.events,n))}return t}function qi(t,e,n,r,i,a){let o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",s="tableContent";n[0]!==0&&(a.end=Object.assign({},Zn(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));let l=Zn(e.events,n[1]);if(a={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){let u=Zn(e.events,n[2]),c=Zn(e.events,n[3]),h={type:s,start:Object.assign({},u),end:Object.assign({},c)};if(t.add(n[2],0,[["enter",h,e]]),r!==2){let f=e.events[n[2]],p=e.events[n[3]];if(f[1].end=Object.assign({},p[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){let m=n[2]+1,y=n[3]-n[2]-1;t.add(m,y,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return i!==void 0&&(a.end=Object.assign({},Zn(e.events,i)),t.add(i,0,[["exit",a,e]]),a=void 0),a}function jh(t,e,n,r,i){let a=[],o=Zn(e.events,n);i&&(i.end=Object.assign({},o),a.push(["exit",i,e])),r.end=Object.assign({},o),a.push(["exit",r,e]),t.add(n+1,0,a)}function Zn(t,e){let n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}var Hw={name:"tasklistCheck",tokenize:$w};function Cs(){return{text:{[91]:Hw}}}function $w(t,e,n){let r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),a)}function a(l){return W(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),s):n(l)}function s(l){return E(l)?e(l):_(l)?t.check({tokenize:Vw},e,n)(l):n(l)}}function Vw(t,e,n){return R(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function qh(t){return Si([ws(),ks(),bs(t),vs(),Cs()])}var Qw={};function Hi(t){let e=this,n=t||Qw,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(qh(n)),a.push(ds()),o.push(gs(n))}function Hh(t,e){let n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function $h(t,e){let n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Vh(t,e){let n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function Qh(t,e){let n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Zh(t,e){let n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Wh(t,e){let n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=rt(r.toLowerCase()),a=t.footnoteOrder.indexOf(r),o,s=t.footnoteCounts.get(r);s===void 0?(s=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=a+1,s+=1,t.footnoteCounts.set(r,s);let l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);let u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function Yh(t,e){let n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Gh(t,e){if(t.options.allowDangerousHtml){let n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function $i(t,e){let n=e.referenceType,r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];let i=t.all(e),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});let o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Kh(t,e){let n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return $i(t,e);let i={src:rt(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);let a={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,a),t.applyData(e,a)}function Jh(t,e){let n={src:rt(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);let r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function Xh(t,e){let n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);let r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function ef(t,e){let n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return $i(t,e);let i={href:rt(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);let a={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function tf(t,e){let n={href:rt(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);let r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function nf(t,e,n){let r=t.all(e),i=n?Zw(n):rf(e),a={},o=[];if(typeof e.checked=="boolean"){let c=r[0],h;c&&c.type==="element"&&c.tagName==="p"?h=c:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){let c=r[s];(i||s!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}let l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});let u={type:"element",tagName:"li",properties:a,children:o};return t.patch(e,u),t.applyData(e,u)}function Zw(t){let e=!1;if(t.type==="list"){e=t.spread||!1;let n=t.children,r=-1;for(;!e&&++r<n.length;)e=rf(n[r])}return e}function rf(t){let e=t.spread;return e==null?t.children.length>1:e}function of(t,e){let n={},r=t.all(e),i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){let o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}let a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function af(t,e){let n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function sf(t,e){let n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function lf(t,e){let n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}var Vi=uf("end"),Qi=uf("start");function uf(t){return e;function e(n){let r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Ss(t){let e=Qi(t),n=Vi(t);if(e&&n)return{start:e,end:n}}function cf(t,e){let n=t.all(e),r=n.shift(),i=[];if(r){let o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){let o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},s=Qi(e.children[1]),l=Vi(e.children[e.children.length-1]);s&&l&&(o.position={start:s,end:l}),i.push(o)}let a={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,a),t.applyData(e,a)}function hf(t,e,n){let r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,s=o?o.length:e.children.length,l=-1,u=[];for(;++l<s;){let h=e.children[l],f={},p=o?o[l]:void 0;p&&(f.align=p);let m={type:"element",tagName:a,properties:f,children:[]};h&&(m.children=t.all(h),t.patch(h,m),m=t.applyData(h,m)),u.push(m)}let c={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,c),t.applyData(e,c)}function ff(t,e){let n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mf(t){let e=String(t),n=/\r?\n|\r/g,r=n.exec(e),i=0,a=[];for(;r;)a.push(pf(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return a.push(pf(e.slice(i),i>0,!1)),a.join("")}function pf(t,e,n){let r=0,i=t.length;if(e){let a=t.codePointAt(r);for(;a===9||a===32;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(i-1);for(;a===9||a===32;)i--,a=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function df(t,e){let n={type:"text",value:mf(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function gf(t,e){let n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}var xf={blockquote:Hh,break:$h,code:Vh,delete:Qh,emphasis:Zh,footnoteReference:Wh,heading:Yh,html:Gh,imageReference:Kh,image:Jh,inlineCode:Xh,linkReference:ef,link:tf,listItem:nf,list:of,paragraph:af,root:sf,strong:lf,table:cf,tableCell:ff,tableRow:hf,text:df,thematicBreak:gf,toml:Zi,yaml:Zi,definition:Zi,footnoteDefinition:Zi};function Zi(){}var wf=typeof self=="object"?self:globalThis,Kw=(t,e)=>{let n=(i,a)=>(t.set(a,i),i),r=i=>{if(t.has(i))return t.get(i);let[a,o]=e[i];switch(a){case 0:case-1:return n(o,i);case 1:{let s=n([],i);for(let l of o)s.push(r(l));return s}case 2:{let s=n({},i);for(let[l,u]of o)s[r(l)]=r(u);return s}case 3:return n(new Date(o),i);case 4:{let{source:s,flags:l}=o;return n(new RegExp(s,l),i)}case 5:{let s=n(new Map,i);for(let[l,u]of o)s.set(r(l),r(u));return s}case 6:{let s=n(new Set,i);for(let l of o)s.add(r(l));return s}case 7:{let{name:s,message:l}=o;return n(new wf[s](l),i)}case 8:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{let{buffer:s}=new Uint8Array(o);return n(new DataView(s),o)}}return n(new wf[a](o),i)};return r},Is=t=>Kw(new Map,t)(0);var Wn="",{toString:Jw}={},{keys:Xw}=Object,Lr=t=>{let e=typeof t;if(e!=="object"||!t)return[0,e];let n=Jw.call(t).slice(8,-1);switch(n){case"Array":return[1,Wn];case"Object":return[2,Wn];case"Date":return[3,Wn];case"RegExp":return[4,Wn];case"Map":return[5,Wn];case"Set":return[6,Wn];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},Yi=([t,e])=>t===0&&(e==="function"||e==="symbol"),ey=(t,e,n,r)=>{let i=(o,s)=>{let l=r.push(o)-1;return n.set(s,l),l},a=o=>{if(n.has(o))return n.get(o);let[s,l]=Lr(o);switch(s){case 0:{let c=o;switch(l){case"bigint":s=8,c=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([-1],o)}return i([s,c],o)}case 1:{if(l){let f=o;return l==="DataView"?f=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(o)),i([l,[...f]],o)}let c=[],h=i([s,c],o);for(let f of o)c.push(a(f));return h}case 2:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return a(o.toJSON());let c=[],h=i([s,c],o);for(let f of Xw(o))(t||!Yi(Lr(o[f])))&&c.push([a(f),a(o[f])]);return h}case 3:return i([s,o.toISOString()],o);case 4:{let{source:c,flags:h}=o;return i([s,{source:c,flags:h}],o)}case 5:{let c=[],h=i([s,c],o);for(let[f,p]of o)(t||!(Yi(Lr(f))||Yi(Lr(p))))&&c.push([a(f),a(p)]);return h}case 6:{let c=[],h=i([s,c],o);for(let f of o)(t||!Yi(Lr(f)))&&c.push(a(f));return h}}let{message:u}=o;return i([s,{name:l,message:u}],o)};return a},Ms=(t,{json:e,lossy:n}={})=>{let r=[];return ey(!(e||n),!!e,new Map,r)(t),r};var Yn=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Is(Ms(t,e)):structuredClone(t):(t,e)=>Is(Ms(t,e));function ty(t,e){let n=[{type:"text",value:"\u21A9"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function ny(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Cf(t){let e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||ty,r=t.options.footnoteBackLabel||ny,i=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},s=[],l=-1;for(;++l<t.footnoteOrder.length;){let u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;let c=t.all(u),h=String(u.identifier).toUpperCase(),f=rt(h.toLowerCase()),p=0,m=[],y=t.footnoteCounts.get(h);for(;y!==void 0&&++p<=y;){m.length>0&&m.push({type:"text",value:" "});let C=typeof n=="string"?n:n(l,p);typeof C=="string"&&(C={type:"text",value:C}),m.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,p),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}let b=c[c.length-1];if(b&&b.type==="element"&&b.tagName==="p"){let C=b.children[b.children.length-1];C&&C.type==="text"?C.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...m)}else c.push(...m);let k={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(c,!0)};t.patch(u,k),s.push(k)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Yn(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(s,!0)},{type:"text",value:`
`}]}}var zs={}.hasOwnProperty,ry={};function Tf(t,e){let n=e||ry,r=new Map,i=new Map,a=new Map,o={...xf,...n.handlers},s={all:u,applyData:oy,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:l,options:n,patch:iy,wrap:sy};return ct(t,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){let h=c.type==="definition"?r:i,f=String(c.identifier).toUpperCase();h.has(f)||h.set(f,c)}}),s;function l(c,h){let f=c.type,p=s.handlers[f];if(zs.call(s.handlers,f)&&p)return p(s,c,h);if(s.options.passThrough&&s.options.passThrough.includes(f)){if("children"in c){let{children:y,...b}=c,k=Yn(b);return k.children=s.all(c),k}return Yn(c)}return(s.options.unknownHandler||ay)(s,c,h)}function u(c){let h=[];if("children"in c){let f=c.children,p=-1;for(;++p<f.length;){let m=s.one(f[p],c);if(m){if(p&&f[p-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=Sf(m.value)),!Array.isArray(m)&&m.type==="element")){let y=m.children[0];y&&y.type==="text"&&(y.value=Sf(y.value))}Array.isArray(m)?h.push(...m):h.push(m)}}}return h}}function iy(t,e){t.position&&(e.position=Ss(t))}function oy(t,e){let n=e;if(t&&t.data){let r=t.data.hName,i=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{let o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,Yn(a)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function ay(t,e){let n=e.data||{},r="value"in e&&!(zs.call(n,"hProperties")||zs.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function sy(t,e){let n=[],r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function Sf(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function Gi(t,e){let n=Tf(t,e),r=n.one(t,void 0),i=Cf(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&("children"in a,a.children.push({type:"text",value:`
`},i)),a}function Ki(t,e){return t&&"run"in t?async function(n,r){let i=Gi(n,{file:r,...e});await t.run(i,r)}:function(n,r){return Gi(n,{file:r,...t||e})}}var Af=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];var Bt=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};Bt.prototype.normal={};Bt.prototype.property={};Bt.prototype.space=void 0;function Es(t,e){let n={},r={};for(let i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Bt(n,r,e)}function Or(t){return t.toLowerCase()}var Ee=class{constructor(e,n){this.attribute=n,this.property=e}};Ee.prototype.attribute="";Ee.prototype.booleanish=!1;Ee.prototype.boolean=!1;Ee.prototype.commaOrSpaceSeparated=!1;Ee.prototype.commaSeparated=!1;Ee.prototype.defined=!1;Ee.prototype.mustUseProperty=!1;Ee.prototype.number=!1;Ee.prototype.overloadedBoolean=!1;Ee.prototype.property="";Ee.prototype.spaceSeparated=!1;Ee.prototype.space=void 0;var Pr={};Ho(Pr,{boolean:()=>$,booleanish:()=>we,commaOrSpaceSeparated:()=>je,commaSeparated:()=>Jt,number:()=>M,overloadedBoolean:()=>Ji,spaceSeparated:()=>re});var ly=0,$=kn(),we=kn(),Ji=kn(),M=kn(),re=kn(),Jt=kn(),je=kn();function kn(){return 2**++ly}var Ns=Object.keys(Pr),bn=class extends Ee{constructor(e,n,r,i){let a=-1;if(super(e,n),If(this,"space",i),typeof r=="number")for(;++a<Ns.length;){let o=Ns[a];If(this,Ns[a],(r&Pr[o])===Pr[o])}}};bn.prototype.defined=!0;function If(t,e,n){n&&(t[e]=n)}function it(t){let e={},n={};for(let[r,i]of Object.entries(t.properties)){let a=new bn(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[Or(r)]=r,n[Or(a.attribute)]=r}return new Bt(e,n,t.space)}var Fs=it({properties:{ariaActiveDescendant:null,ariaAtomic:we,ariaAutoComplete:null,ariaBusy:we,ariaChecked:we,ariaColCount:M,ariaColIndex:M,ariaColSpan:M,ariaControls:re,ariaCurrent:null,ariaDescribedBy:re,ariaDetails:null,ariaDisabled:we,ariaDropEffect:re,ariaErrorMessage:null,ariaExpanded:we,ariaFlowTo:re,ariaGrabbed:we,ariaHasPopup:null,ariaHidden:we,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:re,ariaLevel:M,ariaLive:null,ariaModal:we,ariaMultiLine:we,ariaMultiSelectable:we,ariaOrientation:null,ariaOwns:re,ariaPlaceholder:null,ariaPosInSet:M,ariaPressed:we,ariaReadOnly:we,ariaRelevant:null,ariaRequired:we,ariaRoleDescription:re,ariaRowCount:M,ariaRowIndex:M,ariaRowSpan:M,ariaSelected:we,ariaSetSize:M,ariaSort:null,ariaValueMax:M,ariaValueMin:M,ariaValueNow:M,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Xi(t,e){return e in t?t[e]:e}function eo(t,e){return Xi(t,e.toLowerCase())}var Mf=it({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Jt,acceptCharset:re,accessKey:re,action:null,allow:null,allowFullScreen:$,allowPaymentRequest:$,allowUserMedia:$,alt:null,as:null,async:$,autoCapitalize:null,autoComplete:re,autoFocus:$,autoPlay:$,blocking:re,capture:null,charSet:null,checked:$,cite:null,className:re,cols:M,colSpan:null,content:null,contentEditable:we,controls:$,controlsList:re,coords:M|Jt,crossOrigin:null,data:null,dateTime:null,decoding:null,default:$,defer:$,dir:null,dirName:null,disabled:$,download:Ji,draggable:we,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:$,formTarget:null,headers:re,height:M,hidden:Ji,high:M,href:null,hrefLang:null,htmlFor:re,httpEquiv:re,id:null,imageSizes:null,imageSrcSet:null,inert:$,inputMode:null,integrity:null,is:null,isMap:$,itemId:null,itemProp:re,itemRef:re,itemScope:$,itemType:re,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:$,low:M,manifest:null,max:null,maxLength:M,media:null,method:null,min:null,minLength:M,multiple:$,muted:$,name:null,nonce:null,noModule:$,noValidate:$,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:$,optimum:M,pattern:null,ping:re,placeholder:null,playsInline:$,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:$,referrerPolicy:null,rel:re,required:$,reversed:$,rows:M,rowSpan:M,sandbox:re,scope:null,scoped:$,seamless:$,selected:$,shadowRootClonable:$,shadowRootDelegatesFocus:$,shadowRootMode:null,shape:null,size:M,sizes:null,slot:null,span:M,spellCheck:we,src:null,srcDoc:null,srcLang:null,srcSet:null,start:M,step:null,style:null,tabIndex:M,target:null,title:null,translate:null,type:null,typeMustMatch:$,useMap:null,value:we,width:M,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:re,axis:null,background:null,bgColor:null,border:M,borderColor:null,bottomMargin:M,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:$,declare:$,event:null,face:null,frame:null,frameBorder:null,hSpace:M,leftMargin:M,link:null,longDesc:null,lowSrc:null,marginHeight:M,marginWidth:M,noResize:$,noHref:$,noShade:$,noWrap:$,object:null,profile:null,prompt:null,rev:null,rightMargin:M,rules:null,scheme:null,scrolling:we,standby:null,summary:null,text:null,topMargin:M,valueType:null,version:null,vAlign:null,vLink:null,vSpace:M,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:$,disableRemotePlayback:$,prefix:null,property:null,results:M,security:null,unselectable:null},space:"html",transform:eo});var zf=it({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:je,accentHeight:M,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:M,amplitude:M,arabicForm:null,ascent:M,attributeName:null,attributeType:null,azimuth:M,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:M,by:null,calcMode:null,capHeight:M,className:re,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:M,diffuseConstant:M,direction:null,display:null,dur:null,divisor:M,dominantBaseline:null,download:$,dx:null,dy:null,edgeMode:null,editable:null,elevation:M,enableBackground:null,end:null,event:null,exponent:M,externalResourcesRequired:null,fill:null,fillOpacity:M,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Jt,g2:Jt,glyphName:Jt,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:M,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:M,horizOriginX:M,horizOriginY:M,id:null,ideographic:M,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:M,k:M,k1:M,k2:M,k3:M,k4:M,kernelMatrix:je,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:M,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:M,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:M,overlineThickness:M,paintOrder:null,panose1:null,path:null,pathLength:M,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:re,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:M,pointsAtY:M,pointsAtZ:M,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:je,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:je,rev:je,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:je,requiredFeatures:je,requiredFonts:je,requiredFormats:je,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:M,specularExponent:M,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:M,strikethroughThickness:M,string:null,stroke:null,strokeDashArray:je,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:M,strokeOpacity:M,strokeWidth:null,style:null,surfaceScale:M,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:je,tabIndex:M,tableValues:null,target:null,targetX:M,targetY:M,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:je,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:M,underlineThickness:M,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:M,values:null,vAlphabetic:M,vMathematical:M,vectorEffect:null,vHanging:M,vIdeographic:M,version:null,vertAdvY:M,vertOriginX:M,vertOriginY:M,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:M,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Xi});var Ds=it({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}});var Ls=it({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:eo});var Os=it({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}});var uy=/[A-Z]/g,Ef=/-[a-z]/g,cy=/^data[-\w.:]+$/i;function Ps(t,e){let n=Or(e),r=e,i=Ee;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&cy.test(e)){if(e.charAt(4)==="-"){let a=e.slice(5).replace(Ef,fy);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{let a=e.slice(4);if(!Ef.test(a)){let o=a.replace(uy,hy);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=bn}return new i(r,e)}function hy(t){return"-"+t.toLowerCase()}function fy(t){return t.charAt(1).toUpperCase()}var Nf=Es([Fs,Mf,Ds,Ls,Os],"html"),to=Es([Fs,zf,Ds,Ls,Os],"svg");var py=/["&'<>`]/g,my=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dy=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,gy=/[|\\{}()[\]^$+*?.]/g,Ff=new WeakMap;function Df(t,e){if(t=t.replace(e.subset?xy(e.subset):py,r),e.subset||e.escapeOnly)return t;return t.replace(my,n).replace(dy,r);function n(i,a,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(a+2),e)}function r(i,a,o){return e.format(i.charCodeAt(0),o.charCodeAt(a+1),e)}}function xy(t){let e=Ff.get(t);return e||(e=wy(t),Ff.set(t,e)),e}function wy(t){let e=[],n=-1;for(;++n<t.length;)e.push(t[n].replace(gy,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}var yy=/[\dA-Fa-f]/;function Lf(t,e,n){let r="&#x"+t.toString(16).toUpperCase();return n&&e&&!yy.test(String.fromCharCode(e))?r:r+";"}var ky=/\d/;function Of(t,e,n){let r="&#"+String(t);return n&&e&&!ky.test(String.fromCharCode(e))?r:r+";"}var Pf=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"];var no={nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",fnof:"\u0192",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",bull:"\u2022",hellip:"\u2026",prime:"\u2032",Prime:"\u2033",oline:"\u203E",frasl:"\u2044",weierp:"\u2118",image:"\u2111",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",lang:"\u2329",rang:"\u232A",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",quot:'"',amp:"&",lt:"<",gt:">",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",permil:"\u2030",lsaquo:"\u2039",rsaquo:"\u203A",euro:"\u20AC"};var Bf=["cent","copy","divide","gt","lt","not","para","times"];var Rf={}.hasOwnProperty,Bs={},ro;for(ro in no)Rf.call(no,ro)&&(Bs[no[ro]]=ro);var by=/[^\dA-Za-z]/;function _f(t,e,n,r){let i=String.fromCharCode(t);if(Rf.call(Bs,i)){let a=Bs[i],o="&"+a;return n&&Pf.includes(a)&&!Bf.includes(a)&&(!r||e&&e!==61&&by.test(String.fromCharCode(e)))?o:o+";"}return""}function Uf(t,e,n){let r=Lf(t,e,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=_f(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){let a=Of(t,e,n.omitOptionalSemicolons);a.length<r.length&&(r=a)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function Rt(t,e){return Df(t,Object.assign({format:Uf},e))}var vy=/^>|^->|<!--|-->|--!>|<!-$/g,Cy=[">"],Sy=["<",">"];function jf(t,e,n,r){return r.settings.bogusComments?"<?"+Rt(t.value,Object.assign({},r.settings.characterReferences,{subset:Cy}))+">":"<!--"+t.value.replace(vy,i)+"-->";function i(a){return Rt(a,Object.assign({},r.settings.characterReferences,{subset:Sy}))}}function qf(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function Hf(t,e){let n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function $f(t){return t.join(" ").trim()}var Ty=/[ \t\n\f\r]/g;function Ye(t){return typeof t=="object"?t.type==="text"?Vf(t.value):!1:Vf(t)}function Vf(t){return t.replace(Ty,"")===""}var ke=Qf(1),Rs=Qf(-1),Ay=[];function Qf(t){return e;function e(n,r,i){let a=n?n.children:Ay,o=(r||0)+t,s=a[o];if(!i)for(;s&&Ye(s);)o+=t,s=a[o];return s}}var Iy={}.hasOwnProperty;function io(t){return e;function e(n,r,i){return Iy.call(t,n.tagName)&&t[n.tagName](n,r,i)}}var Br=io({body:zy,caption:_s,colgroup:_s,dd:Dy,dt:Fy,head:_s,html:My,li:Ny,optgroup:Ly,option:Oy,p:Ey,rp:Zf,rt:Zf,tbody:By,td:Wf,tfoot:Ry,th:Wf,thead:Py,tr:_y});function _s(t,e,n){let r=ke(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&Ye(r.value.charAt(0)))}function My(t,e,n){let r=ke(n,e);return!r||r.type!=="comment"}function zy(t,e,n){let r=ke(n,e);return!r||r.type!=="comment"}function Ey(t,e,n){let r=ke(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function Ny(t,e,n){let r=ke(n,e);return!r||r.type==="element"&&r.tagName==="li"}function Fy(t,e,n){let r=ke(n,e);return Boolean(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function Dy(t,e,n){let r=ke(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function Zf(t,e,n){let r=ke(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function Ly(t,e,n){let r=ke(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function Oy(t,e,n){let r=ke(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function Py(t,e,n){let r=ke(n,e);return Boolean(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function By(t,e,n){let r=ke(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function Ry(t,e,n){return!ke(n,e)}function _y(t,e,n){let r=ke(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function Wf(t,e,n){let r=ke(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}var Yf=io({body:qy,colgroup:Hy,head:jy,html:Uy,tbody:$y});function Uy(t){let e=ke(t,-1);return!e||e.type!=="comment"}function jy(t){let e=new Set;for(let r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}let n=t.children[0];return!n||n.type==="element"}function qy(t){let e=ke(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&Ye(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function Hy(t,e,n){let r=Rs(n,e),i=ke(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&Br(r,n.children.indexOf(r),n)?!1:Boolean(i&&i.type==="element"&&i.tagName==="col")}function $y(t,e,n){let r=Rs(n,e),i=ke(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&Br(r,n.children.indexOf(r),n)?!1:Boolean(i&&i.type==="element"&&i.tagName==="tr")}var oo={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Gf(t,e,n,r){let i=r.schema,a=i.space==="svg"?!1:r.settings.omitOptionalTags,o=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase()),s=[],l;i.space==="html"&&t.tagName==="svg"&&(r.schema=to);let u=Vy(r,t.properties),c=r.all(i.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=i,c&&(o=!1),(u||!a||!Yf(t,e,n))&&(s.push("<",t.tagName,u?" "+u:""),o&&(i.space==="svg"||r.settings.closeSelfClosing)&&(l=u.charAt(u.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&s.push(" "),s.push("/")),s.push(">")),s.push(c),!o&&(!a||!Br(t,e,n))&&s.push("</"+t.tagName+">"),s.join("")}function Vy(t,e){let n=[],r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){let a=Qy(t,i,e[i]);a&&n.push(a)}}for(;++r<n.length;){let a=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&a!=='"'&&a!=="'"&&(n[r]+=" ")}return n.join("")}function Qy(t,e,n){let r=Ps(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,a=t.settings.allowDangerousCharacters?0:1,o=t.quote,s;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=Boolean(n)),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";let l=Rt(r.attribute,Object.assign({},t.settings.characterReferences,{subset:oo.name[i][a]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?Hf:$f)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(s=Rt(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:oo.unquoted[i][a]}))),s!==n&&(t.settings.quoteSmart&&qn(n,o)>qn(n,t.alternative)&&(o=t.alternative),s=o+Rt(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?oo.single:oo.double)[i][a],attribute:!0}))+o),l+(s&&"="+s))}var Zy=["<","&"];function ao(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Rt(t.value,Object.assign({},r.settings.characterReferences,{subset:Zy}))}function Kf(t,e,n,r){return r.settings.allowDangerousHtml?t.value:ao(t,e,n,r)}function Jf(t,e,n,r){return r.all(t)}var Xf=lh("type",{invalid:Wy,unknown:Yy,handlers:{comment:jf,doctype:qf,element:Gf,raw:Kf,root:Jf,text:ao}});function Wy(t){throw new Error("Expected node, not `"+t+"`")}function Yy(t){let e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}var Gy={},Ky={},Jy=[];function Us(t,e){let n=e||Gy,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:Xy,all:ek,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||Af,characterReferences:n.characterReferences||Ky,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?to:Nf,quote:r,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function Xy(t,e,n){return Xf(t,e,n,this)}function ek(t){let e=[],n=t&&t.children||Jy,r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function so(t){let e=this,n={...e.data("settings"),...t};e.compiler=r;function r(i){return Us(i,n)}}var Rr=function(t,e,n,r,i){let a=Xt(e);if(n!=null&&(typeof n!="number"||n<0||n===Number.POSITIVE_INFINITY))throw new Error("Expected positive finite `index`");if(r!=null&&(!r.type||!r.children))throw new Error("Expected valid `parent`");if(n==null!=(r==null))throw new Error("Expected both `index` and `parent`");return ep(t)?a.call(i,t,n,r):!1},Xt=function(t){if(t==null)return rk;if(typeof t=="string")return nk(t);if(typeof t=="object")return tk(t);if(typeof t=="function")return js(t);throw new Error("Expected function, string, or array as `test`")};function tk(t){let e=[],n=-1;for(;++n<t.length;)e[n]=Xt(t[n]);return js(r);function r(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function nk(t){return js(e);function e(n){return n.tagName===t}}function js(t){return e;function e(n,r,i){return Boolean(ep(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function rk(t){return Boolean(t&&typeof t=="object"&&"type"in t&&t.type==="element"&&"tagName"in t&&typeof t.tagName=="string")}function ep(t){return t!==null&&typeof t=="object"&&"type"in t&&"tagName"in t}var vn=Xt(function(t){return t.tagName==="audio"||t.tagName==="canvas"||t.tagName==="embed"||t.tagName==="iframe"||t.tagName==="img"||t.tagName==="math"||t.tagName==="object"||t.tagName==="picture"||t.tagName==="svg"||t.tagName==="video"});var tp=["address","article","aside","blockquote","body","br","caption","center","col","colgroup","dd","dialog","dir","div","dl","dt","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","legend","li","li","listing","main","menu","nav","ol","optgroup","option","p","plaintext","pre","section","summary","table","tbody","td","td","tfoot","th","th","thead","tr","ul","wbr","xmp"];var np=["button","input","select","textarea"];var rp=["area","base","basefont","dialog","datalist","head","link","meta","noembed","noframes","param","rp","script","source","style","template","track","title"];var ik={},qs=kt(["comment","doctype"]);function Hs(t,e){op(t,{collapse:hk((e||ik).newlines?uk:ck),whitespace:"normal"})}function op(t,e){if("children"in t){let n={...e};return(t.type==="root"||lp(t))&&(n.before=!0,n.after=!0),n.whitespace=fk(t,e),ak(t,n)}if(t.type==="text"){if(e.whitespace==="normal")return ok(t,e);e.whitespace==="nowrap"&&(t.value=e.collapse(t.value))}return{ignore:qs(t),stripAtStart:!1,remove:!1}}function ok(t,e){let n=e.collapse(t.value),r={ignore:!1,stripAtStart:!1,remove:!1},i=0,a=n.length;return e.before&&ip(n.charAt(0))&&i++,i!==a&&ip(n.charAt(a-1))&&(e.after?a--:r.stripAtStart=!0),i===a?r.remove=!0:t.value=n.slice(i,a),r}function ak(t,e){let n=e.before,r=e.after,i=t.children,a=i.length,o=-1;for(;++o<a;){let s=op(i[o],{...e,after:ap(i,o,r),before:n});s.remove?(i.splice(o,1),o--,a--):s.ignore||(n=s.stripAtStart),sp(i[o])&&(n=!1)}return{ignore:!1,stripAtStart:Boolean(n||r),remove:!1}}function ap(t,e,n){for(;++e<t.length;){let r=t[e],i=sk(r);if(i===void 0&&"children"in r&&!lk(r)&&(i=ap(r.children,-1)),typeof i=="boolean")return i}return n}function sk(t){if(t.type==="element"){if(sp(t))return!1;if(lp(t))return!0}else if(t.type==="text"){if(!Ye(t))return!1}else if(!qs(t))return!1}function sp(t){return vn(t)||Rr(t,np)}function lp(t){return Rr(t,tp)}function lk(t){return Boolean(t.type==="element"&&t.properties.hidden)||qs(t)||Rr(t,rp)}function ip(t){return t===" "||t===`
`}function uk(t){let e=/\r?\n|\r/.exec(t);return e?e[0]:" "}function ck(){return" "}function hk(t){return e;function e(n){return String(n).replace(/[\t\n\v\f\r ]+/g,t)}}function fk(t,e){if("tagName"in t&&t.properties)switch(t.tagName){case"listing":case"plaintext":case"script":case"style":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return t.properties.wrap?"pre-wrap":"pre";case"td":case"th":return t.properties.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap";default:}return e.whitespace}var pk={}.hasOwnProperty;function $s(t,e){let n=t.type==="element"&&pk.call(t.properties,e)&&t.properties[e];return n!=null&&n!==!1}var mk=new Set(["pingback","prefetch","stylesheet"]);function Vs(t){if(t.type!=="element"||t.tagName!=="link")return!1;if(t.properties.itemProp)return!0;let e=t.properties.rel,n=-1;if(!Array.isArray(e)||e.length===0)return!1;for(;++n<e.length;)if(!mk.has(String(e[n])))return!1;return!0}var dk=Xt(["a","abbr","area","b","bdi","bdo","br","button","cite","code","data","datalist","del","dfn","em","i","input","ins","kbd","keygen","label","map","mark","meter","noscript","output","progress","q","ruby","s","samp","script","select","small","span","strong","sub","sup","template","textarea","time","u","var","wbr"]),gk=Xt("meta");function Qs(t){return Boolean(t.type==="text"||dk(t)||vn(t)||Vs(t)||gk(t)&&$s(t,"itemProp"))}var Zs=["pre","script","style","textarea"];var xk={};function Ys(t,e){let n=e||xk,r={blanks:n.blanks||[],head:!1,indentInitial:n.indentInitial!==!1,indent:typeof n.indent=="number"?" ".repeat(n.indent):typeof n.indent=="string"?n.indent:"  "};Hs(t,{newlines:!0}),wn(t,i);function i(o,s){if(!("children"in o))return;if(o.type==="element"&&o.tagName==="head"&&(r.head=!0),r.head&&o.type==="element"&&o.tagName==="body"&&(r.head=!1),o.type==="element"&&Zs.includes(o.tagName))return Hn;if(o.children.length===0||!Ws(r,o))return;let l=s.length;r.indentInitial||l--;let u=!1;for(let f of o.children)(f.type==="comment"||f.type==="text")&&(f.value.includes(`
`)&&(u=!0),f.value=f.value.replace(/ *\n/g,"$&"+r.indent.repeat(l)));let c=[],h;for(let f of o.children)(Ws(r,f)||u&&!h)&&(a(c,l,f),u=!0),h=f,c.push(f);h&&(u||Ws(r,h))&&(Ye(h)&&(c.pop(),h=c[c.length-1]),a(c,l-1)),o.children=c}function a(o,s,l){let u=o[o.length-1],c=u&&Ye(u)?o[o.length-2]:u,h=(up(r,c)&&up(r,l)?`

`:`
`)+r.indent.repeat(Math.max(s,0));u&&u.type==="text"?u.value=Ye(u)?h:u.value+h:o.push({type:"text",value:h})}}function up(t,e){return Boolean(e&&e.type==="element"&&t.blanks.length>0&&t.blanks.includes(e.tagName))}function Ws(t,e){return e.type==="root"||(e.type==="element"?t.head||e.tagName==="script"||vn(e)||!Qs(e):!1)}function lo(t){return function(e){Ys(e,t)}}var Gn={horizontalTab:-2,virtualSpace:-1,nul:0,eof:null,space:32};function cp(t){return t<Gn.nul||t===Gn.space}function Gs(t){return t<Gn.horizontalTab}function hp(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.aliasDivider||"|",n=e,r="![[",i="]]";function a(s,l,u){var c,h,f=0,p=0,m=0;return y;function y(g){return g!==r.charCodeAt(p)?u(g):(s.enter("wikiLink"),s.enter("wikiLinkMarker"),b(g))}function b(g){return p===r.length?(s.exit("wikiLinkMarker"),k(g)):g!==r.charCodeAt(p)?u(g):(s.consume(g),p++,b)}function k(g){return Gs(g)||g===Gn.eof?u(g):(s.enter("wikiLinkData"),s.enter("wikiLinkTarget"),C(g))}function C(g){return g===n.charCodeAt(f)?c?(s.exit("wikiLinkTarget"),s.enter("wikiLinkAliasMarker"),w(g)):u(g):g===i.charCodeAt(m)?c?(s.exit("wikiLinkTarget"),s.exit("wikiLinkData"),s.enter("wikiLinkMarker"),T(g)):u(g):Gs(g)||g===Gn.eof?u(g):(cp(g)||(c=!0),s.consume(g),C)}function w(g){return f===n.length?(s.exit("wikiLinkAliasMarker"),s.enter("wikiLinkAlias"),A(g)):g!==n.charCodeAt(f)?u(g):(s.consume(g),f++,w)}function A(g){return g===i.charCodeAt(m)?h?(s.exit("wikiLinkAlias"),s.exit("wikiLinkData"),s.enter("wikiLinkMarker"),T(g)):u(g):Gs(g)||g===Gn.eof?u(g):(cp(g)||(h=!0),s.consume(g),A)}function T(g){return m===i.length?(s.exit("wikiLinkMarker"),s.exit("wikiLink"),l(g)):g!==i.charCodeAt(m)?u(g):(s.consume(g),m++,T)}}var o={tokenize:a};return{text:{33:o}}}var wk={553:t=>{t.exports=function(e){var n,r;return e._compiled||(n=e.before?"(?:"+e.before+")":"",r=e.after?"(?:"+e.after+")":"",e.atBreak&&(n="[\\r\\n][\\t ]*"+n),e._compiled=new RegExp((n?"("+n+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(r||""),"g")),e._compiled}},112:t=>{function e(n,r,i){var a;if(!r)return i;for(typeof r=="string"&&(r=[r]),a=-1;++a<r.length;)if(n.indexOf(r[a])!==-1)return!0;return!1}t.exports=function(n,r){return e(n,r.inConstruct,!0)&&!e(n,r.notInConstruct)}},113:(t,e,n)=>{t.exports=function(s,l,u){for(var c,h,f,p,m,y,b,k,C=(u.before||"")+(l||"")+(u.after||""),w=[],A=[],T={},g=-1;++g<s.unsafe.length;)if(p=s.unsafe[g],i(s.stack,p))for(m=r(p);y=m.exec(C);)c="before"in p||p.atBreak,h="after"in p,f=y.index+(c?y[1].length:0),w.indexOf(f)===-1?(w.push(f),T[f]={before:c,after:h}):(T[f].before&&!c&&(T[f].before=!1),T[f].after&&!h&&(T[f].after=!1));for(w.sort(a),b=u.before?u.before.length:0,k=C.length-(u.after?u.after.length:0),g=-1;++g<w.length;)(f=w[g])<b||f>=k||f+1<k&&w[g+1]===f+1&&T[f].after&&!T[f+1].before&&!T[f+1].after||(b!==f&&A.push(o(C.slice(b,f),"\\")),b=f,!/[!-/:-@[-`{-~]/.test(C.charAt(f))||u.encode&&u.encode.indexOf(C.charAt(f))!==-1?(A.push("&#x"+C.charCodeAt(f).toString(16).toUpperCase()+";"),b++):A.push("\\"));return A.push(o(C.slice(b,k),u.after)),A.join("")};var r=n(553),i=n(112);function a(s,l){return s-l}function o(s,l){for(var u,c=/\\(?=[!-/:-@[-`{-~])/g,h=[],f=[],p=-1,m=0,y=s+l;u=c.exec(y);)h.push(u.index);for(;++p<h.length;)m!==h[p]&&f.push(s.slice(m,h[p])),f.push("\\"),m=h[p];return f.push(s.slice(m)),f.join("")}}},fp={};function vt(t){var e=fp[t];if(e!==void 0)return e.exports;var n=fp[t]={exports:{}};return wk[t](n,n.exports,vt),n.exports}vt.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return vt.d(e,{a:e}),e},vt.d=(t,e)=>{for(var n in e)vt.o(e,n)&&!vt.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},vt.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Ks={};(()=>{function t(i={}){let a=i.permalinks||[],o=i.pageResolver||(f=>[f.replace(/ /g,"_").toLowerCase()]),s=i.newClassName||"new",l=i.wikiLinkClassName||"internal",u=i.hrefTemplate||(f=>`#/page/${f}`),c;function h(f){return f[f.length-1]}return{enter:{wikiLink:function(f){c={type:"wikiLink",value:null,data:{alias:null,permalink:null,exists:null}},this.enter(c,f)}},exit:{wikiLinkTarget:function(f){let p=this.sliceSerialize(f);h(this.stack).value=p},wikiLinkAlias:function(f){let p=this.sliceSerialize(f);h(this.stack).data.alias=p},wikiLink:function(f){this.exit(f);let p=c,m=o(p.value),y=m.find(A=>a.indexOf(A)!==-1),b=y!==void 0,k;k=b?y:m[0]||"";let C=p.value;p.data.alias&&(C=p.data.alias);let w=l;b||(w+=" "+s),p.data.alias=C,p.data.permalink=k,p.data.exists=b,p.data.hName="a",p.data.hProperties={className:w,href:u(k)},p.data.hChildren=[{type:"text",value:C}]}}}}vt.d(Ks,{V:()=>t,x:()=>r});var e=vt(113),n=vt.n(e);function r(i={}){let a=i.aliasDivider||":";return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]},{character:"]",inConstruct:["label","reference"]}],handlers:{wikiLink:function(o,s,l){let u=l.enter("wikiLink"),c=n()(l,o.value,{before:"[",after:"]"}),h=n()(l,o.data.alias,{before:"[",after:"]"}),f;return f=h!==c?`[[${c}${a}${h}]]`:`[[${c}]]`,u(),f}}}}})();var pp=Ks.V,mp=Ks.x;function Kn(t,e,n){let r={type:String(t)};return n==null&&(typeof e=="string"||Array.isArray(e))?n=e:Object.assign(r,e),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r}var cm=require("obsidian");var ft=require("obsidian"),Yp=Ft(require("fs")),Hr=Ft(require("crypto"));var gp=Ft(dp(),1);function qe(t){return new DataView(t.buffer,t.byteOffset)}var xp={len:1,get(t,e){return qe(t).getUint8(e)},put(t,e,n){return qe(t).setUint8(e,n),e+1}},fe={len:2,get(t,e){return qe(t).getUint16(e,!0)},put(t,e,n){return qe(t).setUint16(e,n,!0),e+2}},Jn={len:2,get(t,e){return qe(t).getUint16(e)},put(t,e,n){return qe(t).setUint16(e,n),e+2}};var be={len:4,get(t,e){return qe(t).getUint32(e,!0)},put(t,e,n){return qe(t).setUint32(e,n,!0),e+4}},wp={len:4,get(t,e){return qe(t).getUint32(e)},put(t,e,n){return qe(t).setUint32(e,n),e+4}};var yp={len:4,get(t,e){return qe(t).getInt32(e)},put(t,e,n){return qe(t).setInt32(e,n),e+4}};var kp={len:8,get(t,e){return qe(t).getBigUint64(e,!0)},put(t,e,n){return qe(t).setBigUint64(e,n,!0),e+8}};var He=class{constructor(e,n){this.len=e,this.encoding=n,this.textDecoder=new TextDecoder(n)}get(e,n){return this.textDecoder.decode(e.subarray(n,n+this.len))}};var kk="End-Of-Stream",de=class extends Error{constructor(){super(kk),this.name="EndOfStreamError"}},Cn=class extends Error{constructor(e="The operation was aborted"){super(e),this.name="AbortError"}};var Sn=class{constructor(){this.endOfStream=!1,this.interrupted=!1,this.peekQueue=[]}async peek(e,n=!1){let r=await this.read(e,n);return this.peekQueue.push(e.subarray(0,r)),r}async read(e,n=!1){if(e.length===0)return 0;let r=this.readFromPeekBuffer(e);if(this.endOfStream||(r+=await this.readRemainderFromStream(e.subarray(r),n)),r===0)throw new de;return r}readFromPeekBuffer(e){let n=e.length,r=0;for(;this.peekQueue.length>0&&n>0;){let i=this.peekQueue.pop();if(!i)throw new Error("peekData should be defined");let a=Math.min(i.length,n);e.set(i.subarray(0,a),r),r+=a,n-=a,a<i.length&&this.peekQueue.push(i.subarray(a))}return r}async readRemainderFromStream(e,n){let r=0;for(;r<e.length&&!this.endOfStream;){if(this.interrupted)throw new Cn;let i=await this.readFromStream(e.subarray(r),n);if(i===0)break;r+=i}if(!n&&r<e.length)throw new de;return r}};var uo=class extends Sn{constructor(e){super(),this.reader=e}async abort(){return this.close()}async close(){this.reader.releaseLock()}};var _r=class extends uo{async readFromStream(e,n){if(e.length===0)return 0;let r=await this.reader.read(new Uint8Array(e.length),{min:n?void 0:e.length});return r.done&&(this.endOfStream=r.done),r.value?(e.set(r.value),r.value.length):0}};var Xn=class extends Sn{constructor(e){super(),this.reader=e,this.buffer=null}writeChunk(e,n){let r=Math.min(n.length,e.length);return e.set(n.subarray(0,r)),r<n.length?this.buffer=n.subarray(r):this.buffer=null,r}async readFromStream(e,n){if(e.length===0)return 0;let r=0;for(this.buffer&&(r+=this.writeChunk(e,this.buffer));r<e.length&&!this.endOfStream;){let i=await this.reader.read();if(i.done){this.endOfStream=!0;break}i.value&&(r+=this.writeChunk(e.subarray(r),i.value))}if(r===0&&this.endOfStream)throw new de;return r}abort(){return this.interrupted=!0,this.reader.cancel()}async close(){await this.abort(),this.reader.releaseLock()}};function Xs(t){try{let e=t.getReader({mode:"byob"});return e instanceof ReadableStreamDefaultReader?new Xn(e):new _r(e)}catch(e){if(e instanceof TypeError)return new Xn(t.getReader());throw e}}var Tn=class{constructor(e){this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=e==null?void 0:e.onClose,e!=null&&e.abortSignal&&e.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken(e,n=this.position){let r=new Uint8Array(e.len);if(await this.readBuffer(r,{position:n})<e.len)throw new de;return e.get(r,0)}async peekToken(e,n=this.position){let r=new Uint8Array(e.len);if(await this.peekBuffer(r,{position:n})<e.len)throw new de;return e.get(r,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new de;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new de;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){let n=this.fileInfo.size-this.position;if(e>n)return this.position+=n,n}return this.position+=e,e}async close(){var e;await this.abort(),await((e=this.onClose)==null?void 0:e.call(this))}normalizeOptions(e,n){if(!this.supportsRandomAccess()&&n&&n.position!==void 0&&n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return{mayBeLess:!1,offset:0,length:e.length,position:this.position,...n}}abort(){return Promise.resolve()}};var vk=256e3,co=class extends Tn{constructor(e,n){var r;super(n),this.streamReader=e,this.fileInfo=(r=n==null?void 0:n.fileInfo)!=null?r:{}}async readBuffer(e,n){let r=this.normalizeOptions(e,n),i=r.position-this.position;if(i>0)return await this.ignore(i),this.readBuffer(e,n);if(i<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;let a=await this.streamReader.read(e.subarray(0,r.length),r.mayBeLess);if(this.position+=a,(!n||!n.mayBeLess)&&a<r.length)throw new de;return a}async peekBuffer(e,n){let r=this.normalizeOptions(e,n),i=0;if(r.position){let a=r.position-this.position;if(a>0){let o=new Uint8Array(r.length+a);return i=await this.peekBuffer(o,{mayBeLess:r.mayBeLess}),e.set(o.subarray(a)),i-a}if(a<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{i=await this.streamReader.peek(e.subarray(0,r.length),r.mayBeLess)}catch(a){if(n!=null&&n.mayBeLess&&a instanceof de)return 0;throw a}if(!r.mayBeLess&&i<r.length)throw new de}return i}async ignore(e){let n=Math.min(vk,e),r=new Uint8Array(n),i=0;for(;i<e;){let a=e-i,o=await this.readBuffer(r,{length:Math.min(n,a)});if(o<0)return o;i+=o}return i}abort(){return this.streamReader.abort()}async close(){return this.streamReader.close()}supportsRandomAccess(){return!1}};var ho=class extends Tn{constructor(e,n){var r;super(n),this.uint8Array=e,this.fileInfo={...(r=n==null?void 0:n.fileInfo)!=null?r:{},size:e.length}}async readBuffer(e,n){n!=null&&n.position&&(this.position=n.position);let r=await this.peekBuffer(e,n);return this.position+=r,r}async peekBuffer(e,n){let r=this.normalizeOptions(e,n),i=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&i<r.length)throw new de;return e.set(this.uint8Array.subarray(r.position,r.position+i)),i}close(){return super.close()}supportsRandomAccess(){return!0}setPosition(e){this.position=e}};function bp(t,e){let n=Xs(t),r=e!=null?e:{},i=r.onClose;return r.onClose=async()=>{if(await n.close(),i)return i()},new co(n,r)}function vp(t,e){return new ho(t,e)}var Ke=Uint8Array,er=Uint16Array,Sk=Int32Array,Cp=new Ke([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sp=new Ke([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tk=new Ke([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tp=function(t,e){for(var n=new er(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new Sk(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},Ap=Tp(Cp,2),Ip=Ap.b,Ak=Ap.r;Ip[28]=258,Ak[258]=28;var Mp=Tp(Sp,0),Ik=Mp.b,LD=Mp.r,nl=new er(32768);for(ee=0;ee<32768;++ee)_t=(ee&43690)>>1|(ee&21845)<<1,_t=(_t&52428)>>2|(_t&13107)<<2,_t=(_t&61680)>>4|(_t&3855)<<4,nl[ee]=((_t&65280)>>8|(_t&255)<<8)>>1;var _t,ee,Ur=function(t,e,n){for(var r=t.length,i=0,a=new er(e);i<r;++i)t[i]&&++a[t[i]-1];var o=new er(e);for(i=1;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(n){s=new er(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],h=o[t[i]-1]++<<c,f=h|(1<<c)-1;h<=f;++h)s[nl[h]>>l]=u}else for(s=new er(r),i=0;i<r;++i)t[i]&&(s[i]=nl[o[t[i]-1]++]>>15-t[i]);return s},jr=new Ke(288);for(ee=0;ee<144;++ee)jr[ee]=8;var ee;for(ee=144;ee<256;++ee)jr[ee]=9;var ee;for(ee=256;ee<280;++ee)jr[ee]=7;var ee;for(ee=280;ee<288;++ee)jr[ee]=8;var ee,zp=new Ke(32);for(ee=0;ee<32;++ee)zp[ee]=5;var ee;var Mk=Ur(jr,9,1);var zk=Ur(zp,5,1),el=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ht=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},tl=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Ek=function(t){return(t+7)/8|0},Nk=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new Ke(t.subarray(e,n))};var Fk=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ge=function(t,e,n){var r=new Error(e||Fk[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Ge),!n)throw r;return r},rl=function(t,e,n,r){var i=t.length,a=r?r.length:0;if(!i||e.f&&!e.l)return n||new Ke(0);var o=!n,s=o||e.i!=2,l=e.i;o&&(n=new Ke(i*3));var u=function(dt){var zt=n.length;if(dt>zt){var Fn=new Ke(Math.max(zt*2,dt));Fn.set(n),n=Fn}},c=e.f||0,h=e.p||0,f=e.b||0,p=e.l,m=e.d,y=e.m,b=e.n,k=i*8;do{if(!p){c=ht(t,h,1);var C=ht(t,h+1,3);if(h+=3,C)if(C==1)p=Mk,m=zk,y=9,b=5;else if(C==2){var g=ht(t,h,31)+257,I=ht(t,h+10,15)+4,D=g+ht(t,h+5,31)+1;h+=14;for(var L=new Ke(D),v=new Ke(19),O=0;O<I;++O)v[Tk[O]]=ht(t,h+O*3,7);h+=I*3;for(var F=el(v),z=(1<<F)-1,P=Ur(v,F,1),O=0;O<D;){var B=P[ht(t,h,z)];h+=B&15;var w=B>>4;if(w<16)L[O++]=w;else{var Z=0,te=0;for(w==16?(te=3+ht(t,h,3),h+=2,Z=L[O-1]):w==17?(te=3+ht(t,h,7),h+=3):w==18&&(te=11+ht(t,h,127),h+=7);te--;)L[O++]=Z}}var Ae=L.subarray(0,g),ie=L.subarray(g);y=el(Ae),b=el(ie),p=Ur(Ae,y,1),m=Ur(ie,b,1)}else Ge(1);else{var w=Ek(h)+4,A=t[w-4]|t[w-3]<<8,T=w+A;if(T>i){l&&Ge(0);break}s&&u(f+A),n.set(t.subarray(w,T),f),e.b=f+=A,e.p=h=T*8,e.f=c;continue}if(h>k){l&&Ge(0);break}}s&&u(f+131072);for(var x=(1<<y)-1,ce=(1<<b)-1,se=h;;se=h){var Z=p[tl(t,h)&x],d=Z>>4;if(h+=Z&15,h>k){l&&Ge(0);break}if(Z||Ge(2),d<256)n[f++]=d;else if(d==256){se=h,p=null;break}else{var he=d-254;if(d>264){var O=d-257,ve=Cp[O];he=ht(t,h,(1<<ve)-1)+Ip[O],h+=ve}var tt=m[tl(t,h)&ce],at=tt>>4;tt||Ge(3),h+=tt&15;var ie=Ik[at];if(at>3){var ve=Sp[at];ie+=tl(t,h)&(1<<ve)-1,h+=ve}if(h>k){l&&Ge(0);break}s&&u(f+131072);var Ce=f+he;if(f<ie){var jt=a-ie,st=Math.min(ie,Ce);for(jt+f<0&&Ge(3);f<st;++f)n[f]=r[jt+f]}for(;f<Ce;++f)n[f]=n[f-ie]}}e.l=p,e.p=se,e.b=f,e.f=c,p&&(c=1,e.m=y,e.d=m,e.n=b)}while(!c);return f!=n.length&&o?Nk(n,0,f):n.subarray(0,f)};var Dk=new Ke(0);var Lk=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Ge(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=(t[10]|t[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(e&2)},Ok=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0};var Pk=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Ge(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&Ge(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Bk(t,e){return rl(t,{i:2},e&&e.out,e&&e.dictionary)}function Rk(t,e){var n=Lk(t);return n+8>t.length&&Ge(6,"invalid gzip data"),rl(t.subarray(n,-8),{i:2},e&&e.out||new Ke(Ok(t)),e&&e.dictionary)}function _k(t,e){return rl(t.subarray(Pk(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function Ep(t,e){return t[0]==31&&t[1]==139&&t[2]==8?Rk(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?Bk(t,e):_k(t,e)}var Uk=typeof TextDecoder!="undefined"&&new TextDecoder,jk=0;try{Uk.decode(Dk,{stream:!0}),jk=1}catch(t){}var _p=Ft(Op(),1);var In={LocalFileHeader:67324752,DataDescriptor:134695760,CentralFileHeader:33639248,EndOfCentralDirectory:101010256},il={get(t){let e=fe.get(t,6);return{signature:be.get(t,0),compressedSize:be.get(t,8),uncompressedSize:be.get(t,12)}},len:16},Pp={get(t){let e=fe.get(t,6);return{signature:be.get(t,0),minVersion:fe.get(t,4),dataDescriptor:!!(e&8),compressedMethod:fe.get(t,8),compressedSize:be.get(t,18),uncompressedSize:be.get(t,22),filenameLength:fe.get(t,26),extraFieldLength:fe.get(t,28),filename:null}},len:30},Bp={get(t){return{signature:be.get(t,0),nrOfThisDisk:fe.get(t,4),nrOfThisDiskWithTheStart:fe.get(t,6),nrOfEntriesOnThisDisk:fe.get(t,8),nrOfEntriesOfSize:fe.get(t,10),sizeOfCd:be.get(t,12),offsetOfStartOfCd:be.get(t,16),zipFileCommentLength:fe.get(t,20)}},len:22},Rp={get(t){let e=fe.get(t,8);return{signature:be.get(t,0),minVersion:fe.get(t,6),dataDescriptor:!!(e&8),compressedMethod:fe.get(t,10),compressedSize:be.get(t,20),uncompressedSize:be.get(t,24),filenameLength:fe.get(t,28),extraFieldLength:fe.get(t,30),fileCommentLength:fe.get(t,32),relativeOffsetOfLocalHeader:be.get(t,42),filename:null}},len:46};function Up(t){let e=new Uint8Array(be.len);return be.put(e,0,t),e}var Ct=(0,_p.default)("tokenizer:inflate"),ol=256*1024,e1=Up(In.DataDescriptor),mo=Up(In.EndOfCentralDirectory),go=class{constructor(e){this.tokenizer=e,this.syncBuffer=new Uint8Array(ol)}async isZip(){return await this.peekSignature()===In.LocalFileHeader}peekSignature(){return this.tokenizer.peekToken(be)}async findEndOfCentralDirectoryLocator(){let e=this.tokenizer,n=Math.min(16*1024,e.fileInfo.size),r=this.syncBuffer.subarray(0,n);await this.tokenizer.readBuffer(r,{position:e.fileInfo.size-n});for(let i=r.length-4;i>=0;i--)if(r[i]===mo[0]&&r[i+1]===mo[1]&&r[i+2]===mo[2]&&r[i+3]===mo[3])return e.fileInfo.size-n+i;return-1}async readCentralDirectory(){if(!this.tokenizer.supportsRandomAccess()){Ct("Cannot reading central-directory without random-read support");return}Ct("Reading central-directory...");let e=this.tokenizer.position,n=await this.findEndOfCentralDirectoryLocator();if(n>0){Ct("Central-directory 32-bit signature found");let r=await this.tokenizer.readToken(Bp,n),i=[];this.tokenizer.setPosition(r.offsetOfStartOfCd);for(let a=0;a<r.nrOfEntriesOfSize;++a){let o=await this.tokenizer.readToken(Rp);if(o.signature!==In.CentralFileHeader)throw new Error("Expected Central-File-Header signature");o.filename=await this.tokenizer.readToken(new He(o.filenameLength,"utf-8")),await this.tokenizer.ignore(o.extraFieldLength),await this.tokenizer.ignore(o.fileCommentLength),i.push(o),Ct(`Add central-directory file-entry: n=${a+1}/${i.length}: filename=${i[a].filename}`)}return this.tokenizer.setPosition(e),i}this.tokenizer.setPosition(e)}async unzip(e){let n=await this.readCentralDirectory();if(n)return this.iterateOverCentralDirectory(n,e);let r=!1;do{let i=await this.readLocalFileHeader();if(!i)break;let a=e(i);r=!!a.stop;let o;if(await this.tokenizer.ignore(i.extraFieldLength),i.dataDescriptor&&i.compressedSize===0){let s=[],l=ol;Ct("Compressed-file-size unknown, scanning for next data-descriptor-signature....");let u=-1;for(;u<0&&l===ol;){l=await this.tokenizer.peekBuffer(this.syncBuffer,{mayBeLess:!0}),u=t1(this.syncBuffer.subarray(0,l),e1);let c=u>=0?u:l;if(a.handler){let h=new Uint8Array(c);await this.tokenizer.readBuffer(h),s.push(h)}else await this.tokenizer.ignore(c)}Ct(`Found data-descriptor-signature at pos=${this.tokenizer.position}`),a.handler&&await this.inflate(i,n1(s),a.handler)}else a.handler?(Ct(`Reading compressed-file-data: ${i.compressedSize} bytes`),o=new Uint8Array(i.compressedSize),await this.tokenizer.readBuffer(o),await this.inflate(i,o,a.handler)):(Ct(`Ignoring compressed-file-data: ${i.compressedSize} bytes`),await this.tokenizer.ignore(i.compressedSize));if(Ct(`Reading data-descriptor at pos=${this.tokenizer.position}`),i.dataDescriptor&&(await this.tokenizer.readToken(il)).signature!==134695760)throw new Error(`Expected data-descriptor-signature at position ${this.tokenizer.position-il.len}`)}while(!r)}async iterateOverCentralDirectory(e,n){for(let r of e){let i=n(r);if(i.handler){this.tokenizer.setPosition(r.relativeOffsetOfLocalHeader);let a=await this.readLocalFileHeader();if(a){await this.tokenizer.ignore(a.extraFieldLength);let o=new Uint8Array(r.compressedSize);await this.tokenizer.readBuffer(o),await this.inflate(a,o,i.handler)}}if(i.stop)break}}inflate(e,n,r){if(e.compressedMethod===0)return r(n);Ct(`Decompress filename=${e.filename}, compressed-size=${n.length}`);let i=Ep(n);return r(i)}async readLocalFileHeader(){let e=await this.tokenizer.peekToken(be);if(e===In.LocalFileHeader){let n=await this.tokenizer.readToken(Pp);return n.filename=await this.tokenizer.readToken(new He(n.filenameLength,"utf-8")),n}if(e===In.CentralFileHeader)return!1;throw e===3759263696?new Error("Encrypted ZIP"):new Error("Unexpected signature")}};function t1(t,e){let n=t.length,r=e.length;if(r>n)return-1;for(let i=0;i<=n-r;i++){let a=!0;for(let o=0;o<r;o++)if(t[i+o]!==e[o]){a=!1;break}if(a)return i}return-1}function n1(t){let e=t.reduce((i,a)=>i+a.length,0),n=new Uint8Array(e),r=0;for(let i of t)n.set(i,r),r+=i.length;return n}var $D={utf8:new globalThis.TextDecoder("utf8")};var VD=new globalThis.TextEncoder;var QD=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function al(t){let{byteLength:e}=t;if(e===6)return t.getUint16(0)*2**32+t.getUint32(2);if(e===5)return t.getUint8(0)*2**32+t.getUint32(1);if(e===4)return t.getUint32(0);if(e===3)return t.getUint8(0)*2**16+t.getUint16(1);if(e===2)return t.getUint16(0);if(e===1)return t.getUint8(0)}function r1(t,e){let n=t.length,r=e.length;if(r===0||r>n)return-1;let i=n-r;for(let a=0;a<=i;a++){let o=!0;for(let s=0;s<r;s++)if(t[a+s]!==e[s]){o=!1;break}if(o)return a}return-1}function jp(t,e){return r1(t,e)!==-1}function qp(t){return[...t].map(e=>e.charCodeAt(0))}function Hp(t,e=0){let n=Number.parseInt(new He(6).get(t,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(n))return!1;let r=8*32;for(let i=e;i<e+148;i++)r+=t[i];for(let i=e+156;i<e+512;i++)r+=t[i];return n===r}var $p={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4};var Vp=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ttc","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk","drc","lz4","potx","xltx","dotx","xltm","ott","ots","otp","odg","otg","xlsm","docm","dotm","potm","pptm","jar","rm"],Qp=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","font/collection","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive","application/vnd.google.draco","application/x-lz4","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-excel.template.macroenabled.12","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.presentation-template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.graphics-template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12","application/vnd.ms-powerpoint.template.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/java-archive","application/vnd.rn-realmedia"];var sl=4100;async function cl(t){return new ul().fromBuffer(t)}function ll(t){switch(t){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.text-template":return{ext:"ott",mime:"application/vnd.oasis.opendocument.text-template"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.spreadsheet-template":return{ext:"ots",mime:"application/vnd.oasis.opendocument.spreadsheet-template"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};case"application/vnd.oasis.opendocument.presentation-template":return{ext:"otp",mime:"application/vnd.oasis.opendocument.presentation-template"};case"application/vnd.oasis.opendocument.graphics":return{ext:"odg",mime:"application/vnd.oasis.opendocument.graphics"};case"application/vnd.oasis.opendocument.graphics-template":return{ext:"otg",mime:"application/vnd.oasis.opendocument.graphics-template"};case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"application/vnd.ms-excel.sheet.macroEnabled":return{ext:"xlsm",mime:"application/vnd.ms-excel.sheet.macroEnabled.12"};case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":return{ext:"xltx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.template"};case"application/vnd.ms-excel.template.macroEnabled":return{ext:"xltm",mime:"application/vnd.ms-excel.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"application/vnd.ms-word.document.macroEnabled":return{ext:"docm",mime:"application/vnd.ms-word.document.macroEnabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":return{ext:"dotx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.template"};case"application/vnd.ms-word.template.macroEnabledTemplate":return{ext:"dotm",mime:"application/vnd.ms-word.template.macroEnabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.template":return{ext:"potx",mime:"application/vnd.openxmlformats-officedocument.presentationml.template"};case"application/vnd.ms-powerpoint.template.macroEnabled":return{ext:"potm",mime:"application/vnd.ms-powerpoint.template.macroEnabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"application/vnd.ms-powerpoint.presentation.macroEnabled":return{ext:"pptm",mime:"application/vnd.ms-powerpoint.presentation.macroEnabled.12"};case"application/vnd.ms-visio.drawing":return{ext:"vsdx",mime:"application/vnd.visio"};case"application/vnd.ms-package.3dmanufacturing-3dmodel+xml":return{ext:"3mf",mime:"model/3mf"};default:}}function St(t,e,n){n={offset:0,...n};for(let[r,i]of e.entries())if(n.mask){if(i!==(n.mask[r]&t[r+n.offset]))return!1}else if(i!==t[r+n.offset])return!1;return!0}var ul=class{constructor(e){$o(this,"detectConfident",async e=>{if(this.buffer=new Uint8Array(sl),e.fileInfo.size===void 0&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.detectConfident(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);let n=await e.readToken($p);return e.position+n>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(n),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){let n;return await new go(e).unzip(r=>{switch(r.filename){case"META-INF/mozilla.rsa":return n={ext:"xpi",mime:"application/x-xpinstall"},{stop:!0};case"META-INF/MANIFEST.MF":return n={ext:"jar",mime:"application/java-archive"},{stop:!0};case"mimetype":return{async handler(i){let a=new TextDecoder("utf-8").decode(i).trim();n=ll(a)},stop:!0};case"[Content_Types].xml":return{async handler(i){let a=new TextDecoder("utf-8").decode(i),o=a.indexOf('.main+xml"');if(o===-1){let s="application/vnd.ms-package.3dmanufacturing-3dmodel+xml";a.includes(`ContentType="${s}"`)&&(n=ll(s))}else{a=a.slice(0,Math.max(0,o));let s=a.lastIndexOf('"'),l=a.slice(Math.max(0,s+1));n=ll(l)}},stop:!0};default:return/classes\d*\.dex/.test(r.filename)?(n={ext:"apk",mime:"application/vnd.android.package-archive"},{stop:!0}):{}}}),n!=null?n:{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);let n=new Uint8Array(8);return await e.readBuffer(n),St(n,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/ogg; codecs=opus"}:St(n,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:St(n,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:St(n,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:St(n,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:St(n,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{if(await e.ignore(1350)===1350){let i=new Uint8Array(Math.min(10485760,e.fileInfo.size-1350));if(await e.readBuffer(i,{mayBeLess:!0}),jp(i,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}}catch(n){if(!(n instanceof de))throw n}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let n=await this.readTiffHeader(!1);if(n)return n}if(this.check([77,77])){let n=await this.readTiffHeader(!0);if(n)return n}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function n(){let s=await e.peekNumber(xp),l=128,u=0;for(;!(s&l)&&l!==0;)++u,l>>=1;let c=new Uint8Array(u+1);return await e.readBuffer(c),c}async function r(){let s=await n(),l=await n();l[0]^=128>>l.length-1;let u=Math.min(6,l.length),c=new DataView(s.buffer),h=new DataView(l.buffer,l.length-u,u);return{id:al(c),len:al(h)}}async function i(s){for(;s>0;){let l=await r();if(l.id===17026)return(await e.readToken(new He(l.len))).replaceAll(/\00.*$/g,"");await e.ignore(l.len),--s}}let a=await r();switch(await i(a.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.checkString("ttcf"))return{ext:"ttc",mime:"font/collection"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([4,34,77,24]))return{ext:"lz4",mime:"application/x-lz4"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.checkString(".RMF"))return{ext:"rm",mime:"application/vnd.rn-realmedia"};if(this.checkString("DRACO"))return{ext:"drc",mime:"application/vnd.google.draco"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let n=new He(4,"latin1").get(this.buffer,2);if(n.match("^d*")&&n>=1e3&&n<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await e.ignore(8),await e.readToken(new He(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("WEBVTT")&&[`
`,"\r","	"," ","\0"].some(n=>this.checkString(n,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){await e.ignore(8);async function n(){return{length:await e.readToken(yp),type:await e.readToken(new He(4,"latin1"))}}do{let r=await n();if(r.length<0)return;switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(r.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){let n=new He(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(n){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return n.startsWith("3g")?n.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.check([82,73,70,70])){if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function n(){let r=new Uint8Array(16);return await e.readBuffer(r),{id:r,size:Number(await e.readToken(kp))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){let r=await n(),i=r.size-24;if(St(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let a=new Uint8Array(16);if(i-=await e.readBuffer(a),St(a,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(St(a,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(i)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new He(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let n=new DataView(this.buffer.buffer).getUint32(12,!0);if(n>12&&this.buffer.length>=n+16)try{let r=new TextDecoder().decode(this.buffer.slice(16,n+16));if(JSON.parse(r).files)return{ext:"asar",mime:"application/x-asar"}}catch(r){}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),Hp(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"}});$o(this,"detectImprecise",async e=>{if(this.buffer=new Uint8Array(sl),await e.peekBuffer(this.buffer,{length:Math.min(8,e.fileInfo.size),mayBeLess:!0}),this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}});var n;this.detectors=[...(n=e==null?void 0:e.customDetectors)!=null?n:[],{id:"core",detect:this.detectConfident},{id:"core.imprecise",detect:this.detectImprecise}],this.tokenizerOptions={abortSignal:e==null?void 0:e.signal}}async fromTokenizer(e){let n=e.position;for(let r of this.detectors){let i=await r.detect(e);if(i)return i;if(n!==e.position)return}}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);let n=e instanceof Uint8Array?e:new Uint8Array(e);if((n==null?void 0:n.length)>1)return this.fromTokenizer(vp(n,this.tokenizerOptions))}async fromBlob(e){return this.fromStream(e.stream())}async fromStream(e){let n=await bp(e,this.tokenizerOptions);try{return await this.fromTokenizer(n)}finally{await n.close()}}async toDetectionStream(e,n){let{sampleSize:r=sl}=n,i,a,o=e.getReader({mode:"byob"});try{let{value:u,done:c}=await o.read(new Uint8Array(r));if(a=u,!c&&u)try{i=await this.fromBuffer(u.slice(0,r))}catch(h){if(!(h instanceof de))throw h;i=void 0}a=u}finally{o.releaseLock()}let s=new TransformStream({async start(u){u.enqueue(a)},transform(u,c){c.enqueue(u)}}),l=e.pipeThrough(s);return l.fileType=i,l}check(e,n){return St(this.buffer,e,n)}checkString(e,n){return this.check(qp(e),n)}async readTiffTag(e){let n=await this.tokenizer.readToken(e?Jn:fe);switch(this.tokenizer.ignore(10),n){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}}async readTiffIFD(e){let n=await this.tokenizer.readToken(e?Jn:fe);for(let r=0;r<n;++r){let i=await this.readTiffTag(e);if(i)return i}}async readTiffHeader(e){let n=(e?Jn:fe).get(this.buffer,2),r=(e?wp:be).get(this.buffer,4);if(n===42){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8){let a=(e?Jn:fe).get(this.buffer,8),o=(e?Jn:fe).get(this.buffer,10);if(a===28&&o===254||a===31&&o===11)return{ext:"nef",mime:"image/x-nikon-nef"}}}await this.tokenizer.ignore(r);let i=await this.readTiffIFD(e);return i!=null?i:{ext:"tif",mime:"image/tiff"}}if(n===43)return{ext:"tif",mime:"image/tiff"}}},tL=new Set(Vp),nL=new Set(Qp);var qr=require("obsidian"),en=Ft(require("path")),Zp=require("obsidian");async function xo(t,e){var f,p;let n=t.vault,r=n.adapter;if(!(r instanceof qr.FileSystemAdapter))throw new Error("Vault is not using a local file system adapter.");let i=r.getBasePath(),a=(0,qr.normalizePath)(e.trim()).toLowerCase(),o=a.includes("/"),s=[".png",".jpg",".jpeg",".gif",".bmp",".webp"],l=s.some(m=>a.endsWith(m)),u=n.getFiles(),c=[],h=a;if(l||(h=a.split("/").pop()||a),a.startsWith("../")||a.startsWith("./")){let m=(p=(f=t.workspace).getActiveFile)==null?void 0:p.call(f);if(m){let y=en.join(i,m.path),b=en.resolve(en.dirname(y),e);try{if(require("fs").existsSync(b))return b}catch(k){new Zp.Notice(`\u56FE\u7247\u6587\u4EF6\u68C0\u67E5\u5F02\u5E38: ${k}`)}}}for(let m of u){let y=(0,qr.normalizePath)(m.path).toLowerCase(),b=m.name.toLowerCase();s.some(k=>y.endsWith(k))&&(o?(y===a||y.endsWith(a))&&c.push({file:m,path:en.join(i,m.path)}):(b===h||b.startsWith(h+"."))&&c.push({file:m,path:en.join(i,m.path)}))}return c.length===0?e:(c.length===1||c.sort((m,y)=>m.path.length-y.path.length||y.file.stat.mtime-m.file.stat.mtime),c[0].path)}var Mn=Q.current;async function i1(t,e){try{let n=await H(t),r=X(n,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0"]),i=await(0,ft.requestUrl)({url:"https://api.zhihu.com/images",headers:{"Content-Type":"application/json","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",Cookie:r},method:"POST",body:JSON.stringify({image_hash:e,source:"article"})});return new ft.Notice(`${Mn.notice.getImageIdSuccess}`),i.json}catch(n){new ft.Notice(`${Mn.notice.getImageIdFailed},${n}`)}}async function Gp(t,e){let n=e.match(/\[\[(.*?)\]\]/);if(n){let r=n[1],i=await xo(t,r),a=Yp.readFileSync(i);return await $r(t.vault,a)}else{new ft.Notice(`${Mn.notice.coverSyntaxInvalid}`);return}}async function o1(t,e,n){try{let r=await j(t),i=Hr.createHash("md5").update(e).digest("hex"),a=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength),o=await cl(e);if(!o)throw new Error(Mn.error.recognizeFileTypeFailed);let s=o.mime,l=Date.now(),u=new Date(l).toUTCString(),c="aliyun-sdk-js/6.8.0 Firefox 137.0 on OS X 10.15",h=a1(s,u,n.access_token,c,i),f=await s1(n.access_key,h),p={url:`https://zhihu-pics-upload.zhimg.com/v2-${i}`,headers:{"User-Agent":r.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Content-Type":s,"Accept-Language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2","x-oss-date":u,"x-oss-user-agent":c,"x-oss-security-token":n.access_token,authorization:`OSS ${n.access_id}:${f}`},method:"PUT",body:a};await(0,ft.requestUrl)(p),new ft.Notice(`${Mn.notice.imageUploadSuccess}`)}catch(r){new ft.Notice(`${Mn.notice.imageUploadFailed},${r}`)}}async function $r(t,e){let n=await H(t),r=await cl(e);if(!r)throw new Error(Mn.error.recognizeFileTypeFailed);let i=Hr.createHash("md5").update(e).digest("hex");if(!n.cache||Object.keys(n.cache).length===0||!n.cache.includes(i)){let o=await i1(t,i),s=o.upload_file.state,l=o.upload_token;s===2&&await o1(t,e,l),typeof n.cache!="object"||n.cache===null?await Oe(t,{cache:[i]}):await Oe(t,{cache:[...n.cache,i]})}return l1(i,r.ext)}async function Kp(t,e){try{let n=await j(t),i=await(0,ft.requestUrl)({url:e,headers:{"User-Agent":n.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2"},method:"GET",contentType:void 0}).arrayBuffer;return Buffer.from(i)}catch(n){return new ft.Notice(`failed to fetch image:${n}`),Buffer.from([])}}function a1(t,e,n,r,i){return`PUT

${t}
${e}
x-oss-date:${e}
x-oss-security-token:${n}
x-oss-user-agent:${r}
/zhihu-pics/v2-${i}`}async function s1(t,e){let n=Hr.createHmac("sha1",t);return n.update(e),n.digest("base64")}function l1(t,e){return`https://picx.zhimg.com/v2-${t}.${e}`}var hm=Ft(require("fs")),fm=Ft(require("path"));function hl(t){if(t===null||typeof t!="object")return!1;let e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function fl(t,e,n=".",r){if(!hl(e))return fl(t,{},n,r);let i=Object.assign({},e);for(let a in t){if(a==="__proto__"||a==="constructor")continue;let o=t[a];o!=null&&(r&&r(i,a,o,n)||(Array.isArray(o)&&Array.isArray(i[a])?i[a]=[...o,...i[a]]:hl(o)&&hl(i[a])?i[a]=fl(o,i[a],(n?`${n}.`:"")+a.toString(),r):i[a]=o))}return i}function pl(t){return(...e)=>e.reduce((n,r)=>fl(n,r,"",t),{})}var Jp=pl(),fL=pl((t,e,n)=>{if(t[e]!==void 0&&typeof n=="function")return t[e]=n(t[e]),!0}),pL=pl((t,e,n)=>{if(Array.isArray(t[e])&&typeof n=="function")return t[e]=n(t[e]),!0});var em={root:t=>({tagName:t.isFoldable?"details":"div",properties:{dataCallout:!0,dataCalloutType:p1(t.type),open:t.defaultFolded===void 0?!1:!t.defaultFolded}}),title:t=>({tagName:t.isFoldable?"summary":"div",properties:{dataCalloutTitle:!0}}),titleInner:(t,e)=>e.icon(t)==null&&e.foldIcon(t)==null?void 0:{tagName:"div",properties:{dataCalloutTitleInner:!0}},icon:()=>{},foldIcon:()=>{},body:()=>({tagName:"div",properties:{dataCalloutBody:!0}}),callouts:null,onUnknownCallout:()=>{}},c1=t=>{let e=Jp(t,em);return Object.fromEntries(Object.entries(e).map(([n,r])=>["root","title","titleInner","body","icon","foldIcon"].includes(n)&&typeof r!="function"?[n,()=>r]:[n,r]))},wo=t=>{let e=c1(t);return(n,r)=>{ct(n,"blockquote",i=>{var y,b,k,C,w;let a=i.children.at(0);if(a==null||a.type!=="paragraph"||((y=i.position)==null?void 0:y.start.line)!==((b=a.position)==null?void 0:b.start.line))return;let o=a.children.at(0);if(o==null||o.type!=="text")return;let[s,...l]=o.value.split(`
`),u=h1(s);if(u==null)return;if(e.callouts!=null&&!e.callouts.includes(u.type)){let A=e.onUnknownCallout(u,r);if(A==null)return;u.type=A.type,u.isFoldable=A.isFoldable,A.title!=null&&(u.title=A.title)}i.data={...i.data,hName:e.root(u).tagName,hProperties:{...(k=i.data)==null?void 0:k.hProperties,...e.root(u).properties}};let c=[{type:"paragraph",children:[]},...i.children.splice(1)];if(c[0].type!=="paragraph")return;l.length>0&&c[0].children.push({type:"text",value:l.join(`
`)});let h={type:e.titleInner(u,e)==null?"paragraph":"blockquote",data:{hName:e.title(u).tagName,hProperties:{...e.title(u).properties}},children:[]},f=e.icon(u);f!=null&&h.children.push(Xp(f));let p={type:"paragraph",data:{hName:(C=e.titleInner(u,e))==null?void 0:C.tagName,hProperties:(w=e.titleInner(u,e))==null?void 0:w.properties},children:[]};if(u.title!=null&&p.children.push({type:"text",value:u.title}),l.length<=0)for(let[A,T]of a.children.slice(1).entries()){if(T.type==="break"){p.children.push(T),c[0].children.push(...a.children.slice(A+1+1));break}if(T.type!=="text"){p.children.push(T);continue}let[g,...I]=T.value.split(`
`);if(g&&p.children.push({type:"text",value:g}),I.length>0){if(c[0].type!=="paragraph")return;c[0].children.push({type:"text",value:I.join(`
`)}),c[0].children.push(...a.children.slice(A+2));break}}else c[0].children.push(...a.children.slice(1));h.type==="paragraph"?h.children.push(...p.children):h.children.push(p);let m=e.foldIcon(u);m!=null&&h.children.push(Xp(m)),i.children=[h],(c.length>1||c[0].children.length>0)&&i.children.push({type:"blockquote",data:{hName:e.body(u).tagName,hProperties:{...e.body(u).properties}},children:c})})}},h1=t=>{var r;if(t==null)return;let e=t.match(/^\[!(?<type>[^\]]+)?\](?<isFoldable>[+-])?(?: (?<title>.*))?$/);if(((r=e==null?void 0:e.groups)==null?void 0:r.type)==null)return;let n={type:e.groups.type,isFoldable:e.groups.isFoldable!=null};return e.groups.isFoldable!=null&&(n.defaultFolded=e.groups.isFoldable==="-"),e.groups.title!=null?n.title=e.groups.title:n.title=f1(n.type),n},Xp=t=>typeof t=="string"?{type:"html",value:t}:typeof t.children=="string"?{type:"html",data:{hName:t.tagName,hProperties:t.properties},value:t.children}:{type:"html",data:{hName:t.tagName,hProperties:t.properties,hChildren:t.children},value:""};function f1(t){return t.length===0?t:t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}function p1(t){return t.replace(/\s+/g,"-").toLowerCase()}function ml(t){Fr(t,[/\r?\n|\r/g,m1])}function m1(){return{type:"break"}}function yo(){return function(t){ml(t)}}function dl(){return{enter:{mathFlow:t,mathFlowFenceMeta:e,mathText:a},exit:{mathFlow:i,mathFlowFence:r,mathFlowFenceMeta:n,mathFlowValue:s,mathText:o,mathTextData:s}};function t(l){let u={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[u]}},l)}function e(){this.buffer()}function n(){let l=this.resume(),u=this.stack[this.stack.length-1];u.type,u.meta=l}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function i(l){let u=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),c=this.stack[this.stack.length-1];c.type,this.exit(l),c.value=u;let h=c.data.hChildren[0];h.type,h.tagName,h.children.push({type:"text",value:u}),this.data.mathFlowInside=void 0}function a(l){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},l),this.buffer()}function o(l){let u=this.resume(),c=this.stack[this.stack.length-1];c.type,this.exit(l),c.value=u,c.data.hChildren.push({type:"text",value:u})}function s(l){this.config.enter.data.call(this,l),this.config.exit.data.call(this,l)}}function gl(t){let e=(t||{}).singleDollarTextMath;return e==null&&(e=!0),r.peek=i,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:e?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:n,inlineMath:r}};function n(a,o,s,l){let u=a.value||"",c=s.createTracker(l),h="$".repeat(Math.max(_i(u,"$")+1,2)),f=s.enter("mathFlow"),p=c.move(h);if(a.meta){let m=s.enter("mathFlowMeta");p+=c.move(s.safe(a.meta,{after:`
`,before:p,encode:["$"],...c.current()})),m()}return p+=c.move(`
`),u&&(p+=c.move(u+`
`)),p+=c.move(h),f(),p}function r(a,o,s){let l=a.value||"",u=1;for(e||u++;new RegExp("(^|[^$])"+"\\$".repeat(u)+"([^$]|$)").test(l);)u++;let c="$".repeat(u);/[^ \r\n]/.test(l)&&(/^[ \r\n]/.test(l)&&/[ \r\n]$/.test(l)||/^\$|\$$/.test(l))&&(l=" "+l+" ");let h=-1;for(;++h<s.unsafe.length;){let f=s.unsafe[h];if(!f.atBreak)continue;let p=s.compilePattern(f),m;for(;m=p.exec(l);){let y=m.index;l.codePointAt(y)===10&&l.codePointAt(y-1)===13&&y--,l=l.slice(0,y)+" "+l.slice(m.index+1)}}return c+l+c}function i(){return"$"}}var ue={carriageReturn:-5,lineFeed:-4,carriageReturnLineFeed:-3,horizontalTab:-2,virtualSpace:-1,eof:null,nul:0,soh:1,stx:2,etx:3,eot:4,enq:5,ack:6,bel:7,bs:8,ht:9,lf:10,vt:11,ff:12,cr:13,so:14,si:15,dle:16,dc1:17,dc2:18,dc3:19,dc4:20,nak:21,syn:22,etb:23,can:24,em:25,sub:26,esc:27,fs:28,gs:29,rs:30,us:31,space:32,exclamationMark:33,quotationMark:34,numberSign:35,dollarSign:36,percentSign:37,ampersand:38,apostrophe:39,leftParenthesis:40,rightParenthesis:41,asterisk:42,plusSign:43,comma:44,dash:45,dot:46,slash:47,digit0:48,digit1:49,digit2:50,digit3:51,digit4:52,digit5:53,digit6:54,digit7:55,digit8:56,digit9:57,colon:58,semicolon:59,lessThan:60,equalsTo:61,greaterThan:62,questionMark:63,atSign:64,uppercaseA:65,uppercaseB:66,uppercaseC:67,uppercaseD:68,uppercaseE:69,uppercaseF:70,uppercaseG:71,uppercaseH:72,uppercaseI:73,uppercaseJ:74,uppercaseK:75,uppercaseL:76,uppercaseM:77,uppercaseN:78,uppercaseO:79,uppercaseP:80,uppercaseQ:81,uppercaseR:82,uppercaseS:83,uppercaseT:84,uppercaseU:85,uppercaseV:86,uppercaseW:87,uppercaseX:88,uppercaseY:89,uppercaseZ:90,leftSquareBracket:91,backslash:92,rightSquareBracket:93,caret:94,underscore:95,graveAccent:96,lowercaseA:97,lowercaseB:98,lowercaseC:99,lowercaseD:100,lowercaseE:101,lowercaseF:102,lowercaseG:103,lowercaseH:104,lowercaseI:105,lowercaseJ:106,lowercaseK:107,lowercaseL:108,lowercaseM:109,lowercaseN:110,lowercaseO:111,lowercaseP:112,lowercaseQ:113,lowercaseR:114,lowercaseS:115,lowercaseT:116,lowercaseU:117,lowercaseV:118,lowercaseW:119,lowercaseX:120,lowercaseY:121,lowercaseZ:122,leftCurlyBrace:123,verticalBar:124,rightCurlyBrace:125,tilde:126,del:127,byteOrderMarker:65279,replacementCharacter:65533};var xl={attentionSideAfter:2,attentionSideBefore:1,atxHeadingOpeningFenceSizeMax:6,autolinkDomainSizeMax:63,autolinkSchemeSizeMax:32,cdataOpeningString:"CDATA[",characterGroupPunctuation:2,characterGroupWhitespace:1,characterReferenceDecimalSizeMax:7,characterReferenceHexadecimalSizeMax:6,characterReferenceNamedSizeMax:31,codeFencedSequenceSizeMin:3,contentTypeContent:"content",contentTypeDocument:"document",contentTypeFlow:"flow",contentTypeString:"string",contentTypeText:"text",hardBreakPrefixSizeMin:2,htmlBasic:6,htmlCdata:5,htmlComment:2,htmlComplete:7,htmlDeclaration:4,htmlInstruction:3,htmlRawSizeMax:8,htmlRaw:1,linkResourceDestinationBalanceMax:32,linkReferenceSizeMax:999,listItemValueSizeMax:10,numericBaseDecimal:10,numericBaseHexadecimal:16,tabSize:4,thematicBreakMarkerCountMin:3,v8MaxSafeChunkSize:1e4};var Fe={data:"data",whitespace:"whitespace",lineEnding:"lineEnding",lineEndingBlank:"lineEndingBlank",linePrefix:"linePrefix",lineSuffix:"lineSuffix",atxHeading:"atxHeading",atxHeadingSequence:"atxHeadingSequence",atxHeadingText:"atxHeadingText",autolink:"autolink",autolinkEmail:"autolinkEmail",autolinkMarker:"autolinkMarker",autolinkProtocol:"autolinkProtocol",characterEscape:"characterEscape",characterEscapeValue:"characterEscapeValue",characterReference:"characterReference",characterReferenceMarker:"characterReferenceMarker",characterReferenceMarkerNumeric:"characterReferenceMarkerNumeric",characterReferenceMarkerHexadecimal:"characterReferenceMarkerHexadecimal",characterReferenceValue:"characterReferenceValue",codeFenced:"codeFenced",codeFencedFence:"codeFencedFence",codeFencedFenceSequence:"codeFencedFenceSequence",codeFencedFenceInfo:"codeFencedFenceInfo",codeFencedFenceMeta:"codeFencedFenceMeta",codeFlowValue:"codeFlowValue",codeIndented:"codeIndented",codeText:"codeText",codeTextData:"codeTextData",codeTextPadding:"codeTextPadding",codeTextSequence:"codeTextSequence",content:"content",definition:"definition",definitionDestination:"definitionDestination",definitionDestinationLiteral:"definitionDestinationLiteral",definitionDestinationLiteralMarker:"definitionDestinationLiteralMarker",definitionDestinationRaw:"definitionDestinationRaw",definitionDestinationString:"definitionDestinationString",definitionLabel:"definitionLabel",definitionLabelMarker:"definitionLabelMarker",definitionLabelString:"definitionLabelString",definitionMarker:"definitionMarker",definitionTitle:"definitionTitle",definitionTitleMarker:"definitionTitleMarker",definitionTitleString:"definitionTitleString",emphasis:"emphasis",emphasisSequence:"emphasisSequence",emphasisText:"emphasisText",escapeMarker:"escapeMarker",hardBreakEscape:"hardBreakEscape",hardBreakTrailing:"hardBreakTrailing",htmlFlow:"htmlFlow",htmlFlowData:"htmlFlowData",htmlText:"htmlText",htmlTextData:"htmlTextData",image:"image",label:"label",labelText:"labelText",labelLink:"labelLink",labelImage:"labelImage",labelMarker:"labelMarker",labelImageMarker:"labelImageMarker",labelEnd:"labelEnd",link:"link",paragraph:"paragraph",reference:"reference",referenceMarker:"referenceMarker",referenceString:"referenceString",resource:"resource",resourceDestination:"resourceDestination",resourceDestinationLiteral:"resourceDestinationLiteral",resourceDestinationLiteralMarker:"resourceDestinationLiteralMarker",resourceDestinationRaw:"resourceDestinationRaw",resourceDestinationString:"resourceDestinationString",resourceMarker:"resourceMarker",resourceTitle:"resourceTitle",resourceTitleMarker:"resourceTitleMarker",resourceTitleString:"resourceTitleString",setextHeading:"setextHeading",setextHeadingText:"setextHeadingText",setextHeadingLine:"setextHeadingLine",setextHeadingLineSequence:"setextHeadingLineSequence",strong:"strong",strongSequence:"strongSequence",strongText:"strongText",thematicBreak:"thematicBreak",thematicBreakSequence:"thematicBreakSequence",blockQuote:"blockQuote",blockQuotePrefix:"blockQuotePrefix",blockQuoteMarker:"blockQuoteMarker",blockQuotePrefixWhitespace:"blockQuotePrefixWhitespace",listOrdered:"listOrdered",listUnordered:"listUnordered",listItemIndent:"listItemIndent",listItemMarker:"listItemMarker",listItemPrefix:"listItemPrefix",listItemPrefixWhitespace:"listItemPrefixWhitespace",listItemValue:"listItemValue",chunkDocument:"chunkDocument",chunkContent:"chunkContent",chunkFlow:"chunkFlow",chunkText:"chunkText",chunkString:"chunkString"};var nm={tokenize:g1,concrete:!0,name:"mathFlow"},tm={tokenize:x1,partial:!0};function d1(t,e,n){let r=this,i=0;return a;function a(s){return s!==ue.dollarSign?n(s):(t.enter("mathFlowFence"),t.enter("mathFlowFenceSequence"),o(s))}function o(s){return s===ue.dollarSign?(i++,t.consume(s),o):i<r.sizeOpen?n(s):(t.exit("mathFlowFenceSequence"),t.exit("mathFlowFence"),e(s))}}function g1(t,e,n){let r=this,i=r.events[r.events.length-1],a=i&&i[1].type===Fe.linePrefix?i[2].sliceSerialize(i[1],!0).length:0,o=0;return r.sizeOpen=o,s;function s(w){return ue.dollarSign,t.enter("mathFlow"),t.enter("mathFlowFence"),t.enter("mathFlowFenceSequence"),l(w)}function l(w){return w===ue.dollarSign?(t.consume(w),o++,l):o<2?n(w):(r.sizeOpen=o,t.exit("mathFlowFenceSequence"),R(t,u,Fe.whitespace)(w))}function u(w){return w!==ue.eof&&!E(w)?(t.exit("mathFlowFence"),t.enter("mathFlowValue"),m(w)):c(w)}function c(w){return t.exit("mathFlowFence"),r.interrupt?e(w):t.attempt(tm,h,k)(w)}function h(w){return t.attempt({tokenize:C,partial:!0},k,f)(w)}function f(w){return(a?R(t,p,Fe.linePrefix,a+1):p)(w)}function p(w){return w===ue.eof?k(w):E(w)?t.attempt(tm,h,k)(w):(t.enter("mathFlowValue"),m(w))}function m(w){return w===ue.dollarSign?(t.exit("mathFlowValue"),y(w)):w===ue.eof||E(w)?(t.exit("mathFlowValue"),p(w)):(t.consume(w),m)}function y(w){return t.attempt({tokenize:d1,partial:!0},k,b)(w)}function b(w){return t.enter("mathFlowValue"),t.consume(w),m}function k(w){return t.exit("mathFlow"),e(w)}function C(w,A,T){let g=0;return r.parser.constructs.disable.null,R(w,I,Fe.linePrefix,r.parser.constructs.disable.null.includes("codeIndented")?void 0:xl.tabSize);function I(v){return w.enter("mathFlowFence"),w.enter("mathFlowFenceSequence"),D(v)}function D(v){return v===ue.dollarSign?(g++,w.consume(v),D):g<o?T(v):(w.exit("mathFlowFenceSequence"),R(w,L,Fe.whitespace)(v))}function L(v){return v===ue.eof||E(v)?(w.exit("mathFlowFence"),A(v)):T(v)}}}function x1(t,e,n){let r=this;return i;function i(o){return o===null?e(o):(E(o),t.enter(Fe.lineEnding),t.consume(o),t.exit(Fe.lineEnding),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function im(t){let n=(t||{}).singleDollarTextMath;return n==null&&(n=!0),{tokenize:r,resolve:w1,previous:rm,name:"mathText"};function r(i,a,o){let s=this,l=0,u,c;return h;function h(b){return ue.dollarSign,rm.call(s,s.previous),i.enter("mathText"),i.enter("mathTextSequence"),f(b)}function f(b){return b===ue.dollarSign?(i.consume(b),l++,f):l<2&&!n?o(b):(i.exit("mathTextSequence"),p(b))}function p(b){return b===ue.eof?o(b):b===ue.dollarSign?(c=i.enter("mathTextSequence"),u=0,y(b)):b===ue.space?(i.enter("space"),i.consume(b),i.exit("space"),p):E(b)?(i.enter(Fe.lineEnding),i.consume(b),i.exit(Fe.lineEnding),p):(i.enter("mathTextData"),m(b))}function m(b){return b===ue.eof||b===ue.space||b===ue.dollarSign||E(b)?(i.exit("mathTextData"),p(b)):(i.consume(b),m)}function y(b){return b===ue.dollarSign?(i.consume(b),u++,y):u===l?(i.exit("mathTextSequence"),i.exit("mathText"),a(b)):(c.type="mathTextData",m(b))}}}function w1(t){let e=t.length-4,n=3,r,i;if((t[n][1].type===Fe.lineEnding||t[n][1].type==="space")&&(t[e][1].type===Fe.lineEnding||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="mathTextData"){t[e][1].type="mathTextPadding",t[n][1].type="mathTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!==Fe.lineEnding&&(i=r):(r===e||t[r][1].type===Fe.lineEnding)&&(t[i][1].type="mathTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function rm(t){return t!==ue.dollarSign||this.events[this.events.length-1][1].type===Fe.characterEscape}function wl(t){return{flow:{[ue.dollarSign]:nm},text:{[ue.dollarSign]:im(t)}}}var om=require("obsidian");var ko=Q.current;async function am(t,e){let n=await(0,om.loadMermaid)(),r="mermaid-svg-"+Math.random().toString(36).substring(2),{svg:i}=await n.render(r,t);e.innerHTML=i}function y1(t){return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t)}`}function sm(t){let e=/var\((--[\w-]+)\)/g,n=getComputedStyle(document.body);return t.replace(e,(r,i)=>n.getPropertyValue(i).trim())}async function lm(t,e){let n=y1(t),r=new Image;return new Promise((i,a)=>{r.onload=()=>{let o=r.naturalWidth,s=r.naturalHeight;if(o===0||s===0)return URL.revokeObjectURL(n),a(new Error(ko.error.identifySVGFailed));let l=document.createElement("canvas");l.width=o*e,l.height=s*e;let u=l.getContext("2d");if(!u)return URL.revokeObjectURL(n),a(new Error(ko.error.fetchContextFailed));u.scale(e,e),u.drawImage(r,0,0,o,s),l.toBlob(async c=>{if(URL.revokeObjectURL(n),!c)return a(new Error(ko.error.generateBlobFailed));let h=await c.arrayBuffer(),f=Buffer.from(h);i(f)},"image/png")},r.onerror=o=>{URL.revokeObjectURL(n),a(new Error(`${ko.error.loadSVGFailed}: ${o}`))},r.src=n})}var um=Q.current;function b1(){let t=this||{},e=this.data(),n=e.micromarkExtensions||(e.micromarkExtensions=[]),r=e.fromMarkdownExtensions||(e.fromMarkdownExtensions=[]),i=e.toMarkdownExtensions||(e.toMarkdownExtensions=[]);n.push(wl(t)),r.push(dl()),i.push(gl(t))}function v1(t={}){let e=this.data();function n(r,i){e[r]?e[r].push(i):e[r]=[i]}n("micromarkExtensions",hp(t)),n("fromMarkdownExtensions",pp(t)),n("toMarkdownExtensions",mp(t))}var C1=t=>{let e=t.vault;return async r=>{let i=await j(e),a=[];ct(r,"image",o=>{let s=(async()=>{let l=o.alt,u=o.url||"",c=await Kp(e,u),h=await $r(e,c);l||(l=i.useImgNameDefault?h:""),o.url=h,o.data={...o.data,hName:"img",hProperties:{src:h,"data-caption":l,"data-size":"normal","data-watermark":"watermark","data-original-src":h,"data-watermark-src":"","data-private-watermark-src":""},hChildren:[]}})();a.push(s)}),ct(r,"wikiLink",o=>{let s=(async()=>{let l=o.data.alias,u=o.value,c=await xo(t,u);try{let h=hm.readFileSync(c),f=await $r(e,h);l===u&&(l=i.useImgNameDefault?fm.basename(u):""),o.type="image",o.url=f,o.alt=l,o.data={...o.data,hName:"img",hProperties:{src:f,"data-caption":l,"data-size":"normal","data-watermark":"watermark","data-original-src":f,"data-watermark-src":"","data-private-watermark-src":""},hChildren:[]}}catch(h){new cm.Notice(`\u56FE\u7247\u8BFB\u53D6\u5931\u8D25: ${h.message}`)}})();a.push(s)}),ct(r,"code",o=>{if(o.lang!=="mermaid")return;let s=(async()=>{try{let l=o.value,u=document.createElement("div");await am(l,u);let c=u.querySelector("svg");if(!c)return;let h=c.outerHTML;h=sm(h);let f=await lm(h,i.mermaidScale),p=await $r(e,f);if(!p){console.error(um.error.uploadMermaidImgFailed);return}let m="";o.type="image",o.url=p,o.alt=m,o.data={...o.data,hName:"img",hProperties:{src:p,"data-caption":m,"data-size":"normal","data-watermark":"watermark","data-original-src":p,"data-watermark-src":"","data-private-watermark-src":""},hChildren:[]}}catch(l){console.error(um.error.errorHandlingMermaid,l)}})();a.push(s)}),await Promise.all(a)}};async function bo(t,e){let n=t.vault,i={allowDangerousHtml:!0,handlers:{link(s,l){let u={};if(l.title==="card")u["data-draft-node"]="block",u["data-draft-type"]="link-card",u.href=l.url;else if(l.title&&l.title.includes("member_mention")){let c=l.title.replace("member_mention_",""),h=l.url.replace("https://www.zhihu.com/people/","");u.class="member_mention",u.href=`/people/${h}`,u["data-hash"]=c}else u.href=l.url;return{type:"element",tagName:"a",properties:u,children:s.all(l)}},inlineMath(s,l){let u=l.value,c=u.replace(/[\n\r]/g," ");return{type:"element",tagName:"img",properties:{eeimg:"1",src:`//www.zhihu.com/equation?tex=${encodeURI(u)}`,alt:c},children:[]}},math(s,l){let u=l.value+"\\\\",c=u.replace(/[\n\r]/g," "),h=encodeURI(u);return{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"img",properties:{eeimg:"1",src:`//www.zhihu.com/equation?tex=${h}`,alt:c},children:[]}]}},code(s,l){let u=l.lang||"",c=l.value?l.value.trim():"";return{type:"element",tagName:"pre",properties:{lang:u},children:[Kn("text",c)]}},table(s,l){let u=s.all(l),c=Kn("element",{tagName:"tbody",properties:{}},u);return{type:"element",tagName:"table",properties:{"data-draft-node":"block","data-draft-type":"table","data-size":"normal"},children:[c]}},footnoteReference(s,l){let u=String(l.identifier).toUpperCase(),c=s.footnoteById.get(u);if(!c)return{type:"element",tagName:"sup",properties:{},children:[{type:"text",value:`[${u}]`}]};let h=c.children[0],f="",p="";for(let m of h.children)m.type==="text"&&(f+=m.value.trim()),m.type==="link"&&(p=m.url);return{type:"element",tagName:"sup",properties:{"data-text":f,"data-url":p,"data-draft-node":"inline","data-draft-type":"reference","data-numero":u},children:[Kn("text",`[${u}]`)]}},footnoteDefinition(){},heading(s,l){let u=s.all(l);switch(l.depth){case 1:return{type:"element",tagName:"h2",properties:{},children:u};case 2:return{type:"element",tagName:"h3",properties:{},children:u};default:return{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"strong",properties:{},children:u}]}}},blockquote(s,l){var m,y,b,k;let u=((m=l.data)==null?void 0:m.hProperties)||{};if(["ignore","\u5FFD\u7565","\u6CE8\u91CA"].includes(u.dataCalloutType))return{type:"element",tagName:"p",properties:{},children:[]};let h=l.children.find(C=>{var w,A;return(A=(w=C.data)==null?void 0:w.hProperties)==null?void 0:A.dataCalloutTitle}),f=(k=(b=(y=h==null?void 0:h.children)==null?void 0:y[0])==null?void 0:b.value)!=null?k:"",p=l.children.filter(C=>{var A,T,g;return((A=C.data)==null?void 0:A.hName)!=="div"||!((g=(T=C.data)==null?void 0:T.hProperties)!=null&&g.dataCalloutTitle)}).flatMap(C=>{var w,A,T;return C.type==="blockquote"&&((A=(w=C.data)==null?void 0:w.hProperties)!=null&&A.dataCalloutBody)?(T=C.children)!=null?T:[]:[C]});return{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"strong",properties:{},children:[Kn("text",f)]},...s.all({children:p})]}}}},a=await Aa().use(Pi).use(Hi).use(b1).use(v1).use(wo).use(yo).use(C1,t).use(Ki,void 0,i).use(lo,{indent:0}).use(so).process(e);return String(a)}var De=[];for(let t=0;t<256;++t)De.push((t+256).toString(16).slice(1));function mm(t,e=0){return(De[t[e+0]]+De[t[e+1]]+De[t[e+2]]+De[t[e+3]]+"-"+De[t[e+4]]+De[t[e+5]]+"-"+De[t[e+6]]+De[t[e+7]]+"-"+De[t[e+8]]+De[t[e+9]]+"-"+De[t[e+10]]+De[t[e+11]]+De[t[e+12]]+De[t[e+13]]+De[t[e+14]]+De[t[e+15]]).toLowerCase()}var yl,S1=new Uint8Array(16);function kl(){if(!yl){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");yl=crypto.getRandomValues.bind(crypto)}return yl(S1)}var T1=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bl={randomUUID:T1};function A1(t,e,n){var i,a,o;if(bl.randomUUID&&!e&&!t)return bl.randomUUID();t=t||{};let r=(o=(a=t.random)!=null?a:(i=t.rng)==null?void 0:i.call(t))!=null?o:kl();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(n=n||0,n<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let s=0;s<16;++s)e[n+s]=r[s];return e}return mm(r)}var Vr=A1;function dm(t){return t?typeof t=="string"?[t]:t:[]}function ir(t){let e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0");return`${e}-${n}-${r} ${i}:${a}`}function vo(t){return t+'<blockquote><p>\u672C\u6587\u7531 <a href="https://zhuanlan.zhihu.com/p/1901622331102696374">Zhihu on Obsidian</a> \u521B\u4F5C\u5E76\u53D1\u5E03</p></blockquote>'}var Te=Q.current;async function Qr(t){let e=t.workspace.getActiveFile(),n=t.vault,r=await j(n);if(!e){console.error(Te.error.noActiveFileFound);return}let i=t.metadataCache.getFileCache(e),a=i==null?void 0:i.frontmatter;if(!a){new pe.Notice(`${Te.notice.noFrontmatter}`);return}let o=dm(a["zhihu-topics"]);if(o.length===0){new pe.Notice(`${Te.notice.noTopics}`);return}let s=z1(a["zhihu-link"]),l=a["zhihu-title"]||Te.untitled,u=!!a["zhihu-toc"],c=await t.vault.read(e),h=ki(c),f="";switch(s){case 0:f=await vl(n,l);break;case 1:f=a["zhihu-link"].replace("https://zhuanlan.zhihu.com/p/","");break;case 2:f=a["zhihu-link"].match(/^https:\/\/zhuanlan\.zhihu\.com\/p\/(\d+)(\/edit)?$/)[1];break;case 3:new pe.Notice(`${Te.notice.linkInvalid}`);return;default:new pe.Notice(`${Te.error.unknownError}`);break}let p=a["zhihu-cover"];if(!(typeof p=="undefined"||p===null)){let A={titleImage:await Gp(t,p),isTitleImageFullScreen:!1,delta_time:30};await gm(n,f,A),new pe.Notice(`${Te.notice.coverUploadSuccess}`)}let m=await bo(t,h);m=vo(m),await gm(n,f,{title:l,content:m,table_of_contents:u,delta_time:30,can_reward:!1});for(let w of o)try{let A=await lc(n,f,w);Array.isArray(A)&&A.length>0&&await uc(n,f,A[0])}catch(A){console.error(Te.error.autoCompleteTopicFailed,w,A)}let b=a["zhihu-question"];if(b){let w=F1(b);w&&await M1(n,f,w)}let C=(await I1(n,f,u,s===1)).publish.url;switch(s){case 0:case 2:await t.fileManager.processFrontMatter(e,w=>{w["zhihu-link"]=C,w["zhihu-created-at"]=ir(new Date)}),new pe.Notice(`${Te.notice.publishArticleSuccess}`);break;case 1:await t.fileManager.processFrontMatter(e,w=>{w["zhihu-updated-at"]=ir(new Date)}),new pe.Notice(`${Te.notice.updateArticleSuccess}`);break;default:new pe.Notice(`${Te.error.unknownError}`);break}}async function xm(t){let e=t.vault,n=t.workspace,r="untitled",i=`${r}.md`,a=1;for(;await e.adapter.exists(i);)r=`untitled ${a}`,i=`${r}.md`,a++;try{let o=await e.create(i,""),s="untitled",l=await vl(e,s);return await t.fileManager.processFrontMatter(o,c=>{c["zhihu-title"]=s,c["zhihu-topics"]="",c["zhihu-link"]=`https://zhuanlan.zhihu.com/p/${l}/edit`}),await n.getLeaf(!1).openFile(o),i}catch(o){throw console.error(Te.error.createModifyFileFailed,o),o}}async function wm(t){let e=t.vault,n=t.workspace,r=n.getActiveFile();if(!r){new pe.Notice("\u672A\u627E\u5230\u5F53\u524D\u6D3B\u52A8\u6587\u4EF6");return}try{let a=r.name.replace(/\.md$/,""),o=await vl(e,a);return await t.fileManager.processFrontMatter(r,l=>{l["zhihu-title"]=a,l["zhihu-topics"]="",l["zhihu-link"]=`https://zhuanlan.zhihu.com/p/${o}/edit`}),await n.getLeaf(!1).openFile(r),r.path}catch(i){console.error(Te.error.createModifyFileFailed,i),new pe.Notice("\u6DFB\u52A0\u77E5\u4E4E\u5143\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\u3002")}}async function vl(t,e){try{let n=await H(t),r=await j(t),i=X(n,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0"]),a=n.cookies._xsrf,s=(await(0,pe.requestUrl)({url:"https://zhuanlan.zhihu.com/api/articles/drafts",headers:{"User-Agent":r.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Content-Type":"application/json","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",referer:"https://zhuanlan.zhihu.com/write","x-requested-with":"fetch","x-xsrftoken":a,origin:"https://zhuanlan.zhihu.com",Cookie:i},method:"POST",body:JSON.stringify({title:e,delta_time:0,can_reward:!1})})).json.id;return new pe.Notice(`${Te.notice.getArticleIdSuccess}`),s}catch(n){new pe.Notice(`${Te.notice.generateDraftFailed},${n}`)}}async function gm(t,e,n){try{let r=await H(t),i=await j(t),a=X(r,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0"]),o=r.cookies._xsrf,s=`https://zhuanlan.zhihu.com/api/articles/${e}/draft`;await(0,pe.requestUrl)({url:s,headers:{"User-Agent":i.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Content-Type":"application/json","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",referer:`https://zhuanlan.zhihu.com/p/${e}/edit`,"x-requested-with":"fetch","x-xsrftoken":o,origin:"https://zhuanlan.zhihu.com",Cookie:a},method:"PATCH",body:JSON.stringify(n)}),new pe.Notice(`${Te.notice.patchArticleSuccess}`)}catch(r){new pe.Notice(`${Te.notice.patchArticleFailed},${r}`)}}async function I1(t,e,n,r){try{let i=await H(t),a=await j(t),o=X(i,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0","q_c1"]),s=i.cookies._xsrf,l=`${Date.now()},${Vr()}`,u=await(0,pe.requestUrl)({url:"https://www.zhihu.com/api/v4/content/publish",headers:{"User-Agent":a.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Content-Type":"application/json","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2","x-requested-with":"fetch","x-xsrftoken":s,Cookie:o},method:"POST",body:JSON.stringify({action:"article",data:{publish:{traceId:l},extra_info:{publisher:"pc",pc_business_params:`{                       "column":null,                       "commentPermission":"anyone",                       "disclaimer_type":"none",                       "disclaimer_status":"close",                       "table_of_contents_enabled":${n},                       "commercial_report_info":{"commercial_types":[]},                       "commercial_zhitask_bind_info":null,                       "canReward":false                   }`},draft:{disabled:1,id:e,isPublished:r},commentsPermission:{comment_permission:"anyone"},creationStatement:{disclaimer_type:"none",disclaimer_status:"close"},contentsTables:{table_of_contents_enabled:n},commercialReportInfo:{isReport:0},appreciate:{can_reward:!1,tagline:""},hybridInfo:{}}})});if(u.json.message==="success")return JSON.parse(u.json.data.result);new pe.Notice(u.json.message)}catch(i){new pe.Notice(`${Te.notice.publishArticleFailed},${i}`)}}async function M1(t,e,n){try{let r=await H(t),i=await j(t),a=X(r,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0","q_c1"]),o=r.cookies._xsrf;await(0,pe.requestUrl)({url:"https://www.zhihu.com/api/v4/creators/article_publish/check/question",headers:{"User-Agent":i.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Content-Type":"application/json","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2","x-requested-with":"fetch","x-xsrftoken":o,Cookie:a},method:"POST",body:JSON.stringify({article_token:e,question_token:n})}),new pe.Notice(`${Te.notice.publishToAnswerSuccess}`)}catch(r){new pe.Notice(`${Te.notice.publishToAnswerFailed},${r}`)}}function z1(t){return typeof t=="undefined"||t===null?0:E1(t)?1:N1(t)?2:3}function E1(t){return/^https:\/\/zhuanlan\.zhihu\.com\/p\/\d+$/.test(t)}function N1(t){return/^https:\/\/zhuanlan\.zhihu\.com\/p\/\d+(\/edit)?$/.test(t)}function F1(t){let e=t.match(/zhihu\.com\/question\/(\d+)/);return e?e[1]:""}var $e=require("obsidian");var Co=require("obsidian");var km=Q.current;async function bm(t,e){try{let n=await H(t),r=await j(t),i=X(n,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0","q_c1"]);return(await(0,Co.requestUrl)({url:e,headers:{"User-Agent":r.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",referer:"https://www.zhihu.com/","x-api-version":"3.0.53","x-requested-with":"fetch",Cookie:i},method:"GET"})).json}catch(n){new Co.Notice(`${km.notice.fetchRecommendFailed}`)}}function vm(t){try{return t.data.filter(n=>n.type!=="feed_advert"&&n.target&&Object.keys(n.target).length>0).map(n=>({id:n.target.id,type:n.target.type,title:n.target.type==="article"?n.target.title:n.target.question.title,excerpt:n.target.excerpt_new||n.target.excerpt,author_name:n.target.author.name,url:n.target.type==="article"?`https://zhuanlan.zhihu.com/p/${n.target.id}`:`https://www.zhihu.com/question/${n.target.question.id}/answer/${n.target.id}`,content:n.target.content,updated_time:n.target.type==="article"?n.target.update:n.target.updated_time,created_time:n.target.type==="article"?n.target.created:n.target.created_time,visited_count:n.target.visited_count,voteup_count:n.target.voteup_count,thanks_count:n.target.thanks_count,favorite_count:n.target.favorite_count}))}catch(e){return console.error(km.error.loadRecommendFailed,e),[]}}var So=require("obsidian");var Cm=Q.current;async function Sm(t,e){try{let n=await H(t),r=await j(t),i=X(n,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0","q_c1"]);return(await(0,So.requestUrl)({url:e,headers:{"User-Agent":r.user_agent,"accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",referer:"https://www.zhihu.com/follow","x-api-version":"3.0.53","x-requested-with":"fetch",Cookie:i},method:"GET"})).json}catch(n){new So.Notice(`${Cm.notice.fetchFollowsFailed},${n}`)}}function Tm(t){try{return t.data.filter(n=>n.type!=="feed_advert"&&n.target&&Object.keys(n.target).length>0).map(n=>D1(n))}catch(e){return console.error(Cm.error.loadFollowsFailed,e),[]}}function D1(t){switch(t.target.type){case"article":return{id:t.target.id,type:t.target.type,title:t.target.title,excerpt:t.target.excerpt,author_name:t.target.author.name,created_time:t.target.created_time,url:`https://zhuanlan.zhihu.com/p/${t.target.id}`,content:t.target.content,action_text:t.action_text};case"question":return{id:t.target.id,type:t.target.type,title:t.target.title,excerpt:t.target.excerpt,author_name:t.target.author.name,created_time:t.target.created,url:`https://www.zhihu.com/question/${t.target.id}`,content:t.target.detail,action_text:t.action_text};case"answer":return{id:t.target.id,type:t.target.type,title:t.target.question.title,excerpt:t.target.excerpt,author_name:t.target.author.name,created_time:t.target.created_time,url:`https://www.zhihu.com/question/${t.target.question.id}/answer/${t.target.id}`,content:t.target.content,action_text:t.action_text};case"pin":return{id:t.target.id,type:t.target.type,title:O1(L1(t.target.content[0].content)),excerpt:t.target.excerpt_title,author_name:t.target.author.name,created_time:t.target.created,url:`https://www.zhihu.com/pin/${t.target.id}`,content:t.target.content_html,action_text:t.action_text};default:return"Unknown Item Type"}}function L1(t){return t.replace(/<[^>]*>/g,"")}function O1(t,e=100){return t.length<=e?t:t.slice(0,e)+"..."}var Zr=require("obsidian");var Am=Q.current;async function P1(t){try{let e=await H(t),n=await j(t),r=X(e,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0","q_c1"]);return(await(0,Zr.requestUrl)({url:"https://www.zhihu.com/api/v3/feed/topstory/hot-lists/total?limit=50&desktop=true",headers:{"User-Agent":n.user_agent,"accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2","accept-encoding":"gzip, deflate, br, zstd",referer:"https://www.zhihu.com/follow","x-api-version":"3.0.53","x-requested-with":"fetch",Cookie:r},method:"GET"})).json}catch(e){new Zr.Notice(`${Am.notice.fetchHotlistFailed},${e}`)}}async function Im(t){try{let e=await P1(t),n=e.data.filter(r=>r.type==="hot_list_feed"&&r.target&&Object.keys(r.target).length>0);return new Zr.Notice(e.fresh_text),n.map(r=>({id:r.target.id,title:r.target.title,excerpt:r.target.excerpt,detail_text:r.detail_text,link:r.target.url.replace("https://api.zhihu.com/questions/","https://www.zhihu.com/question/"),answer_count:r.target.answer_count,follower_count:r.target.follower_count,type:r.target.type,author:r.target.author.name}))}catch(e){return console.error(Am.error.loadHotlistFailed,e),[]}}var To=require("obsidian");var B1=Q.current;async function Cl(t,e,n){try{let r=await H(t),i=await j(t),a=X(r,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0","q_c1"]);return e==="article"&&(e="post"),(await(0,To.requestUrl)({url:"https://www.zhihu.com/lastread/touch",headers:{"User-Agent":i.user_agent,"accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",referer:"https://www.zhihu.com/","x-requested-with":"fetch",origin:"https://www.zhihu.com",Cookie:a},method:"POST",body:JSON.stringify({items:[[e,n,"read"]]})})).json}catch(r){new To.Notice(`${B1.notice.touchToReadFailed}`)}}var pt=require("obsidian");function R1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}function Il(t,e){return Array(e+1).join(t)}function _1(t){return t.replace(/^\n*/,"")}function U1(t){for(var e=t.length;e>0&&t[e-1]===`
`;)e--;return t.substring(0,e)}var j1=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function Ml(t){return zl(t,j1)}var Em=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function Nm(t){return zl(t,Em)}function q1(t){return Dm(t,Em)}var Fm=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function H1(t){return zl(t,Fm)}function $1(t){return Dm(t,Fm)}function zl(t,e){return e.indexOf(t.nodeName)>=0}function Dm(t,e){return t.getElementsByTagName&&e.some(function(n){return t.getElementsByTagName(n).length})}var _e={};_e.paragraph={filter:"p",replacement:function(t){return`

`+t+`

`}};_e.lineBreak={filter:"br",replacement:function(t,e,n){return n.br+`
`}};_e.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,n){var r=Number(e.nodeName.charAt(1));if(n.headingStyle==="setext"&&r<3){var i=Il(r===1?"=":"-",t.length);return`

`+t+`
`+i+`

`}else return`

`+Il("#",r)+" "+t+`

`}};_e.blockquote={filter:"blockquote",replacement:function(t){return t=t.replace(/^\n+|\n+$/g,""),t=t.replace(/^/gm,"> "),`

`+t+`

`}};_e.list={filter:["ul","ol"],replacement:function(t,e){var n=e.parentNode;return n.nodeName==="LI"&&n.lastElementChild===e?`
`+t:`

`+t+`

`}};_e.listItem={filter:"li",replacement:function(t,e,n){t=t.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var r=n.bulletListMarker+"   ",i=e.parentNode;if(i.nodeName==="OL"){var a=i.getAttribute("start"),o=Array.prototype.indexOf.call(i.children,e);r=(a?Number(a)+o:o+1)+".  "}return r+t+(e.nextSibling&&!/\n$/.test(t)?`
`:"")}};_e.indentedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="indented"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){return`

    `+e.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};_e.fencedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="fenced"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){for(var r=e.firstChild.getAttribute("class")||"",i=(r.match(/language-(\S+)/)||[null,""])[1],a=e.firstChild.textContent,o=n.fence.charAt(0),s=3,l=new RegExp("^"+o+"{3,}","gm"),u;u=l.exec(a);)u[0].length>=s&&(s=u[0].length+1);var c=Il(o,s);return`

`+c+i+`
`+a.replace(/\n$/,"")+`
`+c+`

`}};_e.horizontalRule={filter:"hr",replacement:function(t,e,n){return`

`+n.hr+`

`}};_e.inlineLink={filter:function(t,e){return e.linkStyle==="inlined"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e){var n=e.getAttribute("href");n&&(n=n.replace(/([()])/g,"\\$1"));var r=Ao(e.getAttribute("title"));return r&&(r=' "'+r.replace(/"/g,'\\"')+'"'),"["+t+"]("+n+r+")"}};_e.referenceLink={filter:function(t,e){return e.linkStyle==="referenced"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e,n){var r=e.getAttribute("href"),i=Ao(e.getAttribute("title"));i&&(i=' "'+i+'"');var a,o;switch(n.linkReferenceStyle){case"collapsed":a="["+t+"][]",o="["+t+"]: "+r+i;break;case"shortcut":a="["+t+"]",o="["+t+"]: "+r+i;break;default:var s=this.references.length+1;a="["+t+"]["+s+"]",o="["+s+"]: "+r+i}return this.references.push(o),a},references:[],append:function(t){var e="";return this.references.length&&(e=`

`+this.references.join(`
`)+`

`,this.references=[]),e}};_e.emphasis={filter:["em","i"],replacement:function(t,e,n){return t.trim()?n.emDelimiter+t+n.emDelimiter:""}};_e.strong={filter:["strong","b"],replacement:function(t,e,n){return t.trim()?n.strongDelimiter+t+n.strongDelimiter:""}};_e.code={filter:function(t){var e=t.previousSibling||t.nextSibling,n=t.parentNode.nodeName==="PRE"&&!e;return t.nodeName==="CODE"&&!n},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",n="`",r=t.match(/`+/gm)||[];r.indexOf(n)!==-1;)n=n+"`";return n+e+t+e+n}};_e.image={filter:"img",replacement:function(t,e){var n=Ao(e.getAttribute("alt")),r=e.getAttribute("src")||"",i=Ao(e.getAttribute("title")),a=i?' "'+i+'"':"";return r?"!["+n+"]("+r+a+")":""}};function Ao(t){return t?t.replace(/(\n+\s*)+/g,`
`):""}function Lm(t){this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[];for(var e in t.rules)this.array.push(t.rules[e])}Lm.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){if(t.isBlank)return this.blankRule;var e;return(e=Sl(this.array,t,this.options))||(e=Sl(this._keep,t,this.options))||(e=Sl(this._remove,t,this.options))?e:this.defaultRule},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};function Sl(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(V1(i,e,n))return i}}function V1(t,e,n){var r=t.filter;if(typeof r=="string"){if(r===e.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(t,e,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Q1(t){var e=t.element,n=t.isBlock,r=t.isVoid,i=t.isPre||function(h){return h.nodeName==="PRE"};if(!(!e.firstChild||i(e))){for(var a=null,o=!1,s=null,l=Mm(s,e,i);l!==e;){if(l.nodeType===3||l.nodeType===4){var u=l.data.replace(/[ \r\n\t]+/g," ");if((!a||/ $/.test(a.data))&&!o&&u[0]===" "&&(u=u.substr(1)),!u){l=Tl(l);continue}l.data=u,a=l}else if(l.nodeType===1)n(l)||l.nodeName==="BR"?(a&&(a.data=a.data.replace(/ $/,"")),a=null,o=!1):r(l)||i(l)?(a=null,o=!0):a&&(o=!1);else{l=Tl(l);continue}var c=Mm(s,l,i);s=l,l=c}a&&(a.data=a.data.replace(/ $/,""),a.data||Tl(a))}}function Tl(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function Mm(t,e,n){return t&&t.parentNode===e||n(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var El=typeof window!="undefined"?window:{};function Z1(){var t=El.DOMParser,e=!1;try{new t().parseFromString("","text/html")&&(e=!0)}catch(n){}return e}function W1(){var t=function(){};return Y1()?t.prototype.parseFromString=function(e){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(e),n.close(),n}:t.prototype.parseFromString=function(e){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(e),n.close(),n},t}function Y1(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){El.ActiveXObject&&(t=!0)}return t}var G1=Z1()?El.DOMParser:W1();function K1(t,e){var n;if(typeof t=="string"){var r=J1().parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html");n=r.getElementById("turndown-root")}else n=t.cloneNode(!0);return Q1({element:n,isBlock:Ml,isVoid:Nm,isPre:e.preformattedCode?X1:null}),n}var Al;function J1(){return Al=Al||new G1,Al}function X1(t){return t.nodeName==="PRE"||t.nodeName==="CODE"}function eb(t,e){return t.isBlock=Ml(t),t.isCode=t.nodeName==="CODE"||t.parentNode.isCode,t.isBlank=tb(t),t.flankingWhitespace=nb(t,e),t}function tb(t){return!Nm(t)&&!H1(t)&&/^\s*$/i.test(t.textContent)&&!q1(t)&&!$1(t)}function nb(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var n=rb(t.textContent);return n.leadingAscii&&zm("left",t,e)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&zm("right",t,e)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function rb(t){var e=t.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function zm(t,e,n){var r,i,a;return t==="left"?(r=e.previousSibling,i=/ $/):(r=e.nextSibling,i=/^ /),r&&(r.nodeType===3?a=i.test(r.nodeValue):n.preformattedCode&&r.nodeName==="CODE"?a=!1:r.nodeType===1&&!Ml(r)&&(a=i.test(r.textContent))),a}var ib=Array.prototype.reduce,ob=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Io(t){if(!(this instanceof Io))return new Io(t);var e={rules:_e,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,r){return r.isBlock?`

`:""},keepReplacement:function(n,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(n,r){return r.isBlock?`

`+n+`

`:n}};this.options=R1({},e,t),this.rules=new Lm(this.options)}Io.prototype={turndown:function(t){if(!lb(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(t==="")return"";var e=Om.call(this,new K1(t,this.options));return ab.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else if(typeof t=="function")t(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return ob.reduce(function(e,n){return e.replace(n[0],n[1])},t)}};function Om(t){var e=this;return ib.call(t.childNodes,function(n,r){r=new eb(r,e.options);var i="";return r.nodeType===3?i=r.isCode?r.nodeValue:e.escape(r.nodeValue):r.nodeType===1&&(i=sb.call(e,r)),Pm(n,i)},"")}function ab(t){var e=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(t=Pm(t,n.append(e.options)))}),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function sb(t){var e=this.rules.forNode(t),n=Om.call(this,t),r=t.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+e.replacement(n,t,this.options)+r.trailing}function Pm(t,e){var n=U1(t),r=_1(e),i=Math.max(t.length-n.length,e.length-r.length),a=`

`.substring(0,i);return n+a+r}function lb(t){return t!=null&&(typeof t=="string"||t.nodeType&&(t.nodeType===1||t.nodeType===9||t.nodeType===11))}var Bm=Io;var ub=Q.current;function Rm(t){try{let e=new Bm({headingStyle:"atx",codeBlockStyle:"fenced",bulletListMarker:"-",emDelimiter:"*",strongDelimiter:"**",linkStyle:"inlined"});e.addRule("mathImgToLatex",{filter:function(a){return a.getAttribute("class")==="ztext-math"},replacement:function(a,o){let u=(o.getAttribute("data-tex")||"").trim();return u.endsWith("\\\\")?`$$${u.slice(0,-2)}$$`:`$${u}$`}}),e.addRule("preWithLang",{filter:function(a){return a.nodeName==="PRE"&&a.getAttribute("lang")!==null},replacement:function(a,o){let s=o.getAttribute("lang")||"",l=o.textContent||"";return`\`\`\`${s}
${l.trim()}
\`\`\``}}),e.addRule("tableToMarkdown",{filter:["table"],replacement:function(a,o){let s=Array.from(o.querySelectorAll("tr"));if(s.length===0)return"";let l="",c=Array.from(s[0].querySelectorAll("th, td")).map(h=>{var f;return((f=h.textContent)==null?void 0:f.trim())||""});return l+=`| ${c.join(" | ")} |
`,l+=`| ${c.map(()=>"-----").join(" | ")} |
`,s.slice(1).forEach(h=>{let p=Array.from(h.querySelectorAll("td, th")).map(m=>{var y;return((y=m.textContent)==null?void 0:y.trim())||""});l+=`| ${p.join(" | ")} |
`}),l}}),e.addRule("figureToImage",{filter:["figure"],replacement:function(a,o){var h;let s=o.querySelector("img"),l=o.querySelector("figcaption");if(!s)return"";let u=s.getAttribute("src")||"";return`![${((h=l==null?void 0:l.textContent)==null?void 0:h.trim())||""}](${u})`}}),e.addRule("ignoreBrInHeading",{filter:function(a,o){var s;return a.nodeName==="BR"&&((s=a.parentElement)==null?void 0:s.nodeName.match(/^H[1-6]$/))!==null},replacement:function(){return""}});let n={};e.addRule("footnote",{filter:a=>a.nodeName==="SUP"&&a instanceof HTMLElement&&typeof a.dataset.text=="string"&&typeof a.dataset.url=="string"&&/^\[\d+\]$/.test(a.textContent||""),replacement:function(a,o){var h;let s=o,l=(h=s.dataset.numero)!=null?h:"1",u=`[^${l}]`,c=`${s.dataset.text} ${s.dataset.url}`;return n[l]=c,u}}),e.addRule("escapeHashInPlainText",{filter:a=>{if(a.nodeType!==3)return!1;let o=a.nodeValue;return typeof o=="string"&&o.includes("#")},replacement:a=>a.replace(/#/g,"\\#")}),e.addRule("escapeHashInLinkText",{filter:"a",replacement:function(a,o){let s=o,l=(s.textContent||"").replace(/#/g,"\\#"),u=s.getAttribute("href")||"";return`[${l}](${u})`}});let r=e.turndown(t),i=Object.entries(n).map(([a,o])=>`[^${a}]: ${o}`).join(`
`);return i&&(r+=`

${i}`),r}catch(e){return console.error(ub.error.htmlToMdConvertionFailed,e),""}}var _m=require("@codemirror/state"),Wr=Q.current,Mo=_m.StateField.define({create:()=>null,update:t=>t}),zo=class{constructor(e){this.plugin=e.state.field(Mo)}update(e){!this.plugin&&(this.plugin=e.view.state.field(Mo),!this.plugin)||e.selectionSet&&this.updateCursor(e)}updateCursor(e){this.plugin&&(this.plugin.lastCursorPos=e.startState.selection.main.head)}};async function Um(t,e){let n=Fl(e),r="",i="",a="";switch(n){case"article":[r,i,a]=await hb(t,e);break;case"question":return;case"answer":[r,i,a]=await cb(t,e);break;case"pin":[r,i,a]=await fb(t,e);break;default:return}Yr(t,r,e,i,n,a)}async function jm(t,e){let n=e.target;if(!(n instanceof HTMLAnchorElement)||!n.classList.contains("external-link"))return;let r=n.href;!n.textContent||Fl(r)==="Unknown Item Type"||(e.preventDefault(),e.stopPropagation(),Um(t,r))}async function qm(t,e){let n=t.app,r=n.workspace.getActiveViewOfType(pt.MarkdownView);if(!r)return;let a=r.editor.cm;if(!a)return;let o=a.posAtCoords({x:e.clientX,y:e.clientY});if(!o)return;let u=a.state.doc.lineAt(o),c=u.text,h=/\[([^\]]+)\]\((https?:\/\/[^)]+)\)/g,f;for(;f=h.exec(c);){let p=u.from+f.index,m=p+f[0].length;if(o>p&&o<m){let y=t.lastCursorPos;if(y!==null&&y>=p&&y<=m)return;let k=f[1],C=f[2];if(Fl(C)==="Unknown Item Type")return;e.preventDefault(),e.stopPropagation(),Um(n,C);return}}}async function Nl(t,e){try{let n=await H(t.vault),r=X(n,[]);return(await(0,pt.requestUrl)({url:e,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:138.0) Gecko/20100101 Firefox/138.0",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2","upgrade-insecure-requests":"1","sec-fetch-dest":"document","sec-fetch-mode":"navigate","sec-fetch-site":"none","sec-fetch-user":"?1",priority:"u=0, i",Cookie:r},method:"GET"})).text}catch(n){return console.error(Wr.notice.requestAnswerFailed,n),new pt.Notice(`${Wr.notice.requestAnswerFailed},${n.message}`),""}}async function cb(t,e){var c,h;let[n,r]=gb(e),i=await Nl(t,e),o=new DOMParser().parseFromString(i,"text/html"),s=o.querySelector(".RichContent-inner .RichText"),l=o.querySelector(".UserLink.AuthorInfo-name .UserLink-link"),u=o.querySelector(".QuestionHeader-title");if(s&&l&&u){let f=((c=l.textContent)==null?void 0:c.trim())||"\u77E5\u4E4E\u7528\u6237";return[((h=u.textContent)==null?void 0:h.trim())||`\u77E5\u4E4E\u95EE\u9898${n}`,s.innerHTML,f]}else return new pt.Notice(`${Wr.notice.unableToFindAnswerContent}`),["","",""]}async function hb(t,e){var u,c;let n=xb(e),r=await Nl(t,e),a=new DOMParser().parseFromString(r,"text/html"),o=a.querySelector(".RichText"),s=a.querySelector(".UserLink.AuthorInfo-name .UserLink-link"),l=a.querySelector(".Post-Title");if(o&&s&&l){let h=((u=s.textContent)==null?void 0:u.trim())||"\u77E5\u4E4E\u7528\u6237";return[((c=l.textContent)==null?void 0:c.trim())||`\u77E5\u4E4E\u6587\u7AE0${n}`,o.innerHTML,h]}else return new pt.Notice(`${Wr.notice.unableToFindAnswerContent}`),["","",""]}async function fb(t,e){var s;let n=await Nl(t,e),i=new DOMParser().parseFromString(n,"text/html"),a=i.querySelector(".RichText"),o=i.querySelector(".UserLink.AuthorInfo-name .UserLink-link");if(a&&o){let l=((s=o.textContent)==null?void 0:s.trim())||"\u77E5\u4E4E\u7528\u6237",u=i.querySelectorAll(".Image-PreviewVague"),c=i.createElement("div");return u.forEach(h=>{let f=h.querySelector("img");if(f){let p=f.getAttribute("data-original");if(p){let m=i.createElement("img");m.src=p,m.alt=f.alt||"",m.width=f.width,m.height=f.height,c.appendChild(m)}}}),u.forEach(h=>h.remove()),a.appendChild(c),["",a.innerHTML,l]}else return new pt.Notice(`${Wr.notice.unableToFindAnswerContent}`),["","",""]}async function Yr(t,e,n,r,i,a){let o=db(i),s="zhihu";e=mb(e);let l=pb(`${e}-${a}\u7684${o}.md`),u=`${s}/${l}`;t.vault.getAbstractFileByPath(s)||await t.vault.createFolder(s);let h=t.vault.getAbstractFileByPath(u);if(h){if(!(h instanceof pt.TFile)){console.error(`Path ${u} is not a file`);return}}else{let p=Rm(r),m=await t.vault.create(u,p);await t.fileManager.processFrontMatter(m,b=>{b.tags=`zhihu-${i}`,b["zhihu-link"]=n}),await this.app.workspace.getLeaf().openFile(m);return}await this.app.workspace.getLeaf().openFile(h)}function pb(t){return t.replace(/[/\\[\]|#^:]/g,"")}function mb(t){return t.replace(/<[^>]*>/g,"")}function db(t){switch(t){case"article":return"\u6587\u7AE0";case"question":return"\u63D0\u95EE";case"answer":return"\u56DE\u7B54";case"pin":return"\u60F3\u6CD5";default:return"Unknown Item Type"}}function Fl(t){try{new URL(t)}catch(n){return"Unknown Item Type"}let e={answer:/zhihu\.com\/question\/\d+\/answer\/\d+/,article:/zhuanlan\.zhihu\.com\/p\/\d+/,question:/zhihu\.com\/question\/\d+$/,pin:/zhihu\.com\/pin\/\d+/};return e.answer.test(t)?"answer":e.article.test(t)?"article":e.question.test(t)?"question":e.pin.test(t)?"pin":"Unknown Item Type"}function gb(t){let e=t.match(/^https?:\/\/www\.zhihu\.com\/question\/(\d+)\/answer\/(\d+)/);return e?[e[1],e[2]]:["",""]}function xb(t){let e=t.match(/^https:\/\/zhuanlan\.zhihu\.com\/p\/\d+$/);return e?e[1]:""}var ot=Q.current,Eo="zhihu-sides-view";async function Hm(){let{workspace:t}=this.app,e=t.getLeavesOfType(Eo)[0];if(e){t.revealLeaf(e);return}let n=t.getLeftLeaf(!1);n||(n=t.getLeaf(!0)),n?(await n.setViewState({type:Eo,active:!0}),t.revealLeaf(n)):(new $e.Notice(`${ot.notice.openZhihuSideFailed}`),console.error(ot.error.noLeafAvailable))}var No=class extends $e.View{constructor(n,r){super(n);this.vault=r;this.recommendations=[];this.follows=[];this.hotLists=[];this.recommendUrl="https://www.zhihu.com/api/v3/feed/topstory/recommend?action=down&ad_interval=-10&desktop=true&page_number=7";this.followUrl="https://www.zhihu.com/api/v3/moments?limit=10&desktop=true";this.nextRecommendUrl="";this.nextFollowUrl="";this.prevRecommendUrl="";this.prevFollowUrl=""}getViewType(){return"zhihu-slides-view"}getDisplayText(){return"Zhihu slides"}getIcon(){return"zhihu-icon"}async onOpen(){this.render()}async render(){let n=this.containerEl;n.empty(),n.addClass("zhihu-slides-view");let r=n.createEl("details");r.addClass("side-collapsible");let i=r.createEl("summary",{text:ot.ui.recommendations});i.addClass("side-summary");let a=i.createDiv();a.addClass("side-icons");let o=a.createEl("span");o.addClass("side-icon"),o.setAttr("aria-label",ot.ui.previousPage),(0,$e.setIcon)(o,"arrow-left"),o.onClickEvent(D=>{D.preventDefault(),this.refreshRecommendations(this.prevRecommendUrl)});let s=a.createEl("span");s.addClass("side-icon"),s.setAttr("aria-label",ot.ui.refreshRecommend),(0,$e.setIcon)(s,"refresh-cw"),s.onClickEvent(D=>{D.preventDefault(),this.refreshRecommendations(this.recommendUrl)});let l=a.createEl("span");l.addClass("side-icon"),l.setAttr("aria-label",ot.ui.nextPage),(0,$e.setIcon)(l,"arrow-right"),l.onClickEvent(D=>{D.preventDefault(),this.refreshRecommendations(this.nextRecommendUrl)});let u=r.createEl("div");u.addClass("side-list-container");let c=u.createEl("ul");await this.refreshRecommendations(this.recommendUrl,c);let h=n.createEl("details");h.addClass("side-collapsible");let f=h.createEl("summary",{text:ot.ui.follows});f.addClass("side-summary");let p=f.createDiv();p.addClass("side-icons");let m=p.createEl("span");m.addClass("side-icon"),m.setAttr("aria-label",ot.ui.previousPage),(0,$e.setIcon)(m,"arrow-left"),m.onClickEvent(D=>{D.preventDefault(),this.refreshFollows(this.prevFollowUrl)});let y=p.createEl("span");y.addClass("side-icon"),y.setAttr("aria-label",ot.ui.refreshFollows),(0,$e.setIcon)(y,"refresh-cw"),y.onClickEvent(D=>{D.preventDefault(),this.refreshFollows(this.followUrl)});let b=p.createEl("span");b.addClass("side-icon"),b.setAttr("aria-label",ot.ui.nextPage),(0,$e.setIcon)(b,"arrow-right"),b.onClickEvent(D=>{D.preventDefault(),this.refreshFollows(this.nextFollowUrl)});let k=h.createEl("div");k.addClass("side-list-container");let C=k.createEl("ul");await this.refreshFollows(this.followUrl,C);let w=n.createEl("details");w.addClass("side-collapsible");let A=w.createEl("summary",{text:ot.ui.hotlists});A.addClass("side-summary");let T=A.createEl("span");T.addClass("side-icon"),T.setAttr("aria-label",ot.ui.refreshHotlists),(0,$e.setIcon)(T,"refresh-cw"),T.onClickEvent(D=>{D.preventDefault(),this.refreshHotLists()});let g=w.createEl("div");g.addClass("side-list-container");let I=g.createEl("ul");await this.refreshHotLists(I)}async refreshRecommendations(n,r){let i=r||this.containerEl.querySelector(".zhihu-slides-view .side-list-container ul"),a=await j(this.vault);i.empty();let o=await bm(this.vault,n);this.recommendations=vm(o),this.nextRecommendUrl=o.paging.next,this.prevRecommendUrl=o.paging.previous,new $e.Notice(o.fresh_text),this.recommendations.forEach(s=>{let l=i.createEl("li");l.addClass("side-item"),l.setAttr("aria-label",`${s.title}
${s.author_name}`),l.setAttr("data-tooltip-position","right"),l.createEl("h4",{text:s.title}).addClass("side-title");let c=l.createEl("p");c.addClass("side-excerpt"),c.createEl("b",{text:s.author_name}),c.appendText(": "+s.excerpt),l.onClickEvent(async()=>{a.sendReadToZhihu!==!1&&await Cl(this.vault,s.type,s.id),Yr(this.app,s.title,s.url,s.content,s.type,s.author_name)})})}async refreshFollows(n,r){let i=r||this.containerEl.querySelectorAll(".zhihu-slides-view .side-list-container ul")[1],a=await j(this.vault);i.empty();let o=await Sm(this.vault,n);this.follows=Tm(o),this.nextFollowUrl=o.paging.next,this.prevFollowUrl=o.paging.previous,new $e.Notice(o.fresh_test),this.follows.forEach(s=>{let l=i.createEl("li");l.addClass("side-item"),l.setAttr("aria-label",`${s.title}
${s.action_text}`),l.setAttr("data-tooltip-position","right"),l.createEl("h4",{text:s.title}).addClass("side-title");let c=l.createEl("p");c.addClass("side-excerpt"),c.createEl("b",{text:s.action_text}),c.appendText(": "+s.excerpt),l.onClickEvent(async()=>{a.sendReadToZhihu!==!1&&await Cl(this.vault,s.type,s.id),Yr(this.app,s.title,s.url,s.content,s.type,s.author_name)})})}async refreshHotLists(n){let r=n||this.containerEl.querySelectorAll(".zhihu-slides-view .side-list-container ul")[2];r.empty(),this.hotLists=await Im(this.vault),this.hotLists.forEach(i=>{let a=r.createEl("li");a.addClass("side-item"),a.setAttr("aria-label",`${i.title}
${i.detail_text}`),a.setAttr("data-tooltip-position","right"),a.createEl("h4",{text:i.title}).addClass("side-title");let s=a.createEl("p");s.addClass("side-excerpt"),s.createEl("b",{text:`\u{1F525}${i.detail_text}\u{1F525}`}),s.appendText(": "+i.excerpt),a.onClickEvent(async()=>{Yr(this.app,i.title,i.link,i.excerpt,i.type,i.author)})})}};var ge=require("obsidian");var tn=Q.current,Gr=class extends ge.Modal{constructor(n,r){super(n);this.onSubmit=r}onOpen(){let{contentEl:n}=this;n.createEl("h2",{text:tn.ui.enterQuestionLink}),this.inputEl=new ge.TextComponent(n),this.inputEl.inputEl.addClass("zhihu-question-input"),this.inputEl.setPlaceholder(tn.ui.forExample+"https://www.zhihu.com/question/407774459"),this.inputEl.inputEl.addEventListener("keydown",r=>{if(r.key==="Enter"){let i=this.inputEl.getValue().trim();if(!Qm(i)){new ge.Notice(`${tn.notice.questionLinkInvalid}`);return}this.close(),this.onSubmit(i)}})}onClose(){this.contentEl.empty()}};async function Kr(t){let e=t.workspace.getActiveFile(),n=Q.current,r=t.vault,i=await j(r);if(!e){console.error(n.error.noActiveFileFound);return}let a=t.metadataCache.getFileCache(e),o=a==null?void 0:a.frontmatter;if(!o){new ge.Notice(`${n.notice.noFrontmatter}`);return}let s=o["zhihu-question"];if(!Qm(s)){new ge.Notice(`${n.notice.questionLinkInvalid}`);return}let l=Sb(s),u=vb(o["zhihu-link"]),c=!!o["zhihu-toc"],h=await t.vault.read(e),f=ki(h),p="";switch(u){case 0:break;case 1:p=o["zhihu-link"].replace(`https://www.zhihu.com/question/${l}/answer/`,"");break;case 3:new ge.Notice(`${n.notice.linkInvalid}`);return;default:new ge.Notice(`${n.error.unknownError}`);return}let m=await bo(t,f);m=vo(m);let y={content:m,draft_type:"normal",delta_time:30,settings:{reshipment_settings:"allowed",comment_permission:"all",can_reward:!1,tagline:"",disclaimer_status:"close",disclaimer_type:"none",commercial_report_info:{is_report:!0},push_activity:!1,table_of_contents_enabled:c,thank_inviter_status:"close",thank_inviter:""}};switch(await kb(t.vault,l,p,y),p=(await bb(t.vault,l,p,c,m,u===1)).publish.id,u){case 0:await t.fileManager.processFrontMatter(e,k=>{k["zhihu-link"]=`https://www.zhihu.com/question/${l}/answer/${p}`,k["zhihu-created-at"]=ir(new Date)}),new ge.Notice(`${n.notice.publishAnswerSuccess}`);break;case 1:await t.fileManager.processFrontMatter(e,k=>{k["zhihu-updated-at"]=ir(new Date)}),new ge.Notice(`${n.notice.updateAnswerSuccess}`);break;default:new ge.Notice(`${n.error.unknownError}`);return}}async function kb(t,e,n,r){try{let i=await H(t),a=await j(t),o=X(i,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0"]),s=i.cookies._xsrf,l=`https://www.zhihu.com/api/v4/questions/${e}/draft`;await(0,ge.requestUrl)({url:l,headers:{"User-Agent":a.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Content-Type":"application/json","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2",referer:`https://www.zhihu.com/question/${e}/answer/${n}`,"x-requested-with":"fetch","x-xsrftoken":s,origin:"https://www.zhihu.com",Cookie:o},method:"POST",body:JSON.stringify(r)}),new ge.Notice(`${tn.notice.patchAnswerSuccess}`)}catch(i){new ge.Notice(`${tn.notice.patchAnswerFailed},${i}`)}}async function bb(t,e,n,r,i,a){try{let o=await H(t),s=await j(t),l=X(o,["_zap","_xsrf","BEC","d_c0","captcha_session_v2","z_c0","q_c1"]),u=o.cookies._xsrf,c=`${Date.now()},${Vr()}`,h=await(0,ge.requestUrl)({url:"https://www.zhihu.com/api/v4/content/publish",headers:{"User-Agent":s.user_agent,"Accept-Encoding":"gzip, deflate, br, zstd","Content-Type":"application/json","accept-language":"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2","x-requested-with":"fetch","x-xsrftoken":u,Cookie:l},method:"POST",body:JSON.stringify({action:"answer",data:{publish:{traceId:c},hybridInfo:{},draft:a?{contentId:n,isPublished:a,disabled:1}:{isPublished:a,disabled:1},extra_info:{question_id:e,publisher:"pc",include:"is_visible,paid_info,paid_info_content,has_column,admin_closed_comment,reward_info,annotation_action,annotation_detail,collapse_reason,is_normal,is_sticky,collapsed_by,suggest_edit,comment_count,thanks_count,favlists_count,can_comment,content,editable_content,voteup_count,reshipment_settings,comment_permission,created_time,updated_time,review_info,relevant_info,question,excerpt,attachment,content_source,is_labeled,endorsements,reaction_instruction,ip_info,relationship.is_authorized,voting,is_thanked,is_author,is_nothelp,is_favorited;author.vip_info,kvip_info,badge[*].topics;settings.table_of_content.enabled",pc_business_params:`{"reshipment_settings":"allowed","comment_permission":"all","reward_setting":{"can_reward":false},"disclaimer_status":"close","disclaimer_type":"none","commercial_report_info":{"is_report":false},"commercial_zhitask_bind_info":null,"is_report":false,"table_of_contents_enabled":${r},"thank_inviter_status":"close","thank_inviter":""}`},hybrid:{html:i},reprint:{reshipment_settings:"allowed"},commentsPermission:{comment_permission:"all"},appreciate:{can_reward:!1},publishSwitch:{draft_type:"normal"},creationStatement:{disclaimer_status:"close",disclaimer_type:"none"},commercialReportInfo:{isReport:0},toFollower:{},contentsTables:{table_of_contents_enabled:r},thanksInvitation:{thank_inviter_status:"close",thank_inviter:""}}})});if(h.json.message==="success")return JSON.parse(h.json.data.result);h.json.code===103003&&new ge.Notice(h.json.message)}catch(o){new ge.Notice(`${tn.notice.publishAnswerFailed},${o}`)}}async function $m(t,e){let n=t.vault,r=t.workspace,i="untitled",a=`${i}.md`,o=1;for(;await n.adapter.exists(a);)i=`untitled ${o}`,a=`${i}.md`,o++;try{let s=await n.create(a,"");return await t.fileManager.processFrontMatter(s,u=>{u["zhihu-question"]=e}),await r.getLeaf(!1).openFile(s),a}catch(s){throw console.error(tn.error.createModifyFileFailed,s),s}}async function Vm(t,e){let n=t.vault,r=t.workspace,i=r.getActiveFile();if(!i){new ge.Notice("\u672A\u627E\u5230\u5F53\u524D\u6D3B\u52A8\u6587\u4EF6");return}try{return await t.fileManager.processFrontMatter(i,o=>{o["zhihu-question"]=e}),await r.getLeaf(!1).openFile(i),new ge.Notice("\u5DF2\u5C06\u5F53\u524D\u6587\u4EF6\u8F6C\u6362\u4E3A\u77E5\u4E4E\u56DE\u7B54\u683C\u5F0F"),i.path}catch(a){console.error(tn.error.createModifyFileFailed,a),new ge.Notice("\u6DFB\u52A0\u77E5\u4E4E\u56DE\u7B54\u5143\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\u3002")}}function vb(t){return typeof t=="undefined"||t===null?0:Cb(t)?1:3}function Cb(t){return/^https:\/\/www\.zhihu\.com\/question\/\d+\/answer\/\d+$/.test(t)}function Qm(t){return/^https:\/\/www\.zhihu\.com\/question\/\d+\/?$/.test(t)}function Sb(t){let e=t.match(/zhihu\.com\/question\/(\d+)/);return e?e[1]:""}var Me=require("obsidian");var Nn=require("obsidian");var Ze=require("@codemirror/view"),ud=require("@codemirror/state");var Tb=0,Jr=class{constructor(e,n){this.from=e,this.to=n}},ae=class{constructor(e={}){this.id=Tb++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Qe.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}};ae.closedBy=new ae({deserialize:t=>t.split(" ")});ae.openedBy=new ae({deserialize:t=>t.split(" ")});ae.group=new ae({deserialize:t=>t.split(" ")});ae.isolate=new ae({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});ae.contextHash=new ae({perNode:!0});ae.lookAhead=new ae({perNode:!0});ae.mounted=new ae({perNode:!0});var or=class{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[ae.mounted.id]}},Ab=Object.create(null),Qe=class{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):Ab,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Qe(e.name||"",n,e.id,r);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(i)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[a[0].id]=a[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(ae.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(ae.group),a=-1;a<(i?i.length:0);a++){let o=n[a<0?r.name:i[a]];if(o)return o}}}};Qe.none=new Qe("",Object.create(null),0,8);var ar=class{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let a of e){let o=a(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new Qe(r.name,i,r.id,r.flags):r)}return new ar(n)}},Fo=new WeakMap,Wm=new WeakMap,Ne;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Ne||(Ne={}));var Le=class{constructor(e,n,r,i,a){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,a&&a.length){this.props=Object.create(null);for(let[o,s]of a)this.props[typeof o=="number"?o:o.id]=s}}toString(){let e=or.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new ti(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Fo.get(this)||this.topNode,a=new ti(i);return a.moveTo(e,n),Fo.set(this,a._tree),a}get topNode(){return new Ve(this,0,0,null)}resolve(e,n=0){let r=ei(Fo.get(this)||this.topNode,e,n,!1);return Fo.set(this,r),r}resolveInner(e,n=0){let r=ei(Wm.get(this)||this.topNode,e,n,!0);return Wm.set(this,r),r}resolveStack(e,n=0){return Ib(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:a=this.length}=e,o=e.mode||0,s=(o&Ne.IncludeAnonymous)>0;for(let l=this.cursor(o|Ne.IncludeAnonymous);;){let u=!1;if(l.from<=a&&l.to>=i&&(!s&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(s||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Rl(Qe.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Le(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Le(Qe.none,n,r,i)))}static build(e){return Mb(e)}};Le.empty=new Le(Qe.none,[],[],0);var Xr=class{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Xr(this.buffer,this.index)}},At=class{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Qe.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],a=i.name;if(/\W/.test(a)&&!i.isError&&(a=JSON.stringify(a)),e+=4,r==e)return a;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return a+"("+o.join(",")+")"}findChild(e,n,r,i,a){let{buffer:o}=this,s=-1;for(let l=e;l!=n&&!(Km(a,i,o[l+1],o[l+2])&&(s=l,r>0));l=o[l+3]);return s}slice(e,n,r){let i=this.buffer,a=new Uint16Array(n-e),o=0;for(let s=e,l=0;s<n;){a[l++]=i[s++],a[l++]=i[s++]-r;let u=a[l++]=i[s++]-r;a[l++]=i[s++]-e,o=Math.max(o,u)}return new At(a,o,this.set)}};function Km(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function ei(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof Ve&&t.index<0?null:t.parent;if(!o)return t;t=o}let a=r?0:Ne.IgnoreOverlays;if(r)for(let o=t,s=o.parent;s;o=s,s=o.parent)o instanceof Ve&&o.index<0&&((i=s.enter(e,n,a))===null||i===void 0?void 0:i.from)!=o.from&&(t=s);for(;;){let o=t.enter(e,n,a);if(!o)return t;t=o}}var Lo=class{cursor(e=0){return new ti(this,e)}getChild(e,n=null,r=null){let i=Ym(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Ym(this,e,n,r)}resolve(e,n=0){return ei(this,e,n,!1)}resolveInner(e,n=0){return ei(this,e,n,!0)}matchContext(e){return Dl(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}},Ve=class extends Lo{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,a=0){for(let o=this;;){for(let{children:s,positions:l}=o._tree,u=n>0?s.length:-1;e!=u;e+=n){let c=s[e],h=l[e]+o.from;if(Km(i,r,h,h+c.length)){if(c instanceof At){if(a&Ne.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,n,r-h,i);if(f>-1)return new Tt(new Ll(o,c,e,h),null,f)}else if(a&Ne.IncludeAnonymous||!c.type.isAnonymous||Bl(c)){let f;if(!(a&Ne.IgnoreMounts)&&(f=or.get(c))&&!f.overlay)return new Ve(f.tree,h,e,o);let p=new Ve(c,h,e,o);return a&Ne.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?c.children.length-1:0,n,r,i)}}}if(a&Ne.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&Ne.IgnoreOverlays)&&(i=or.get(this._tree))&&i.overlay){let a=e-this.from;for(let{from:o,to:s}of i.overlay)if((n>0?o<=a:o<a)&&(n<0?s>=a:s>a))return new Ve(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function Ym(t,e,n,r){let i=t.cursor(),a=[];if(!i.firstChild())return a;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return a}for(;;){if(r!=null&&i.type.is(r))return a;if(i.type.is(e)&&a.push(i.node),!i.nextSibling())return r==null?a:[]}}function Dl(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}var Ll=class{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}},Tt=class extends Lo{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return a<0?null:new Tt(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&Ne.ExcludeBuffers)return null;let{buffer:i}=this.context,a=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return a<0?null:new Tt(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Tt(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Tt(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,a=r.buffer[this.index+3];if(a>i){let o=r.buffer[this.index+1];e.push(r.slice(i,a,o)),n.push(0)}return new Le(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function Jm(t){if(!t.length)return null;let e=0,n=t[0];for(let a=1;a<t.length;a++){let o=t[a];(o.from>n.from||o.to<n.to)&&(n=o,e=a)}let r=n instanceof Ve&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new Ol(i,n)}var Ol=class{constructor(e,n){this.heads=e,this.node=n}get next(){return Jm(this.heads)}};function Ib(t,e,n){let r=t.resolveInner(e,n),i=null;for(let a=r instanceof Ve?r:r.context.parent;a;a=a.parent)if(a.index<0){let o=a.parent;(i||(i=[r])).push(o.resolve(e,n)),a=o}else{let o=or.get(a.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let s=new Ve(o.tree,o.overlay[0].from+a.from,-1,a);(i||(i=[r])).push(ei(s,e,n,!1))}}return i?Jm(i):r}var ti=class{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ve)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Ve?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,a=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Ne.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ne.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ne.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(i.buffer.buffer[a+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let a=n+e,o=e<0?-1:r._tree.children.length;a!=o;a+=e){let s=r._tree.children[a];if(this.mode&Ne.IncludeAnonymous||s instanceof At||!s.type.isAnonymous||Bl(s))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer){e:for(let i=this.index,a=this.stack.length;a>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=a+1;break e}i=this.stack[--a]}}for(let i=r;i<this.stack.length;i++)n=new Tt(this.buffer,n,this.stack[i]);return this.bufferNode=new Tt(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Dl(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,a=this.stack.length-1;i>=0;a--){if(a<0)return Dl(this._tree,e,i);let o=r[n.buffer[this.stack[a]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}};function Bl(t){return t.children.some(e=>e instanceof At||!e.type.isAnonymous||Bl(e))}function Mb(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=1024,reused:a=[],minRepeatType:o=r.types.length}=t,s=Array.isArray(n)?new Xr(n,n.length):n,l=r.types,u=0,c=0;function h(T,g,I,D,L,v){let{id:O,start:F,end:z,size:P}=s,B=c,Z=u;for(;P<0;)if(s.next(),P==-1){let ce=a[O];I.push(ce),D.push(F-T);return}else if(P==-3){u=O;return}else if(P==-4){c=O;return}else throw new RangeError(`Unrecognized record size: ${P}`);let te=l[O],Ae,ie,x=F-T;if(z-F<=i&&(ie=b(s.pos-g,L))){let ce=new Uint16Array(ie.size-ie.skip),se=s.pos-ie.size,d=ce.length;for(;s.pos>se;)d=k(ie.start,ce,d);Ae=new At(ce,z-ie.start,r),x=ie.start-T}else{let ce=s.pos-P;s.next();let se=[],d=[],he=O>=o?O:-1,ve=0,tt=z;for(;s.pos>ce;)he>=0&&s.id==he&&s.size>=0?(s.end<=tt-i&&(m(se,d,F,ve,s.end,tt,he,B,Z),ve=se.length,tt=s.end),s.next()):v>2500?f(F,ce,se,d):h(F,ce,se,d,he,v+1);if(he>=0&&ve>0&&ve<se.length&&m(se,d,F,ve,F,tt,he,B,Z),se.reverse(),d.reverse(),he>-1&&ve>0){let at=p(te,Z);Ae=Rl(te,se,d,0,se.length,0,z-F,at,at)}else Ae=y(te,se,d,z-F,B-z,Z)}I.push(Ae),D.push(x)}function f(T,g,I,D){let L=[],v=0,O=-1;for(;s.pos>g;){let{id:F,start:z,end:P,size:B}=s;if(B>4)s.next();else{if(O>-1&&z<O)break;O<0&&(O=P-i),L.push(F,z,P),v++,s.next()}}if(v){let F=new Uint16Array(v*4),z=L[L.length-2];for(let P=L.length-3,B=0;P>=0;P-=3)F[B++]=L[P],F[B++]=L[P+1]-z,F[B++]=L[P+2]-z,F[B++]=B;I.push(new At(F,L[2]-z,r)),D.push(z-T)}}function p(T,g){return(I,D,L)=>{let v=0,O=I.length-1,F,z;if(O>=0&&(F=I[O])instanceof Le){if(!O&&F.type==T&&F.length==L)return F;(z=F.prop(ae.lookAhead))&&(v=D[O]+F.length+z)}return y(T,I,D,L,v,g)}}function m(T,g,I,D,L,v,O,F,z){let P=[],B=[];for(;T.length>D;)P.push(T.pop()),B.push(g.pop()+I-L);T.push(y(r.types[O],P,B,v-L,F-v,z)),g.push(L-I)}function y(T,g,I,D,L,v,O){if(v){let F=[ae.contextHash,v];O=O?[F].concat(O):[F]}if(L>25){let F=[ae.lookAhead,L];O=O?[F].concat(O):[F]}return new Le(T,g,I,D,O)}function b(T,g){let I=s.fork(),D=0,L=0,v=0,O=I.end-i,F={size:0,start:0,skip:0};e:for(let z=I.pos-T;I.pos>z;){let P=I.size;if(I.id==g&&P>=0){F.size=D,F.start=L,F.skip=v,v+=4,D+=4,I.next();continue}let B=I.pos-P;if(P<0||B<z||I.start<O)break;let Z=I.id>=o?4:0,te=I.start;for(I.next();I.pos>B;){if(I.size<0)if(I.size==-3)Z+=4;else break e;else I.id>=o&&(Z+=4);I.next()}L=te,D+=P,v+=Z}return(g<0||D==T)&&(F.size=D,F.start=L,F.skip=v),F.size>4?F:void 0}function k(T,g,I){let{id:D,start:L,end:v,size:O}=s;if(s.next(),O>=0&&D<o){let F=I;if(O>4){let z=s.pos-(O-4);for(;s.pos>z;)I=k(T,g,I)}g[--I]=F,g[--I]=v-T,g[--I]=L-T,g[--I]=D}else O==-3?u=D:O==-4&&(c=D);return I}let C=[],w=[];for(;s.pos>0;)h(t.start||0,t.bufferStart||0,C,w,-1,0);let A=(e=t.length)!==null&&e!==void 0?e:C.length?w[0]+C[0].length:0;return new Le(l[t.topID],C.reverse(),w.reverse(),A)}var Gm=new WeakMap;function Do(t,e){if(!t.isAnonymous||e instanceof At||e.type!=t)return 1;let n=Gm.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Le)){n=1;break}n+=Do(t,r)}Gm.set(e,n)}return n}function Rl(t,e,n,r,i,a,o,s,l){let u=0;for(let m=r;m<i;m++)u+=Do(t,e[m]);let c=Math.ceil(u*1.5/8),h=[],f=[];function p(m,y,b,k,C){for(let w=b;w<k;){let A=w,T=y[w],g=Do(t,m[w]);for(w++;w<k;w++){let I=Do(t,m[w]);if(g+I>=c)break;g+=I}if(w==A+1){if(g>c){let I=m[A];p(I.children,I.positions,0,I.children.length,y[A]+C);continue}h.push(m[A])}else{let I=y[w-1]+m[w-1].length-T;h.push(Rl(t,m,y,A,w,T,I,null,l))}f.push(T+C-a)}}return p(e,n,r,i,0),(s||l)(h,f,o)}var Oo=class{startParse(e,n,r){return typeof e=="string"&&(e=new Pl(e)),r=r?r.length?r.map(i=>new Jr(i.from,i.to)):[new Jr(0,0)]:[new Jr(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let a=i.advance();if(a)return a}}},Pl=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}};var EO=new ae({perNode:!0});var lr=class{constructor(e,n,r,i,a,o,s,l,u,c=0,h){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=a,this.score=o,this.buffer=s,this.bufferBase=l,this.curContext=u,this.lookAhead=c,this.parent=h}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new lr(e,[],n,r,r,0,[],0,i?new Po(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=e&65535,{parser:a}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let s=a.dynamicPrecedence(i);if(s&&(this.score+=s),r==0){this.pushState(a.getGoto(this.state,i,!0),this.reducePos),i<a.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(r-1)*3-(e&262144?6:0),u=l?this.stack[l-2]:this.p.ranges[0].from,c=this.reducePos-u;c>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=c));let h=l?this.stack[l-1]:0,f=this.bufferBase+this.buffer.length-h;if(i<a.minRepeatTerm||e&131072){let p=a.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,u,p,f+4,!0)}if(e&262144)this.state=this.stack[l];else{let p=this.stack[l-3];this.state=a.getGoto(p,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,u)}storeNode(e,n,r,i=4,a=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,s=this.buffer.length;if(s==0&&o.parent&&(s=o.bufferBase-o.parent.bufferBase,o=o.parent),s>0&&o.buffer[s-4]==0&&o.buffer[s-1]>-1){if(n==r)return;if(o.buffer[s-2]>=n){o.buffer[s-2]=r;return}}}if(!a||this.pos==r)this.buffer.push(e,n,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let s=!1;for(let l=o;l>0&&this.buffer[l-2]>r;l-=4)if(this.buffer[l-1]>=0){s=!0;break}if(s)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=n,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,n,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(n,r),n<=this.p.parser.maxNode&&this.buffer.push(n,r,i,4);else{let a=e,{parser:o}=this.p;(i>this.pos||n<=o.maxNode)&&(this.pos=i,o.stateFlag(a,1)||(this.reducePos=i)),this.pushState(a,r),this.shiftContext(n,r),n<=o.maxNode&&this.buffer.push(n,r,i,4)}}apply(e,n,r,i){e&65536?this.reduce(e):this.shift(e,n,r,i)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new lr(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new Ul(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(r==0)return!1;if(!(r&65536))return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>4<<1||this.stack.length>=120){let i=[];for(let a=0,o;a<n.length;a+=2)(o=n[a+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(n[a],o);if(this.stack.length<120)for(let a=0;i.length<4<<1&&a<n.length;a+=2){let o=n[a+1];i.some((s,l)=>l&1&&s==o)||i.push(n[a],o)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let a=n[i+1];if(a==this.state)continue;let o=this.split();o.pushState(a,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(n[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if(!(n&65536))return!1;if(!e.validAction(this.state,n)){let r=n>>19,i=n&65535,a=this.stack.length-r*3;if(a<0||e.getGoto(this.stack[a],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;n=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],r=(i,a)=>{if(!n.includes(i))return n.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let s=(o>>19)-a;if(s>1){let l=o&65535,u=this.stack.length-s*3;if(u>=0&&e.getGoto(this.stack[u],l,!1)>=0)return s<<19|65536|l}}else{let s=r(o,a+1);if(s!=null)return s}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new Po(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}},Po=class{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}},Ul=class{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}},ur=class{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new ur(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new ur(this.stack,this.pos,this.index)}};function ni(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let a=0;for(;;){let o=t.charCodeAt(r++),s=!1;if(o==126){a=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,s=!0),a+=l,s)break;a*=46}n?n[i++]=a:n=new e(a)}return n}var sr=class{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}},Xm=new sr,jl=class{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Xm,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,a=this.pos+e;for(;a<r.from;){if(!i)return null;let o=this.ranges[--i];a-=r.from-o.to,r=o}for(;n<0?a>r.to:a>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];a+=o.from-r.to,r=o}return a}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let a=this.resolveOffset(e,1);if(a==null)return-1;if(r=a,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,s=this.range;for(;s.to<=r;)s=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>s.to&&(this.chunk2=this.chunk2.slice(0,s.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=Xm,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}},nn=class{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;id(this.data,e,n,this.id,r.data,r.tokenPrecTable)}};nn.prototype.contextual=nn.prototype.fallback=nn.prototype.extend=!1;var ql=class{constructor(e,n,r){this.precTable=n,this.elseToken=r,this.data=typeof e=="string"?ni(e):e}token(e,n){let r=e.pos,i=0;for(;;){let a=e.next<0,o=e.resolveOffset(1,1);if(id(this.data,e,n,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(a||i++,o==null)break;e.reset(o,e.token)}i&&(e.reset(r,e.token),e.acceptToken(this.elseToken,i))}};ql.prototype.contextual=nn.prototype.fallback=nn.prototype.extend=!1;function id(t,e,n,r,i,a){let o=0,s=1<<r,{dialect:l}=n.p.parser;e:for(;s&t[o];){let u=t[o+1];for(let p=o+3;p<u;p+=2)if((t[p+1]&s)>0){let m=t[p];if(l.allows(m)&&(e.token.value==-1||e.token.value==m||Eb(m,e.token.value,i,a))){e.acceptToken(m);break}}let c=e.next,h=0,f=t[o+2];if(e.next<0&&f>h&&t[u+f*3-3]==65535){o=t[u+f*3-1];continue e}for(;h<f;){let p=h+f>>1,m=u+p+(p<<1),y=t[m],b=t[m+1]||65536;if(c<y)f=p;else if(c>=b)h=p+1;else{o=t[m+2],e.advance();continue e}}break}}function ed(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function Eb(t,e,n,r){let i=ed(n,r,e);return i<0||ed(n,r,t)<i}var Xe=typeof process!="undefined"&&process.env&&/\bparse\b/.test(process.env.LOG),_l=null;function td(t,e,n){let r=t.cursor(Ne.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}var Hl=class{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?td(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?td(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let a=r.children[i],o=this.start[n]+r.positions[i];if(o>e)return this.nextStart=o,null;if(a instanceof Le){if(o==e){if(o<this.safeFrom)return null;let s=o+a.length;if(s<=this.safeTo){let l=a.prop(ae.lookAhead);if(!l||s+l<this.fragment.to)return a}}this.index[n]++,o+a.length>=Math.max(this.safeFrom,e)&&(this.trees.push(a),this.start.push(o),this.index.push(0))}else this.index[n]++,this.nextStart=o+a.length}}},$l=class{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new sr)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:a}=i,o=i.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,l=0;for(let u=0;u<a.length;u++){if(!(1<<u&o))continue;let c=a[u],h=this.tokens[u];if(!(r&&!c.fallback)&&((c.contextual||h.start!=e.pos||h.mask!=o||h.context!=s)&&(this.updateCachedToken(h,c,e),h.mask=o,h.context=s),h.lookAhead>h.end+25&&(l=Math.max(h.lookAhead,l)),h.value!=0)){let f=n;if(h.extended>-1&&(n=this.addActions(e,h.extended,h.end,n)),n=this.addActions(e,h.value,h.end,n),!c.extend&&(r=h,n>f))break}}for(;this.actions.length>n;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new sr,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new sr,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:a}=r.p;for(let o=0;o<a.specialized.length;o++)if(a.specialized[o]==e.value){let s=a.specializers[o](this.stream.read(e.start,e.end),r);if(s>=0&&r.p.parser.dialect.allows(s>>1)){s&1?e.extended=s>>1:e.value=s>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let a=0;a<i;a+=3)if(this.actions[a]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:a}=e,{parser:o}=e.p,{data:s}=o;for(let l=0;l<2;l++)for(let u=o.stateSlot(a,l?2:1);;u+=3){if(s[u]==65535)if(s[u+1]==1)u=Ut(s,u+2);else{i==0&&s[u+1]==2&&(i=this.putAction(Ut(s,u+2),n,r,i));break}s[u]==n&&(i=this.putAction(Ut(s,u+1),n,r,i))}return i}},Vl=class{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new jl(n,i),this.tokens=new $l(e,this.stream),this.topTerm=e.top[1];let{from:a}=i[0];this.stacks=[lr.start(this,e.top[0],a)],this.fragments=r.length&&this.stream.end-a>e.bufferLength*4?new Hl(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,a;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let s=e[o];for(;;){if(this.tokens.mainToken=null,s.pos>n)r.push(s);else{if(this.advanceStack(s,r,e))continue;{i||(i=[],a=[]),i.push(s);let l=this.tokens.getMainToken(s);a.push(l.value,l.end)}}break}}if(!r.length){let o=i&&Nb(i);if(o)return Xe&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Xe&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,a,r);if(o)return Xe&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((s,l)=>l.score-s.score);r.length>o;)r.pop();r.some(s=>s.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let s=r[o];for(let l=o+1;l<r.length;l++){let u=r[l];if(s.sameState(u)||s.buffer.length>500&&u.buffer.length>500)if((s.score-u.score||s.buffer.length-u.buffer.length)>0)r.splice(l--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:a}=this,o=Xe?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,c=u?e.curContext.hash:0;for(let h=this.fragments.nodeAt(i);h;){let f=this.parser.nodeSet.types[h.type.id]==h.type?a.getGoto(e.state,h.type.id):-1;if(f>-1&&h.length&&(!u||(h.prop(ae.contextHash)||0)==c))return e.useNode(h,f),Xe&&console.log(o+this.stackID(e)+` (via reuse of ${a.getName(h.type.id)})`),!0;if(!(h instanceof Le)||h.children.length==0||h.positions[0]>0)break;let p=h.children[0];if(p instanceof Le&&h.positions[0]==0)h=p;else break}}let s=a.stateSlot(e.state,4);if(s>0)return e.reduce(s),Xe&&console.log(o+this.stackID(e)+` (via always-reduce ${a.getName(s&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let u=0;u<l.length;){let c=l[u++],h=l[u++],f=l[u++],p=u==l.length||!r,m=p?e:e.split(),y=this.tokens.mainToken;if(m.apply(c,h,y?y.start:m.pos,f),Xe&&console.log(o+this.stackID(m)+` (via ${c&65536?`reduce of ${a.getName(c&65535)}`:"shift"} for ${a.getName(h)} @ ${i}${m==e?"":", split"})`),p)return!0;m.pos>i?n.push(m):r.push(m)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return nd(e,n),!0}}runRecovery(e,n,r){let i=null,a=!1;for(let o=0;o<e.length;o++){let s=e[o],l=n[o<<1],u=n[(o<<1)+1],c=Xe?this.stackID(s)+" -> ":"";if(s.deadEnd&&(a||(a=!0,s.restart(),Xe&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,r))))continue;let h=s.split(),f=c;for(let p=0;h.forceReduce()&&p<10&&(Xe&&console.log(f+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,r));p++)Xe&&(f=this.stackID(h)+" -> ");for(let p of s.recoverByInsert(l))Xe&&console.log(c+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,r);this.stream.end>s.pos?(u==s.pos&&(u++,l=0),s.recoverByDelete(l,u),Xe&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(l)})`),nd(s,r)):(!i||i.score<s.score)&&(i=s)}return i}stackToTree(e){return e.close(),Le.build({buffer:ur.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(_l||(_l=new WeakMap)).get(e);return n||_l.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}};function nd(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}var Ql=class{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}};var zn=class extends Oo{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let s=0;s<e.repeatNodeCount;s++)n.push("");let r=Object.keys(e.topRules).map(s=>e.topRules[s][1]),i=[];for(let s=0;s<n.length;s++)i.push([]);function a(s,l,u){i[s].push([l,l.deserialize(String(u))])}if(e.nodeProps)for(let s of e.nodeProps){let l=s[0];typeof l=="string"&&(l=ae[l]);for(let u=1;u<s.length;){let c=s[u++];if(c>=0)a(c,l,s[u++]);else{let h=s[u+-c];for(let f=-c;f>0;f--)a(s[u++],l,h);u++}}}this.nodeSet=new ar(n.map((s,l)=>Qe.define({name:l>=this.minRepeatTerm?void 0:s,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=1024;let o=ni(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let s=0;s<this.specializerSpecs.length;s++)this.specialized[s]=this.specializerSpecs[s].term;this.specializers=this.specializerSpecs.map(rd),this.states=ni(e.states,Uint32Array),this.data=ni(e.stateData),this.goto=ni(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(s=>typeof s=="number"?new nn(o,s):s),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new Vl(this,e,n,r);for(let a of this.wrappers)i=a(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let a=i[n+1];;){let o=i[a++],s=o&1,l=i[a++];if(s&&r)return l;for(let u=a+(o>>1);a<u;a++)if(i[a]==e)return l;if(s)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let a=this.stateSlot(e,i?2:1),o;;a+=3){if((o=r[a])==65535)if(r[a+1]==1)o=r[a=Ut(r,a+2)];else{if(r[a+1]==2)return Ut(r,a+2);break}if(o==n||o==0)return Ut(r,a+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,r=>r==n?!0:null)}allActions(e,n){let r=this.stateSlot(e,4),i=r?n(r):void 0;for(let a=this.stateSlot(e,1);i==null;a+=3){if(this.data[a]==65535)if(this.data[a+1]==1)a=Ut(this.data,a+2);else break;i=n(Ut(this.data,a+1))}return i}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Ut(this.data,r+2);else break;if(!(this.data[r+2]&1)){let i=this.data[r+1];n.some((a,o)=>o&1&&a==i)||n.push(this.data[r],i)}}return n}configure(e){let n=Object.assign(Object.create(zn.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(a=>a.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let a=e.specializers.find(s=>s.from==r.external);if(!a)return r;let o=Object.assign(Object.assign({},r),{external:a.to});return n.specializers[i]=rd(o),o})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let a of e.split(" ")){let o=n.indexOf(a);o>=0&&(r[o]=!0)}let i=null;for(let a=0;a<n.length;a++)if(!r[a])for(let o=this.dialects[n[a]],s;(s=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[s]=1;return new Ql(e,r,i)}static deserialize(e){return new zn(e)}};function Ut(t,e){return t[e]|t[e+1]<<16}function Nb(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function rd(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}var mt=require("@lezer/highlight"),Fb=(0,mt.styleTags)({String:mt.tags.string,Number:mt.tags.number,"True False":mt.tags.bool,PropertyName:mt.tags.propertyName,Null:mt.tags.null,", :":mt.tags.separator,"[ ]":mt.tags.squareBracket,"{ }":mt.tags.brace}),od=zn.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"\u26A0 JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[Fb],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});var et=require("@codemirror/language");var Db=et.LRLanguage.define({name:"json",parser:od.configure({props:[et.indentNodeProp.add({Object:(0,et.continuedIndent)({except:/^\s*\}/}),Array:(0,et.continuedIndent)({except:/^\s*\]/})}),et.foldNodeProp.add({"Object Array":et.foldInside})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function ad(){return new et.LanguageSupport(Db)}var It=require("@codemirror/language"),rn=require("@codemirror/commands"),Ro=require("@codemirror/autocomplete"),_o=require("@codemirror/search"),cd=require("@codemirror/lint");var sd=require("@codemirror/view"),Bo=require("@codemirror/language"),U=require("@lezer/highlight"),V={name:"obsidian",dark:!1,background:"var(--background-primary)",foreground:"var(--text-normal)",selection:"var(--text-selection)",cursor:"var(--text-normal)",dropdownBackground:"var(--background-primary)",dropdownBorder:"var(--background-modifier-border)",activeLine:"var(--background-primary)",matchingBracket:"var(--background-modifier-accent)",keyword:"#d73a49",storage:"#d73a49",variable:"var(--text-normal)",parameter:"var(--text-accent-hover)",function:"var(--text-accent-hover)",string:"var(--text-accent)",constant:"var(--text-accent-hover)",type:"var(--text-accent-hover)",class:"#6f42c1",number:"var(--text-accent-hover)",comment:"var(--text-faint)",heading:"var(--text-accent-hover)",invalid:"var(--text-error)",regexp:"var(--text-accent)"},Lb=sd.EditorView.theme({"&":{color:V.foreground,backgroundColor:V.background},".cm-content":{caretColor:V.cursor},"&.cm-focused .cm-cursor":{borderLeftColor:V.cursor},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, & ::selection":{backgroundColor:V.selection},".cm-panels":{backgroundColor:V.dropdownBackground,color:V.foreground},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:V.dropdownBackground,outline:`1px solid ${V.dropdownBorder}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:V.selection},".cm-activeLine":{backgroundColor:V.activeLine},".cm-activeLineGutter":{backgroundColor:V.background},".cm-selectionMatch":{backgroundColor:V.selection},".cm-matchingBracket, .cm-nonmatchingBracket":{backgroundColor:V.matchingBracket,outline:"none"},".cm-gutters":{backgroundColor:V.background,color:V.comment,borderRight:"1px solid var(--background-modifier-border)"},".cm-lineNumbers, .cm-gutterElement":{color:"inherit"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:V.foreground},".cm-tooltip":{border:`1px solid ${V.dropdownBorder}`,backgroundColor:V.dropdownBackground,color:V.foreground},".cm-tooltip.cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{background:V.selection,color:V.foreground}}},{dark:V.dark}),Ob=Bo.HighlightStyle.define([{tag:U.tags.keyword,color:V.keyword},{tag:[U.tags.name,U.tags.deleted,U.tags.character,U.tags.macroName],color:V.variable},{tag:[U.tags.propertyName],color:V.function},{tag:[U.tags.processingInstruction,U.tags.string,U.tags.inserted,U.tags.special(U.tags.string)],color:V.string},{tag:[U.tags.function(U.tags.variableName),U.tags.labelName],color:V.function},{tag:[U.tags.color,U.tags.constant(U.tags.name),U.tags.standard(U.tags.name)],color:V.constant},{tag:[U.tags.definition(U.tags.name),U.tags.separator],color:V.variable},{tag:[U.tags.className],color:V.class},{tag:[U.tags.number,U.tags.changed,U.tags.annotation,U.tags.modifier,U.tags.self,U.tags.namespace],color:V.number},{tag:[U.tags.typeName],color:V.type,fontStyle:V.type},{tag:[U.tags.operator,U.tags.operatorKeyword],color:V.keyword},{tag:[U.tags.url,U.tags.escape,U.tags.regexp,U.tags.link],color:V.regexp},{tag:[U.tags.meta,U.tags.comment],color:V.comment},{tag:U.tags.strong,fontWeight:"bold"},{tag:U.tags.emphasis,fontStyle:"italic"},{tag:U.tags.link,textDecoration:"underline"},{tag:U.tags.heading,fontWeight:"bold",color:V.heading},{tag:[U.tags.atom,U.tags.bool,U.tags.special(U.tags.variableName)],color:V.variable},{tag:U.tags.invalid,color:V.invalid},{tag:U.tags.strikethrough,textDecoration:"line-through"}]),ld=[Lb,(0,Bo.syntaxHighlighting)(Ob)];var hd=[(0,Ze.lineNumbers)(),(0,Ze.highlightSpecialChars)(),(0,rn.history)(),ad(),(0,Ze.drawSelection)(),(0,Ze.dropCursor)(),ud.EditorState.allowMultipleSelections.of(!0),(0,It.indentOnInput)(),It.indentUnit.of("    "),(0,It.syntaxHighlighting)(It.defaultHighlightStyle,{fallback:!0}),Ze.EditorView.lineWrapping,(0,It.bracketMatching)(),(0,Ro.closeBrackets)(),(0,Ze.rectangularSelection)(),(0,_o.highlightSelectionMatches)(),ld,Ze.keymap.of([...Ro.closeBracketsKeymap,...rn.defaultKeymap,..._o.searchKeymap,...rn.historyKeymap,rn.indentWithTab,...cd.lintKeymap])].filter(t=>t);var Zl=require("@codemirror/state"),Wl=require("@codemirror/view");var En=Q.current;async function fd(t,e,n){let r=JSON.parse(JSON.stringify(n)),i=e.controlEl.createDiv("cookies-editor-wrapper"),a=e.controlEl.createDiv("cookies-footer"),o=a.createDiv("cookies-editor-validity"),s=new Nn.ExtraButtonComponent(o);s.setIcon("checkmark").extraSettingsEl.addClass("cookies-editor-validity-indicator");let l=o.createDiv("cookies-editor-validity-text");l.addClass("setting-item-description");let u=hd;function c(y){s.setIcon(y?"checkmark":"cross"),s.extraSettingsEl.removeClass(y?"invalid":"valid"),s.extraSettingsEl.addClass(y?"valid":"invalid"),l.setText(y?En.settings.editorSyntaxSaved:En.settings.editorSyntaxInvalid)}let h=Wl.EditorView.updateListener.of(async y=>{if(y.docChanged){let b=y.state.doc.toString(),k=!0,C;try{C=JSON.parse(b)}catch(w){k=!1}if(c(k),!k)return;n.cookies=C,await mr(t.app.vault,n)}});u.push(h),this.cookiesEditor=new Wl.EditorView({state:Zl.EditorState.create({doc:JSON.stringify(n.cookies,null,2),extensions:u})}),i.appendChild(this.cookiesEditor.dom);let f=a.createDiv("cookies-editor-buttons");new Nn.ButtonComponent(f).setIcon("arrow-left-right").setTooltip(En.settings.editorResetTooltip).onClick(async()=>{new Uo(t.app,En.settings.editorResetWarning,y=>y.setButtonText(En.settings.editorResetWarningButtonText).setWarning(),async()=>{this.cookiesEditor.setState(Zl.EditorState.create({doc:JSON.stringify(r.cookies,null,2),extensions:u})),c(!0),await mr(t.app.vault,r)}).open()}),new Nn.ButtonComponent(f).setIcon("rotate-ccw").setTooltip(En.settings.editorRefreshTooltip).onClick(async()=>{try{await wi(t.app.vault),t.display()}catch(y){new Nn.Notice(En.settings.editorRefreshFailedNotice)}})}var Y=Q.current,jo=class extends Me.PluginSettingTab{constructor(n,r){super(n,r);this.isLoggedIn=!1;this.userInfo=null;this.plugin=r}hide(){var n;(n=this.cookiesEditor)==null||n.destroy()}async display(){let{containerEl:n}=this;if(n.empty(),this.isLoggedIn=await Pe(this.app.vault),this.isLoggedIn){let o=await H(this.app.vault);this.userInfo=o!=null&&o.userInfo?{avatar_url:o.userInfo.avatar_url,name:o.userInfo.name,headline:o.userInfo.headline}:null}else this.userInfo=null;new Me.Setting(n).setName(Y.settings.accountTitle).setDesc(Y.settings.accountTitleDesc).then(o=>{if(o.nameEl.addClass("zhihu-flex-container"),this.isLoggedIn&&this.userInfo){let s=o.nameEl.createDiv({cls:"zhihu-user-info"});s.createEl("img",{cls:"zhihu-avatar",attr:{src:this.userInfo.avatar_url,width:"40",height:"40"}});let l=s.createDiv({cls:"zhihu-text-container"});l.createEl("div",{text:this.userInfo.name,cls:"zhihu-username"}),this.userInfo.headline&&l.createEl("div",{text:this.userInfo.headline,cls:"zhihu-headline"}),o.addButton(u=>u.setButtonText(Y.settings.logoutButtonText).setWarning().onClick(async()=>{try{await Vo(this.app.vault,"userInfo"),this.isLoggedIn=!1,this.userInfo=null,this.display()}catch(c){console.error(Y.error.logoutFailed,c)}}))}else o.addButton(s=>s.setButtonText(Y.settings.loginButtonText).setCta().onClick(async()=>{try{if(await xi(this.app),this.isLoggedIn=await Pe(this.app.vault),this.isLoggedIn){let l=await H(this.app.vault);this.userInfo=l!=null&&l.userInfo?{avatar_url:l.userInfo.avatar_url,name:l.userInfo.name,headline:l.userInfo.headline}:null}this.display()}catch(l){console.error(Y.error.loginFailed,l)}}))});let r=await j(this.app.vault);new Me.Setting(n).setName(Y.settings.userAgent).setDesc(Y.settings.userAgentDesc).addText(o=>o.setPlaceholder(Y.settings.userAgentPlaceholder).setValue(r.user_agent).onChange(async s=>{try{await Dt(this.app.vault,{user_agent:s})}catch(l){console.error(Y.error.saveUserAgentFailed,l)}})),new Me.Setting(n).setName(Y.settings.restrictAt).setDesc(Y.settings.restrictAtDesc).addToggle(o=>o.setValue(r.restrictToZhihuFM).onChange(async s=>{try{await Dt(this.app.vault,{restrictToZhihuFM:s})}catch(l){console.error(Y.error.saveRestrictAtFailed,l)}})),new Me.Setting(n).setName(Y.settings.clearImageCache).setDesc(Y.settings.clearImageCacheDesc).then(o=>{o.addButton(s=>s.setButtonText(Y.settings.clearImageCacheButtonText).onClick(async()=>{try{await Vo(this.app.vault,"cache"),new Me.Notice(Y.notice.imageCacheCleared)}catch(l){console.error(Y.error.clearImageCacheFailed,l)}}))}),new Me.Setting(n).setName(Y.settings.sendRead).setDesc(Y.settings.sendReadDesc).addToggle(o=>o.setValue(r.sendReadToZhihu).onChange(async s=>{try{await Dt(this.app.vault,{sendReadToZhihu:s})}catch(l){console.error(Y.error.saveSendZhihuFailed,l)}})),new Me.Setting(n).setName(Y.settings.zhihuHeading).setDesc(Y.settings.zhihuHeadingDesc).addToggle(o=>o.setValue(r.useZhihuHeadings).onChange(async s=>{try{await Dt(this.app.vault,{useZhihuHeadings:s})}catch(l){console.error(Y.error.saveUseZhihuHeadingFailed,l)}})),new Me.Setting(n).setName(Y.settings.useImgNameDefault).setDesc(Y.settings.useImgNameDefaultDesc).addToggle(o=>o.setValue(r.useImgNameDefault).onChange(async s=>{try{await Dt(this.app.vault,{useImgNameDefault:s})}catch(l){console.error(Y.error.saveUseImgNameFailed,l)}})),new Me.Setting(n).setName(Y.settings.autoOpenZhihuLink).setDesc(Y.settings.autoOpenZhihuLinkDesc).addToggle(o=>o.setValue(r.autoOpenZhihuLink).onChange(async s=>{try{await Dt(this.app.vault,{autoOpenZhihuLink:s})}catch(l){console.error("save settings failed:",l)}})),new Me.Setting(n).setName(Y.settings.mermaidScale).setDesc(Y.settings.mermaidScaleDesc).addDropdown(o=>{o.addOption("4",Y.settings.UltraHD).addOption("3",Y.settings.HD).addOption("2",Y.settings.LR).setValue(r.mermaidScale.toString()).onChange(async s=>{r.mermaidScale=parseFloat(s),await Dt(this.app.vault,{mermaidScale:parseInt(s)})})}),new Me.Setting(n).setName(Y.settings.editCookies).setDesc(Y.settings.editCookiesDesc).addToggle(o=>o.setValue(r.manualCookieEdit).onChange(async s=>{try{await Dt(this.app.vault,{manualCookieEdit:s}),i.settingEl.toggleClass("cookies-setting-area",s===!0),i.settingEl.toggleClass("hidden",s!==!0)}catch(l){console.error("save settings failed:",l)}}));let i=new Me.Setting(n).setName("Cookies").setDesc(Y.settings.editorDesc).setClass(r.manualCookieEdit?"cookies-setting-area":"hidden"),a=await H(this.app.vault);fd(this,i,a)}},Uo=class extends Me.Modal{constructor(e,n,r,i){super(e),this.contentEl.addClass("zhihu-obsidian-confirmation-modal"),this.contentEl.createEl("p",{text:n}),new Me.Setting(this.contentEl).addButton(a=>{r(a),a.onClick(async()=>{await i(),this.close()})}).addButton(a=>a.setButtonText(Y.ui.cancel).onClick(()=>this.close()))}};var pd=require("obsidian");function md(){(0,pd.addIcon)("zhihu-icon",atob("PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4wIgogICBzdHJva2U9ImN1cnJlbnRDb2xvciIKICAgZmlsbD0iY3VycmVudENvbG9yIgogICB3aWR0aD0iMTAwLjAwMDAwMHB0IgogICBoZWlnaHQ9IjEwMC4wMDAwMDBwdCIKICAgdmlld0JveD0iMCAwIDQwMC4wMDAwMDAgNDAwLjAwMDAwMCIKICAgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIKICAgaWQ9InN2ZzM3NDciCiAgIHNvZGlwb2RpOmRvY25hbWU9InpoaWh1LWxvZ28tZmx1ZW50LnN2ZyIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMC45Mi40ICg1ZGE2ODljMzEzLCAyMDE5LTAxLTE0KSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczM3NTEiIC8+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxIgogICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAiCiAgICAgZ3VpZGV0b2xlcmFuY2U9IjEwIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIyNzM2IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjE2OTkiCiAgICAgaWQ9Im5hbWVkdmlldzM3NDkiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOnpvb209IjEuNzQiCiAgICAgaW5rc2NhcGU6Y3g9IjIwMy4xNTAyNiIKICAgICBpbmtzY2FwZTpjeT0iMTgxLjg0NTA1IgogICAgIGlua3NjYXBlOndpbmRvdy14PSItMTMiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii0xMyIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9InN2ZzM3NDciIC8+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhMzczMyI+CkNyZWF0ZWQgYnkgcG90cmFjZSAxLjEwLCB3cml0dGVuIGJ5IFBldGVyIFNlbGluZ2VyIDIwMDEtMjAxMQo8cmRmOlJERj4KICA8Y2M6V29yawogICAgIHJkZjphYm91dD0iIj4KICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgPGRjOnR5cGUKICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgPC9jYzpXb3JrPgo8L3JkZjpSREY+CjwvbWV0YWRhdGE+CiAgPHBhdGgKICAgICBzdHlsZT0ic3Ryb2tlLXdpZHRoOjUiCiAgICAgZD0ibSA1LjQ2NjE1MTcsMjg1LjM4OTI4IGMgMCwtMC4yMTQzNCA0LjQxNTQzNTYsLTQuNzE1NTggOS44MTIwODAzLC0xMC4wMDI3MyAxNC4zNDY2MjgsLTE0LjA1NTU3IDI3LjIyMDM3MSwtMjkuOTYwNSAzNC40NTg4MDgsLTQyLjU3MjMxIDkuNTEyNTM0LC0xNi41NzQwNSAxOS4yNzQ0NjgsLTQ2Ljc1NjcyIDE5LjU2MjE4MiwtNjAuNDgzNzYgMC4wOTQwMSwtNC40ODEzMSAwLjAwNjEsLTQuODM3NyAtMS43MDkxMTQsLTYuOTU4NDQgLTMuMDEwOTU1LC0zLjcyMjE4IC0zLjUzMjA0NCwtMy43OTEzNCAtMzAuNTk1ODE1LC00LjA2MSAtMTMuMzI2NDc4LC0wLjEzMjc4IC0yNS4zNDY1ODIsLTAuMzc5NCAtMjYuNzExMzQyLC0wLjU0ODA0IC0yLjM4MzUzLC0wLjI5NDU0IC0yLjQ4MTM4MTQsLTAuMzg2MDMgLTIuNDgxMzgxNCwtMi4zMTk5MyAwLC0zLjgzNDY2IDQuNTM4NzcyNCwtMTAuNTIyOTggOC4wNjg2Mjk0LC0xMS44ODk4OSAyLjAyMDk1OSwtMC43ODI2IDEzLjQyNTA1OCwtMS42NyAyMS43MDc5NDgsLTEuNjg5MTggOS42MzMzOCwtMC4wMjIzIDIzLjc1OTA3NSwtMC45NTIxOCAyNy4yNjU3OTMsLTEuNzk0ODUgNy42NTY1NDUsLTEuODM5ODggOC4zMDgwNjQsLTMuMzY2NTkgOS4wMDU2OTIsLTIxLjEwMjk3IDAuNTQ1MDg0LC0xMy44NTc1NCAwLjE4MjczMSwtNDAuNjUzMzgyIC0wLjY1ODYyMSwtNDguNzA4MzA4IC0wLjQ0MjkyLC00LjI0MDI4OCAtMC42NDQ4MjgsLTQuNzcxMjQ4IC0yLjM1MzA1LC02LjE4NzU4MyAtNC4zODQ4NTUsLTMuNjM1NjYzIC0xNS45ODcwMTksLTQuNDgwMDgyIC0yMi42MTM1NzYsLTEuNjQ1ODYzIC0zLjUzNDk1LDEuNTExOTI0IC01LjY2NDM5MiwzLjg0MTExMyAtMTEuNDA4MzgxLDEyLjQ3ODQ5MSAtNC4zMTcxODksNi40OTE4NjQgLTguNDIzMjYzLDExLjQ4MTk1MSAtMTEuMTQzOTM2LDEzLjU0MzE1NSAtMi41NzI4NywxLjk0OTIyNiAtMTMuMDgwMzk0LDYuODgwODg3IC0xNS42NDUxNTYsNy4zNDI5ODggTCA3Ljg3MzM0NjQsOTkuMTc3MDY0IDguOTE5NzMwOSw5NS43ODQ5NzcgQyA5LjQ5NTI0MTQsOTMuOTE5MzM0IDExLjQxOTkzMiw4OC42MDkyNTIgMTMuMTk2ODE5LDgzLjk4NDc5OSAxNC45NzM3MDcsNzkuMzYwMzU3IDE5LjUxMTkyMiw2Ny40ODc1NCAyMy4yODE3NCw1Ny42MDA3ODYgMzQuMjU3NjAyLDI4LjgxNTQxNyAzNi45MjgxNTgsMjMuMjA3NDk2IDQyLjAxMDA3MywxOC4yNzMwNDEgNDQuOTgxOTc2LDE1LjM4NzM3MyA1Ny41OTAyMzMsNy45ODg2OTA2IDU4LjMxMjg0Nyw4LjcwNjM3MjMgYyAwLjE1NDQ0OSwwLjE1MzM5MTcgLTEuMjk3Miw1Ljk5ODU3MTcgLTMuMjI1ODksMTIuOTg5Mjg3NyAtNS4zNDIxNzYsMTkuMzYzMjQ1IC01LjUyODM0LDIxLjg3NTcxOSAtMS44NzcyMDIsMjUuMzM0OTY0IDMuMjA1NTUxLDMuMDM3MDgyIDIuMzQxOTQ5LDIuOTczMDEzIDQ1LjA4OTI1OCwzLjM0NTAzIDQxLjk5OTM4NywwLjM2NTUxMSA0Mi45ODI2OTcsMC40MzA5NjMgNDUuMzcyOTg3LDMuMDIwMjA0IDEuMDM5MjksMS4xMjU4IDQuODM4NSw5LjI2Njk0NSA0LjgzODUsMTAuMzY4MTk2IDAsMC4yMTI2MDEgLTkuNTI0MTMsMC41MDYyOTEgLTIxLjE2NDcyLDAuNjUyNjYzIC0yMy4yMzQ0OCwwLjI5MjEzNiAtMjUuOTAxNDMsMC42Mjg4NjEgLTI5LjEwMjEwNSwzLjY3NDM1OSAtMi4zMjgwOTIsMi4yMTUyMzYgLTMuMjQ3MDk1LDUuNzk3MTI4IC00LjAwMzQyOCwxNS42MDM3ODEgLTAuNzI3MDksOS40Mjc2NDMgLTEuNzExODk5LDM0LjA5ODMyMyAtMS44MjUzMjgsNDUuNzI3MjAzIGwgLTAuMDc4NDEsOC4wMzU3NSAyLjc5Mzk0OSwyLjgxNzI1IGMgMy42NTA2NTEsMy42ODEwNyA0LjczNzI5NywzLjg2ODIxIDI0LjQ3OTIxMiw0LjIxNTQ4IDE4LjQ0MjA1LDAuMzI0NDIgMjAuOTM0MTYsMC43MjI3OSAyNC4wODI1MywzLjg0OTY3IDIuNjE5ODEsMi42MDE5MSA1LjIzMzQxLDcuMTI0NDEgNS41MDM5Nyw5LjUyMzg1IDAuMTYyNzksMS40NDM2NSAtMC4wNjE0LDEuNzU2OTkgLTEuNTYxNDgsMi4xODIzNSAtMC45NjMzNiwwLjI3MzIxIC0xMC4xNTkwOCwwLjc1ODM3IC0yMC40MzQ5MSwxLjA3ODE5IC0yMi44MDYyMywwLjcwOTc3IC0yOS40Nzk2ODQsMS4yNzc0MiAtMzEuOTkyMDIxLDIuNzIxMjcgLTIuNTk3MzQyLDEuNDkyNyAtNS40NzQ2MTcsNS45NjY4NiAtNi4xNjY4NDksOS41ODk0MSAtNi44NzYxNTIsMzUuOTg0NTcgLTEwLjMwMDAyNCw0Ni45NTE0IC0yMi4zMTI3NjQsNzEuNDY5MDggLTYuOTQ3MjI3LDE0LjE3OTEyIC0xMy42MzU1LDIzLjY3MzY0IC0yMC44NzQ0MzUsMjkuNjMyOSAtNC4zNzI0NTksMy41OTk1MSAtMTEuNDgxMjA5LDcuMjU3NTIgLTE2Ljc0MTQ4LDguNjE0ODMgLTYuNzE0OTM3LDEuNzMyNjcgLTIzLjY0NjEwNTIsMy4zMzQ1MyAtMjMuNjQ2MTA1MiwyLjIzNzE5IHoiCiAgICAgaWQ9InBhdGgzNzUzIgogICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiIC8+CiAgPHBhdGgKICAgICBzdHlsZT0ic3Ryb2tlLXdpZHRoOjUiCiAgICAgZD0ibSAxMjkuMDIyNzEsMjQ5LjI4MDU4IGMgLTIuMzIxNDMsLTIuMzY3ODggLTkuOTYwNjcsLTExLjQyOTcgLTE2Ljk3NjA2LC0yMC4xMzczNyAtNy4wMTU0MSwtOC43MDc2OSAtMTQuNDc5NTY4LC0xNy43ODgzMyAtMTYuNTg3MDIyLC0yMC4xNzkyIGwgLTMuODMxNzQ4LC00LjM0NzA1IDMuMzkzODQsLTMuODEzNzcgYyAzLjU2MDcwNCwtNC4wMDEyNSA2Ljk4ODk5LC03LjIxMjg2IDcuNjk5NTEsLTcuMjEyODYgMC43NDUzMiwwIDUuMzYyMDcsNS4wODM1MyAxMi4xMDgxMiwxMy4zMzIzMyAzLjYyMzEzLDQuNDMwMjEgOC4yNTY1LDkuOTI5OCAxMC4yOTYzNywxMi4yMjEzIDUuNzUwMjksNi40NTk2MiA4LjE1MTksOS43MTQ1MiAxMC4xNDczOSwxMy43NTI3OCAyLjM4MjE5LDQuODIwODIgMi40NDI5LDguODQzMTggMC4yMzg5LDE1LjgyODMyIC0wLjg0MzU0LDIuNjczNDIgLTEuNjk5MDQsNC44NjA3NCAtMS45MDExLDQuODYwNzQgLTAuMjAyMDgsMCAtMi4yNjY3NiwtMS45MzczNSAtNC41ODgyLC00LjMwNTIyIHoiCiAgICAgaWQ9InBhdGgzNzU1IgogICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiIC8+CiAgPHBhdGgKICAgICBzdHlsZT0ic3Ryb2tlLXdpZHRoOjUiCiAgICAgZD0ibSAyMDAuNjQ4OTYsMjc5LjU2NTE3IGMgLTAuNzc5ODUsLTAuOTE4NjUgLTIuMjQ1MjUsLTQuNzI2MzQgLTMuOTU4MzksLTEwLjI4NTQyIC0zLjA0OTk5LC05Ljg5NzA4IC00LjI2Nzc1LC0xMC42NTAwOCAtMTcuNjUzNDgsLTEwLjkxNTc4IGwgLTkuODYyNTcsLTAuMTk1NzkgViAxNTQuNDk1NzQgNTAuODIzMjk4IGggNjAuMzYwODQgYyA1Ni44NzM0NSwwIDYwLjM5MDUzLDAuMDU4NTggNjAuODc0MzgsMS4wMTQwNDkgMC43MDc5MywxLjM5Nzk1MyAxLjAzMTE4LDEzNC42Njg2NjMgMC40MjAzLDE3My4yODI4MzMgLTAuNDE0NTQsMjYuMjA0MzcgLTAuNjQ2MzQsMzEuNTQ1MDEgLTEuMzg3NTYsMzEuOTY4OTIgLTEuMjM4NjEsMC43MDgzNyAtOC45ODg3NywxLjA4OTkxIC0zMi42MTQzNSwxLjYwNTU5IGwgLTIwLjM2NTA4LDAuNDQ0NTEgLTQuMDU2NTQsMS44NjU2MSBjIC0yLjIzMTA5LDEuMDI2MDkgLTcuODYwNjksNC41MDk3OSAtMTIuNTEwMTcsNy43NDE1NiAtOC43NDI0NSw2LjA3NjY5IC0xNy4zNDM5OSwxMS41NDMxMiAtMTguMTYzMzQsMTEuNTQzMTIgLTAuMjU4MDUsMCAtMC43NDU4NiwtMC4zMjU5NSAtMS4wODQwNCwtMC43MjQzMiB6IG0gMTQuNTQ1ODUsLTE3LjQ0NjExIGMgMi4wNjM2NSwtMS4wMDE1MiA5LjYxMjc5LC01LjQwNjM2IDE2Ljc3NTg5LC05Ljc4ODUyIGwgMTMuMDIzODIsLTcuOTY3NTggaCAxMi4xNTA3MSBjIDExLjc4NjYxLDAgMTIuMjAxMDIsLTAuMDM5OSAxMy44MzAwNCwtMS4zMzY3IGwgMS42NzkzNiwtMS4zMzY3MiAwLjU5NzEsLTI2LjA0Mjc3IGMgMC42Nzc3MywtMjkuNTYwMTUgMC4yMDQ3NywtMTQwLjM0MTQ5NyAtMC42MTksLTE0NC45OTA3MzkgLTAuMjk3ODIsLTEuNjgwNzY2IC0wLjgzMDI2LC0zLjMyMzE5MSAtMS4xODMyNCwtMy42NDk4MjggLTEuNDY0NjcsLTEuMzU1MzMzIC0xNC4wNTY4NywtMS44ODkwMDYgLTQ1LjI5MTIsLTEuOTE5NDg2IC0yNi42MDYyNCwtMC4wMjYgLTMyLjc5NjksMC4xMTc1NCAtMzUuMzgwMDQsMC44MjAxMjkgbCAtMy4xMzA5NywwLjg1MTU5OCAtMC4zNzk5MiwyNy41MjQzNTggYyAtMC41ODQwNSw0Mi4zMTQ3MTggLTAuNTY4NDUsMTMwLjM0MDE1OCAwLjAyNDcsMTM4Ljg0Mzc5OCAwLjI5MTM4LDQuMTc3ODUgMC44NTExLDguMTUxNyAxLjI0MzgzLDguODMwNzcgMC44NjMyNCwxLjQ5MjU2IDMuMzM3OSwyLjc0MjI0IDYuNTI2NTEsMy4yOTU3OCAyLjk4OTE4LDAuNTE4OTIgMy41MjczMywxLjMwMTY2IDYuOTk0NzMsMTAuMTczNiAxLjY3MDI2LDQuMjczNjMgMy4zNTk1NSw3LjYxMDY1IDQuMTY1NDcsOC4yMjgzOSAxLjcwNzY3LDEuMzA4OTUgMy44NzQ0LDAuOTM4MDEgOC45NzIyNywtMS41MzYwOCB6IgogICAgIGlkPSJwYXRoMzc1NyIKICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIiAvPgo8L3N2Zz4K"))}var ii=require("obsidian");var ri=Q.current;function dd(t){let e=ri.notice.notLogin;t.registerEvent(t.app.workspace.on("editor-menu",(n,r)=>{n.addItem(i=>{i.setTitle(ri.ui.publishCurrentAnswer).onClick(async()=>{await Pe(this.app.vault)?await Kr(this.app):new ii.Notice(e)})}),n.addItem(i=>{i.setTitle(ri.ui.publishCurrentArticle).onClick(async()=>{await Pe(this.app.vault)?await Qr(this.app):new ii.Notice(e)})})})),t.registerEvent(t.app.workspace.on("file-menu",(n,r)=>{n.addItem(i=>{i.setTitle(ri.ui.publishCurrentAnswer).onClick(async()=>{await Pe(this.app.vault)?await Kr(this.app):new ii.Notice(e)})}),n.addItem(i=>{i.setTitle(ri.ui.publishCurrentArticle).onClick(async()=>{await Pe(this.app.vault)?await Qr(this.app):new ii.Notice(e)})})}))}var gd=require("@codemirror/view"),qo=class extends Mt.Plugin{constructor(n,r){super(n,r);this.lastCursorPos=null;this.i18n=Q.current}async onload(){let n=await j(this.app.vault);this.registerEditorExtension([Mo.init(()=>this),gd.ViewPlugin.fromClass(zo)]),n.autoOpenZhihuLink&&this.registerDomEvent(document,"click",i=>{jm(this.app,i),qm(this,i)},!0),n.restrictToZhihuFM&&this.registerEditorSuggest(new oi(this.app)),dd(this);let r=this.i18n.notice.notLogin;md(),this.addRibbonIcon("zhihu-icon","Open Zhihu side view",async()=>{await Pe(this.app.vault)?Hm():new Mt.Notice(r)}),this.registerView(Eo,i=>new No(i,this.app.vault)),this.addCommand({id:"qrcode-login",name:"QRCode login",callback:async()=>{await sc(this.app)}}),this.addCommand({id:"web-login",name:"Web login",callback:async()=>{await xi(this.app)}}),this.addCommand({id:"publish-current-article",name:"Publish current article",editorCallback:async(i,a)=>{await Pe(this.app.vault)?await Qr(this.app):new Mt.Notice(r)}}),this.addCommand({id:"create-new-article",name:"Create new article",callback:async()=>{await Pe(this.app.vault)?await xm(this.app):new Mt.Notice(r)}}),this.addCommand({id:"create-new-answer",name:"Create new answer",callback:async()=>{await Pe(this.app.vault)?new Gr(this.app,async i=>{await $m(this.app,i)}).open():new Mt.Notice(r)}}),this.addCommand({id:"publish-current-answer",name:"Publish current answer",editorCallback:async(i,a)=>{await Pe(this.app.vault)?await Kr(this.app):new Mt.Notice(r)}}),this.addCommand({id:"convert-to-new-article",name:"Convert to new article",callback:async()=>{await Pe(this.app.vault)?await wm(this.app):new Mt.Notice(r)}}),this.addCommand({id:"convert-to-new-answer",name:"Convert to new answer",callback:async()=>{await Pe(this.app.vault)?new Gr(this.app,async i=>{await Vm(this.app,i)}).open():new Mt.Notice(r)}}),this.addSettingTab(new jo(this.app,this))}onunload(){}};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/

/* nosourcemap */